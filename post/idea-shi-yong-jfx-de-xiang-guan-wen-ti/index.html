
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>IDEA使用JFX的相关问题 | 氷泠&#39;s blog</title>
<meta name="description" content="我配不上你，
纵然很努力。">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://2293736867.github.io/favicon.ico?v=1615370942909">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://2293736867.github.io/styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://2293736867.github.io">
        <img class="avatar" src="https://2293736867.github.io/images/avatar.png?v=1615370942909" alt="" width="32px" height="32px">
      </a>
      <a href="https://2293736867.github.io">
        <h1 class="site-title">氷泠&#39;s blog</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="/archives" class="menu purple-link">
            归档
          </a>
        
      
        
          <a href="/post/about" class="menu purple-link">
            关于
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
            <div class="feature-container" style="background-image: url('https://2293736867.github.io/post-images/idea-shi-yong-jfx-de-xiang-guan-wen-ti.jpg')">
            </div>
          
          <h2 class="post-title">IDEA使用JFX的相关问题</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2020-06-03</span>
            
              <span>
                <i class="icon-pricetags-outline"></i>
                
                  <a href="https://2293736867.github.io/tag/j0fdg3Cut/">
                    JFX
                    
                      ，
                    
                  </a>
                
                  <a href="https://2293736867.github.io/tag/qkGQwVHv8/">
                    IDEA
                    
                  </a>
                
              </span>
            
          </div>
          <div class="post-content">
            <h1 id="1-问题概述">1 问题概述</h1>
<p>首先是javafx找不到对应的类：<br>
<img src="https://img-blog.csdnimg.cn/20200517023008663.png" alt="在这里插入图片描述" loading="lazy"><br>
其次是</p>
<pre><code class="language-bash">class com.sun.javafx.fxml.FXMLLoaderHelper (in unnamed module @0x50f36265) cannot access class com.sun.javafx.util.Utils (in module javafx.graphics) 
because module javafx.graphics does not export com.sun.javafx.util to unnamed module @0x50f36265
</code></pre>
<p>这种问题。<br>
或者是</p>
<pre><code class="language-bash">Error: JavaFX runtime components are missing, and are required to run this application
</code></pre>
<p>这样的问题。</p>
<h1 id="2-解决方案">2 解决方案</h1>
<p>环境Manjaro+OpenJDK11，首先需要确保有OpenJFX，但是，不能直接使用pacman/yaourt安装：<br>
<img src="https://img-blog.csdnimg.cn/20200517023504803.png" alt="在这里插入图片描述" loading="lazy"><br>
虽然看上去没什么问题，OpenJDK使用的也是pacman安装的，想着JFX也可以这样，安装之后在</p>
<pre><code class="language-bash">/usr/lib/jvm/java-11-openjdk/lib
</code></pre>
<p>下面确实有了JFX的文件，但是装了之后IDEA死活识别不出来，没办法，只能手动安装JFX。<br>
手动安装的OpenJFX一加就马上识别出来了，所以，手动安装吧，也不难，<a href="https://gluonhq.com/products/javafx/">戳这里</a>下载所需要的版本，解压到对应的位置，然后在IDEA中的外部库添加其中的lib文件夹即可：<br>
<img src="https://img-blog.csdnimg.cn/20200517023853618.png" alt="在这里插入图片描述" loading="lazy"><br>
添加之后另一个问题是</p>
<pre><code class="language-bash">class com.sun.javafx.fxml.FXMLLoaderHelper (in unnamed module @0x50f36265) cannot access class com.sun.javafx.util.Utils (in module javafx.graphics) 
because module javafx.graphics does not export com.sun.javafx.util to unnamed module @0x50f36265
</code></pre>
<p>给出的最多的答案是修改VM Options：</p>
<pre><code class="language-bash">--module-path=JFX_LIB_PATH --add-modules=javafx.controls,javafx.fxml
</code></pre>
<p>其中JFX_LIB_PATH是JFX下的lib目录路径，但是不行，另一个方案是在源文件目录下添加module-info.java：</p>
<pre><code class="language-java">module javafx.graphics{
	exports com.sun.javafx.util
}
</code></pre>
<p>也不行，直接报错，然后又搜索到了另一个解决办法，额外添加一个类似启动类的java文件，比如叫App.java：</p>
<pre><code class="language-java">import javafx.application.Application;

public class App {
    public static void main(String[] args) {
        Application.launch(Main.class,args);
    }
}
</code></pre>
<p>然后修改IDEA的运行配置，把主类修改为App。<br>
这样笔者的问题就解决了，可以正常运行JFX程序了。</p>
<h1 id="3-其他问题">3 其他问题</h1>
<pre><code class="language-bash">Caused by: java.lang.NullPointerException: Location is required.
</code></pre>
<p>其中一个可能的办法是：</p>
<pre><code class="language-java">Parent root = FXMLLoader.load(getClass().getResource(&quot;xxx.fxml&quot;));
</code></pre>
<p>改为：</p>
<pre><code class="language-bash">Parent root = FXMLLoader.load(getClass().getClassLoader().getResource(&quot;xxx.fxml&quot;));
</code></pre>
<p>笔者试过，这个方法不行，另一个解决的方法是，修改pom.xml：</p>
<pre><code class="language-xml">&lt;build&gt;
	&lt;resources&gt;
		&lt;resource&gt;
			&lt;directory&gt;src/main/java&lt;/directory&gt;
				&lt;includes&gt;
                    &lt;include&gt;**/*.fxml&lt;/include&gt;
                &lt;/includes&gt;
			&lt;filtering&gt;false&lt;/filtering&gt;
		&lt;/resource&gt;
	&lt;/resources&gt;
&lt;/build&gt;
</code></pre>
<p>其中include中的两个星号指的是fxml的文件夹的位置。<br>
笔者试过这个方法可行，若fxml文件在源码根目录，可以修改为：</p>
<pre><code class="language-xml">&lt;include&gt;*.fxml&lt;/include&gt;
</code></pre>

          </div>
        </div>

        
          <div class="next-post">
            <a class="purple-link" href="https://2293736867.github.io/post/tu-pian-ya-suo-jiao-ben/">
              <h3 class="post-title">
                下一篇：图片压缩脚本
              </h3>
            </a>
          </div>
          
      </div>

      
        
          <div id="gitalk-container"></div>
        

        
      

      <div class="site-footer">
  <div class="slogan">我配不上你，
纵然很努力。</div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://2293736867.github.io/atom.xml" target="_blank">RSS</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>



  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '477bf133e6f4f92e3d3d',
        clientSecret: 'c917fc4292d22d69e98b9521ac1e6fca627fe54c',
        repo: '2293736867.github.io',
        owner: '2293736867',
        admin: ['2293736867'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
