
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>真 ● 禁秘技 ● 奥义 ● 终端美化 | 氷泠&#39;s blog</title>
<meta name="description" content="我配不上你，
纵然很努力。">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://2293736867.github.io/favicon.ico?v=1615371949211">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://2293736867.github.io/styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://2293736867.github.io">
        <img class="avatar" src="https://2293736867.github.io/images/avatar.png?v=1615371949211" alt="" width="32px" height="32px">
      </a>
      <a href="https://2293736867.github.io">
        <h1 class="site-title">氷泠&#39;s blog</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="/archives" class="menu purple-link">
            归档
          </a>
        
      
        
          <a href="/post/about" class="menu purple-link">
            关于
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
            <div class="feature-container" style="background-image: url('https://2293736867.github.io/post-images/zhen-jin-mi-ji-ao-yi-zhong-duan-mei-hua.jpg')">
            </div>
          
          <h2 class="post-title">真 ● 禁秘技 ● 奥义 ● 终端美化</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2020-06-03</span>
            
              <span>
                <i class="icon-pricetags-outline"></i>
                
                  <a href="https://2293736867.github.io/tag/FaFerPQym/">
                    终端美化
                    
                  </a>
                
              </span>
            
          </div>
          <div class="post-content">
            <p><ul class="markdownIt-TOC">
<li><a href="#1-%E6%A6%82%E8%BF%B0">1 概述</a></li>
<li><a href="#2-%E7%8E%AF%E5%A2%83">2 环境</a></li>
<li><a href="#3-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">3 准备工作</a>
<ul>
<li><a href="#31-zsh">3.1 zsh</a></li>
<li><a href="#32-oh-my-zsh">3.2 oh-my-zsh</a></li>
</ul>
</li>
<li><a href="#4-%E5%AE%89%E8%A3%85p9k">4 安装p9k</a>
<ul>
<li><a href="#41-%E5%AE%89%E8%A3%85%E5%AD%97%E4%BD%93">4.1 安装字体</a></li>
<li><a href="#42-%E5%AE%89%E8%A3%85p9k">4.2 安装p9k</a></li>
</ul>
</li>
<li><a href="#5-p9k%E9%85%8D%E7%BD%AE">5 p9k配置</a>
<ul>
<li><a href="#51-%E5%BC%80%E5%90%AF%E5%85%B3%E9%97%AD%E6%8F%90%E7%A4%BA%E6%AE%B5">5.1 开启/关闭提示段</a>
<ul>
<li><a href="#511-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8">5.1.1 如何使用</a></li>
<li><a href="#512-%E5%BC%80%E5%90%AF%E5%85%B3%E9%97%AD%E6%95%B4%E4%B8%AA%E6%8F%90%E7%A4%BA%E6%AE%B5">5.1.2 开启/关闭整个提示段</a></li>
<li><a href="#513-%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3">5.1.3 系统相关</a></li>
<li><a href="#514-%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B3">5.1.4 语言相关</a></li>
<li><a href="#515-%E4%BA%91%E7%9B%B8%E5%85%B3">5.1.5 云相关</a></li>
<li><a href="#516-%E5%85%B6%E4%BB%96">5.1.6 其他</a></li>
</ul>
</li>
<li><a href="#52-%E4%BD%8D%E7%BD%AE">5.2 位置</a></li>
<li><a href="#53-%E9%A2%9C%E8%89%B2">5.3 颜色</a></li>
<li><a href="#54-%E5%9B%BE%E6%A0%87">5.4 图标</a></li>
<li><a href="#55-%E5%85%B6%E4%BB%96">5.5 其他</a>
<ul>
<li><a href="#551-%E7%B2%98%E5%90%88">5.5.1 粘合</a></li>
<li><a href="#552-%E6%B7%BB%E5%8A%A0%E6%96%B0%E8%A1%8C">5.5.2 添加新行</a></li>
<li><a href="#553-%E6%9B%B4%E5%A4%9A">5.5.3 更多</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#6-p9k%E4%B8%8Ep10k">6 p9k与p10k</a>
<ul>
<li><a href="#61-%E4%B8%A4%E8%80%85%E5%85%B3%E7%B3%BB">6.1 两者关系</a></li>
<li><a href="#62-%E6%8F%90%E7%A4%BA%E5%BB%B6%E8%BF%9F">6.2 提示延迟</a></li>
<li><a href="#63-%E5%8A%A0%E8%BD%BD%E9%80%9F%E5%BA%A6">6.3 加载速度</a></li>
<li><a href="#64-%E5%85%B6%E4%BB%96">6.4 其他</a></li>
</ul>
</li>
<li><a href="#7-%E5%AE%89%E8%A3%85p10k">7 安装p10k</a>
<ul>
<li><a href="#71-%E5%AE%89%E8%A3%85%E5%AD%97%E4%BD%93">7.1 安装字体</a></li>
<li><a href="#72-%E5%AE%89%E8%A3%85p10k">7.2 安装p10k</a></li>
</ul>
</li>
<li><a href="#8-p10k%E9%85%8D%E7%BD%AE">8 p10k配置</a>
<ul>
<li><a href="#81-%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE">8.1 基本配置</a></li>
<li><a href="#82-%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE">8.2 自定义配置</a></li>
</ul>
</li>
<li><a href="#9-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">9 配置文件</a>
<ul>
<li><a href="#91-p9k">9.1 p9k</a></li>
<li><a href="#92-p10k">9.2 p10k</a></li>
</ul>
</li>
</ul>
</p>
<h1 id="1-概述">1 概述</h1>
<p>作为一个程序员，可以没钱，没车，没房，没老婆，没女朋友。<br>
但是，一定要有一个漂亮骚气的终端。<br>
<s>没错，大骚特骚。</s><br>
<s>说什么大实话。</s><br>
先来看看原生的终端：<br>
<img src="https://img-blog.csdnimg.cn/20200512153727942.png" alt="在这里插入图片描述" loading="lazy"><br>
<s>真漂亮啊。</s><br>
再看看美化过的：<br>
<img src="https://img-blog.csdnimg.cn/20200512133828301.png" alt="在这里插入图片描述" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/20200512133937571.png" alt="在这里插入图片描述" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/20200512133340522.png" alt="在这里插入图片描述" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/20200512171351446.png" alt="在这里插入图片描述" loading="lazy"><br>
<s>这才叫终端嘛。</s><br>
美化过的就是不一样。<br>
如果您也想要这样的终端，那这篇文章要仔细看，同时顺手点个赞。</p>
<p>文章讲述了如何使用zsh+oh-my-zsh，配合主题Powerlevel9k/Powerlevel10k（以下简称p9k/p10k）进行终端美化的过程，不废话了，进入正题。</p>
<h1 id="2-环境">2 环境</h1>
<p>笔者环境：</p>
<ul>
<li>Manjaro 20.0</li>
<li>Xfce</li>
<li>自带的Xfce terminal</li>
</ul>
<p>其他linux基本适用，安装zsh+oh-my-zsh即可，mac用户可以通过homebrew安装zsh+p9k/p10k，至于win用户，自行搜索吧。</p>
<h1 id="3-准备工作">3 准备工作</h1>
<p>安装zsh+oh-my-zsh。</p>
<h2 id="31-zsh">3.1 zsh</h2>
<p>Manjaro/Arch：</p>
<pre><code class="language-bash">sudo pacman -S zsh
</code></pre>
<p>Debian系：</p>
<pre><code class="language-bash">sudo apt install zsh
</code></pre>
<p>RedHat系：</p>
<pre><code class="language-bash">sudo yum install -y zsh
</code></pre>
<p>其他可以来到官方github安装，<a href="https://github.com/zsh-users/zsh">戳这里</a>。<br>
设为默认shell：</p>
<pre><code class="language-bash">chsh -s $(which zsh)
</code></pre>
<p>再把原来的别名复制到</p>
<pre><code class="language-bash">~/.zshrc
</code></pre>
<h2 id="32-oh-my-zsh">3.2 oh-my-zsh</h2>
<p>通过脚本安装即可，使用curl或wget：</p>
<pre><code class="language-bash">sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;
#或
sh -c &quot;$(wget -O- https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;
</code></pre>
<p>失败的话可以clone仓库安装，<a href="https://github.com/ohmyzsh/ohmyzsh">戳这里</a>。</p>
<h1 id="4-安装p9k">4 安装p9k</h1>
<h2 id="41-安装字体">4.1 安装字体</h2>
<p>推荐使用Nerd-Fonts字体，能显示最全的图标。Nerd-Fonts包含了大量的“图标字体”，如下图（来源<a href="https://github.com/ryanoasis/nerd-fonts">官方github</a>）：<br>
<img src="https://img-blog.csdnimg.cn/20200511091911917.png" alt="在这里插入图片描述" loading="lazy"><br>
Manjaro/Arch用户：</p>
<pre><code class="language-bash">sudo pacman -S ttf-nerd-fonts
</code></pre>
<p>其他用户可以<a href="https://github.com/ryanoasis/nerd-fonts">戳这里</a>clone下载安装。<br>
p9k默认使用的是Powerline Font字体，Manjaro/Arch用户：</p>
<pre><code class="language-bash">sudo pacman -S powerline-fonts
</code></pre>
<p>其他可以<a href="https://github.com/powerline/fonts">戳这里</a>clone下来安装。</p>
<p>除此之外官方还建议使用Awesome-Powerline Fonts字体或一些程序员字体（如Source Code Pro等），但是图标可能会显示不全，建议还是使用Nerd-Fonts字体。<br>
安装字体后，在设置p9k主题前，也就是在</p>
<pre><code class="language-bash">~/.zshrc
</code></pre>
<p>设置</p>
<pre><code class="language-bash">ZSH_THEME=&quot;powerlevel9k/powerlevel9k&quot;
</code></pre>
<p>之前，设置模式：</p>
<pre><code class="language-bash">POWERLEVEL9K_MODE='nerdfont-complete'
</code></pre>
<p>如果用的是Powerline-Fonts可以不用设置，如果用的是Awesome-fonts，设置：</p>
<pre><code class="language-bash">POWERLEVEL9K_MODE='awesome-fontconfig'
#或
POWERLEVEL9K_MODE='awesome-patched'
</code></pre>
<h2 id="42-安装p9k">4.2 安装p9k</h2>
<p>Manjaro/Arch：</p>
<pre><code class="language-bash">sudo pacman -S zsh-theme-powerlevel9k
echo 'source /usr/share/zsh-theme-powerlevel9k/powerlevel9k.zsh-theme' &gt;&gt; ~/.zshrc
</code></pre>
<p>其他：</p>
<pre><code class="language-bash">git clone https://github.com/bhilburn/powerlevel9k.git ~/.oh-my-zsh/custom/themes/powerlevel9k
# 修改~/.zshrc
ZSH_THEME=&quot;powerlevel9k/powerlevel9k&quot;
</code></pre>
<h1 id="5-p9k配置">5 p9k配置</h1>
<p>p9k配置的主要部分就是自定义提示段（Prompt Segments），包括开启/关闭，位置，颜色，图标等。</p>
<h2 id="51-开启关闭提示段">5.1 开启/关闭提示段</h2>
<h3 id="511-如何使用">5.1.1 如何使用</h3>
<p>具体请看5.2 位置。</p>
<h3 id="512-开启关闭整个提示段">5.1.2 开启/关闭整个提示段</h3>
<p>关闭左边/右边整个提示段：</p>
<pre><code class="language-bash">#左
POWERLEVEL9K_DISABLE_PROMPT=true
#右
POWERLEVEL9K_DISABLE_RPROMPT=true
</code></pre>
<h3 id="513-系统相关">5.1.3 系统相关</h3>
<table>
<thead>
<tr>
<th>名字</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>background_jobs</td>
<td>后台任务</td>
</tr>
<tr>
<td>battery</td>
<td>电池状态</td>
</tr>
<tr>
<td>context</td>
<td>用户名+主机名，基于USER环境变量以及SSH状态</td>
</tr>
<tr>
<td>date</td>
<td>日期</td>
</tr>
<tr>
<td>dir</td>
<td>当前工作目录</td>
</tr>
<tr>
<td>dir_writable</td>
<td>目录可写状态，可写时为空，不可写时出现一个锁</td>
</tr>
<tr>
<td>disk_usage</td>
<td>当前分区的磁盘使用百分比</td>
</tr>
<tr>
<td>history</td>
<td>历史命令的记录数量</td>
</tr>
<tr>
<td>host</td>
<td>主机名</td>
</tr>
<tr>
<td>ip</td>
<td>内网ip</td>
</tr>
<tr>
<td>vpn_ip</td>
<td>vpn ip</td>
</tr>
<tr>
<td>public_ip</td>
<td>公网ip</td>
</tr>
<tr>
<td>load</td>
<td>机器的平均负载</td>
</tr>
<tr>
<td>os_icon</td>
<td>操作系统图标，支持的linux有Alpine，AOSC，Arch，CentOS，CoreOS，Debian，Devuan，Elementary，Fedora，Gentoo，Mageia，Manjaro，Mint，NixOS，OpenSUSE，Sabayon，Slackware，Ubuntu</td>
</tr>
<tr>
<td>ram</td>
<td>内存可用大小</td>
</tr>
<tr>
<td>root_indicator</td>
<td>拥有root权限的提示符</td>
</tr>
<tr>
<td>status</td>
<td>前一条命令的结果状态码</td>
</tr>
<tr>
<td>swap</td>
<td>交换分区使用情况</td>
</tr>
<tr>
<td>time</td>
<td>时间</td>
</tr>
<tr>
<td>user</td>
<td>当前用户</td>
</tr>
<tr>
<td>vi_mode</td>
<td>vi模式</td>
</tr>
<tr>
<td>ssh</td>
<td>ssh状态</td>
</tr>
</tbody>
</table>
<h3 id="514-语言相关">5.1.4 语言相关</h3>
<table>
<thead>
<tr>
<th>名字</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>go_version</td>
<td>Go版本</td>
</tr>
<tr>
<td>node_version</td>
<td>Node.js安装的版本</td>
</tr>
<tr>
<td>nodeenv</td>
<td>使用nodeenv显示Node版本</td>
</tr>
<tr>
<td>nvm</td>
<td>NVM显示Node版本</td>
</tr>
<tr>
<td>php_version</td>
<td>php版本</td>
</tr>
<tr>
<td>laravel_version</td>
<td>Laravel版本</td>
</tr>
<tr>
<td>symfony2_test2</td>
<td>Symfony2测试类与代码类的比率</td>
</tr>
<tr>
<td>symfony2_version</td>
<td>Symfony2版本</td>
</tr>
<tr>
<td>virtualenv</td>
<td>Python VirtualEnv环境</td>
</tr>
<tr>
<td>anaconda</td>
<td>Anaconda环境</td>
</tr>
<tr>
<td>pyenv</td>
<td>pyenv version显示的第一个单词，但是如果是system将不会显示</td>
</tr>
<tr>
<td>chruby</td>
<td>使用chruby的Ruby环境</td>
</tr>
<tr>
<td>rbenv</td>
<td>使用rbenv的Ruby环境</td>
</tr>
<tr>
<td>rspec_stats</td>
<td>RSpec中测试类与代码类的比率</td>
</tr>
<tr>
<td>rvm</td>
<td>使用GEM_HOME环境变量或者MY_RUBY_HOME环境变量显示的Ruby信息</td>
</tr>
<tr>
<td>rust_version</td>
<td>Rust版本</td>
</tr>
<tr>
<td>swift_version</td>
<td>Swift版本</td>
</tr>
<tr>
<td>java_version</td>
<td>Java版本</td>
</tr>
<tr>
<td>openfoam</td>
<td>OpenFOAM库版本</td>
</tr>
</tbody>
</table>
<h3 id="515-云相关">5.1.5 云相关</h3>
<table>
<thead>
<tr>
<th>名字</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>aws</td>
<td>当前的AWS配置</td>
</tr>
<tr>
<td>aws_eb_env</td>
<td>当前的Elastic Beanstalk环境</td>
</tr>
<tr>
<td>docker_machine</td>
<td>当前的Docker Machine</td>
</tr>
<tr>
<td>docker_machine</td>
<td>kubectl配置</td>
</tr>
<tr>
<td>dropbox</td>
<td>Dropbox目录以及使用dropbox-cli的同步状态</td>
</tr>
</tbody>
</table>
<h3 id="516-其他">5.1.6 其他</h3>
<table>
<thead>
<tr>
<th>名字</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>vcs</td>
<td>git/hg仓库的信息</td>
</tr>
<tr>
<td>command_execution_time</td>
<td>命令执行时间</td>
</tr>
<tr>
<td>todo</td>
<td><a href="http://todotxt.org/">todo.txt</a>文件中任务数量</td>
</tr>
<tr>
<td>detect_virt</td>
<td>使用systemd进行虚拟化检测</td>
</tr>
<tr>
<td>newline</td>
<td>另起一行</td>
</tr>
<tr>
<td>custom_command</td>
<td>自定义命令，需要以custom_开头</td>
</tr>
</tbody>
</table>
<p>比如，利用</p>
<pre><code class="language-bash">nmcli device wifi
</code></pre>
<p>显示wifi速率，首先添加一个函数：</p>
<pre><code class="language-bash">wifi_rate(){
	local rate=$(nmcli device wifi | grep -E &quot;\*&quot; | awk '{print $6}') #awk后面的数字可能每个人不同
	echo &quot;\uf0e7 $rate Mbit/s&quot;
}
</code></pre>
<p>其次添加自定义提示段（以custom开头）：</p>
<pre><code class="language-bash">POWERLEVEL9K_CUSTOM_WIFI_RATE=&quot;wifi_rate&quot;
</code></pre>
<p>最后在</p>
<pre><code class="language-bash">POWERLEVEL9K_LEFT_PROMPT_ELEMENTS
#或
POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS
</code></pre>
<p>加上即可，演示效果：<br>
<img src="https://img-blog.csdnimg.cn/20200512041033356.png" alt="在这里插入图片描述" loading="lazy"><br>
需要的话，可以根据信号状态定义不同的颜色：<br>
<img src="https://img-blog.csdnimg.cn/20200512041421959.png" alt="在这里插入图片描述" loading="lazy"><br>
完整配置文件如下，加上了wifi名字：</p>
<pre><code class="language-bash">set_wifi(){
	wifi_signal=$(nmcli device wifi | grep -E &quot;\*&quot; | awk '{print $8}')

	POWERLEVEL9K_CUSTOM_WIFI_NAME_FOREGROUND=&quot;black&quot;
	POWERLEVEL9K_CUSTOM_WIFI_RATE_FOREGROUND=&quot;black&quot;
	POWERLEVEL9K_CUSTOM_WIFI_BARS_AND_SIGNAL_FOREGROUND=&quot;black&quot;

	POWERLEVEL9K_CUSTOM_WIFI_NAME_BACKGROUND=&quot;green&quot;
	POWERLEVEL9K_CUSTOM_WIFI_RATE_BACKGROUND=&quot;green&quot;
	POWERLEVEL9K_CUSTOM_WIFI_BARS_AND_SIGNAL_BACKGROUND=&quot;green&quot;

	if [[ $wifi_signal -lt 50 ]] ; then
		POWERLEVEL9K_CUSTOM_WIFI_NAME_BACKGROUND=&quot;red&quot;
		POWERLEVEL9K_CUSTOM_WIFI_RATE_BACKGROUND=&quot;red&quot;
		POWERLEVEL9K_CUSTOM_WIFI_BARS_AND_SIGNAL_BACKGROUND=&quot;red&quot;
	elif [[ $wifi_signal -lt 75 ]] ; then
		POWERLEVEL9K_CUSTOM_WIFI_NAME_BACKGROUND=&quot;yellow&quot;
		POWERLEVEL9K_CUSTOM_WIFI_RATE_BACKGROUND=&quot;yellow&quot;
		POWERLEVEL9K_CUSTOM_WIFI_BARS_AND_SIGNAL_BACKGROUND=&quot;yellow&quot;
	fi
}
set_wifi

wifi_name(){
	local name=$(nmcli device wifi | grep -E &quot;\*&quot; | awk '{print $3}')
	echo &quot;\uf502 $name&quot;
}
wifi_rate(){
	local rate=$(nmcli device wifi | grep -E &quot;\*&quot; | awk '{print $6}')
	echo &quot;\uf0e7 $rate Mbit/s&quot;
}
wifi_bars_and_signal(){
	local bars=$(nmcli device wifi | grep -E &quot;\*&quot; | awk '{print $9}')
	echo &quot;$bars $wifi_signal %%&quot;
}

POWERLEVEL9K_CUSTOM_WIFI_NAME=&quot;wifi_name&quot;
POWERLEVEL9K_CUSTOM_WIFI_RATE=&quot;wifi_rate&quot;
POWERLEVEL9K_CUSTOM_WIFI_BARS_AND_SIGNAL=&quot;wifi_bars_and_signal&quot;
POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(
	custom_wifi_name custom_wifi_rate custom_wifi_bars_and_signal 
)
</code></pre>
<h2 id="52-位置">5.2 位置</h2>
<p>可以加上</p>
<pre><code class="language-bash">POWERLEVEL9K_PROMPT_ON_NEWLINE=true
</code></pre>
<p>使输入的命令显示在新的一行。</p>
<pre><code class="language-bash">POWERLEVEL9K_RPROMPT_ON_NEWLINE=true
</code></pre>
<p>让右边的提示段在新的一行。<br>
在</p>
<pre><code class="language-bash">POWERLEVEL9K_LEFT_PROMPT_ELEMETS
#或
POWERLEVEL9K_RIGHT_PROMPT_ELEMETS
</code></pre>
<p>中，可以配合newline以及5.1中的提示段自定义位置，比如，笔者的：</p>
<pre><code class="language-bash">POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(
	os_icon date time newline 
	custom_wifi_rate custom_wifi_bars_and_signal newline
	background_jobs ram load swap disk_usage newline 
	php_version java_version node_version newline 
	dir dir_writable vcs 
)
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200512103824109.png" alt="在这里插入图片描述" loading="lazy"><br>
当然这不是完整的配置文件，还修改了颜色，完整的配置文件在文末给出。</p>
<h2 id="53-颜色">5.3 颜色</h2>
<p>修改提示段的前景/背景，直接修改即可，一般的格式为：</p>
<pre><code class="language-bash">POWERLEVEL9K_NAME_STATUS_BACKGROUND=
POWERLEVEL9K_NAME_STATUS_FOREGROUND=
</code></pre>
<p>其中NAME为5.1中对应的提示段，比如可以修改：</p>
<pre><code class="language-bash">POWERLEVEL9K_OS_ICON_FOREGROUND=&quot;green&quot;
POWERLEVEL9K_PHP_VERSION_BACKGROUND=&quot;010&quot;
</code></pre>
<p>颜色可以使用一些常见的red/green等等，也可以使用序号，可以查看这张图：<br>
<img src="https://img-blog.csdnimg.cn/20200512104645305.png" alt="在这里插入图片描述" loading="lazy"><br>
也可以使用如下命令显示颜色：</p>
<pre><code class="language-bash">for i in {0..255}; do print -Pn &quot;%K{$i}  %k%F{$i}${(l:3::0:)i}%f &quot; ${${(M)$((i%6)):#3}:+$'\n'}; done
</code></pre>
<p>STATUS不是每个提示段都有的，列表如下：</p>
<table>
<thead>
<tr>
<th>提示段</th>
<th>状态</th>
</tr>
</thead>
<tbody>
<tr>
<td>battery</td>
<td>LOW,CHARGING,CHAGED,DISCONNECTED</td>
</tr>
<tr>
<td>context</td>
<td>DEFAULT,ROOT,SUDO,REMOTE,REMOTE_SUDO</td>
</tr>
<tr>
<td>dir</td>
<td>HOME,HOME_SUBFOLDER,DEFAULT,ETC,NOT_WRITABLE</td>
</tr>
<tr>
<td>dir_writable</td>
<td>FORBIDDEN</td>
</tr>
<tr>
<td>disk_usage</td>
<td>NORMAL,WARNING,CRITICAL</td>
</tr>
<tr>
<td>host</td>
<td>LOCAL,REMOTE</td>
</tr>
<tr>
<td>load</td>
<td>CRITICAL,WARNING,NORMAL</td>
</tr>
<tr>
<td>rspec_stats</td>
<td>STATS_GOOD,STATS_AVG,STATS_BAD</td>
</tr>
<tr>
<td>symfony2_test</td>
<td>TESTS_GOOD,TESTS_AVG,TESTS_BAD</td>
</tr>
<tr>
<td>user</td>
<td>DEFAULT,SUDO,ROOT</td>
</tr>
<tr>
<td>vcs</td>
<td>CLEAN,UNTRACKED,MODIFIED</td>
</tr>
<tr>
<td>vi_mode</td>
<td>NORMAL,INSERT,VISUAL</td>
</tr>
</tbody>
</table>
<p>大部分都可以很容易理解，这里以最简单的为例：</p>
<pre><code class="language-bash">POWERLEVEL9K_DIR_DEFAULT_BACKGROUND='166'
POWERLEVEL9K_DIR_DEFAULT_FOREGROUND='000'
POWERLEVEL9K_DIR_ETC_BACKGROUND='226'
POWERLEVEL9K_DIR_ETC_FOREGROUND='000'
POWERLEVEL9K_DIR_HOME_BACKGROUND='044'
POWERLEVEL9K_DIR_HOME_FOREGROUND='000'
</code></pre>
<p>设置home目录，etc目录以及默认目录的前景与背景。</p>
<h2 id="54-图标">5.4 图标</h2>
<p>使用</p>
<pre><code class="language-bash">get_icon_names
</code></pre>
<p>可以查看内置的图标。<br>
<img src="https://img-blog.csdnimg.cn/20200512110355831.png" alt="在这里插入图片描述" loading="lazy"><br>
注意这个和字体有关，如果使用默认的PowerlineFonts或者使用AwesomeFonts可能不会完整显示所有图标，请使用Nerd-Fonts。</p>
<p><a href="https://www.oschina.net/p/nerd-fonts">戳这里</a>查看Nerd-fonts的部分图标，<a href="https://www.nerdfonts.com/cheat-sheet">戳这里</a>搜索所有的图标。<br>
官方的例子是自定义vcs的图标：</p>
<pre><code class="language-bash">POWERLEVEL9K_VCS_BRANCH_ICON=$'\uF126'
</code></pre>
<p>F126可以通过上面的网站搜索得到，是一个分支的图标：<br>
<img src="https://img-blog.csdnimg.cn/2020051211145535.png" alt="在这里插入图片描述" loading="lazy"><br>
其他git相关图标：</p>
<table>
<thead>
<tr>
<th>名字</th>
<th>图标字段</th>
</tr>
</thead>
<tbody>
<tr>
<td>Github</td>
<td>VCS_GIT_GITHUB_ICON</td>
</tr>
<tr>
<td>BitBucket</td>
<td>VCS_GIT_BITBUCKET_ICON</td>
</tr>
<tr>
<td>GitLab</td>
<td>VCS_GIT_GITLAB_ICON</td>
</tr>
<tr>
<td>其他</td>
<td>VCS_GIT_ICON</td>
</tr>
</tbody>
</table>
<p>另外还可以修改提示段前的图标：</p>
<pre><code class="language-bash">POWERLEVEL9K_MULTILINE_FIRST_PROMPT_PREFIX=&quot;↱&quot;
POWERLEVEL9K_MULTILINE_LAST_PROMPT_PREFIX=&quot;↳ &quot;
POWERLEVEL9K_MULTILINE_NEWLINE_PROMPT_PREFIX=&quot;xxx&quot;
</code></pre>
<p>还可以根据get_icon_names修改默认图标，比如，修改</p>
<pre><code class="language-bash">POWERLEVEL9K_HOME_SUB_ICON=$'\uf74b'
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200512114150180.png" alt="在这里插入图片描述" loading="lazy"><br>
但是直接改icon的话图标会显示得很小，可以在函数中像上面的wifi一样使用echo自定义。</p>
<h2 id="55-其他">5.5 其他</h2>
<h3 id="551-粘合">5.5.1 粘合</h3>
<p>可以添加joined使提示段粘合在一起：</p>
<pre><code class="language-bash">POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(history status_joined)
</code></pre>
<p>修改前：<br>
<img src="https://img-blog.csdnimg.cn/20200512110052513.png" alt="在这里插入图片描述" loading="lazy"><br>
修改后：<br>
<img src="https://img-blog.csdnimg.cn/20200512110045321.png" alt="在这里插入图片描述" loading="lazy"></p>
<h3 id="552-添加新行">5.5.2 添加新行</h3>
<pre><code class="language-bash">POWERLEVEL9K_PROMPT_ADD_NEWLINE=true
</code></pre>
<p>每次输入命令后添加一行空行，可以使用</p>
<pre><code class="language-bash">POWERLEVEL9K_PROMPT_ADD_NEWLINE_COUNT
</code></pre>
<p>控制，默认为1。</p>
<h3 id="553-更多">5.5.3 更多</h3>
<p>更多请移步<a href="https://github.com/Powerlevel9k/powerlevel9k#customizing-prompt-segments">官方文档</a>，太多了，比如电池，自定义充电中或充完电或低电量状态的颜色以及显示状态：<br>
<img src="https://img-blog.csdnimg.cn/20200512115707163.png" alt="在这里插入图片描述" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/20200512115746970.png" alt="在这里插入图片描述" loading="lazy"><br>
好了，p9k就到这里，下面看看p10k。</p>
<h1 id="6-p9k与p10k">6 p9k与p10k</h1>
<h2 id="61-两者关系">6.1 两者关系</h2>
<p>p10k是2019年3月从p9k的仓库fork而来的。p9k已经是一个拥有大量用户的成熟的工程。p10k被分离出来，以更快的速度迭代更新，添加新特性以及改进性能。<br>
p9k与p10k是独立的工程，只能安装其中一个，但是p10k会识别p9k的所有参数。<br>
目前p9k已经不再维护更新，推荐使用p10k。<br>
<img src="https://img-blog.csdnimg.cn/20200511095752966.png" alt="在这里插入图片描述" loading="lazy"></p>
<h2 id="62-提示延迟">6.2 提示延迟</h2>
<p>p9k已有几个issue反映很慢：<br>
<img src="https://img-blog.csdnimg.cn/20200511100009605.png" alt="在这里插入图片描述" loading="lazy"><br>
具体内容请查看p9k官方issue，p10k改进了性能，p10k github有一个演示视频，展示了p10k的速度，在Intel i9-7900X+Ubuntu 18.04上，测试提示延迟如下：<br>
<img src="https://img-blog.csdnimg.cn/20200511100206835.png" alt="在这里插入图片描述" loading="lazy"><br>
（来源官方测试）<br>
相对来说，p9k具有可接受的延迟，如果只是需要当前目录而不需要截断或缩短，p9k可以17ms内渲染完成，p10k可以将其提高30倍的渲染速度，但实际上并不需要，因为延迟变得明显的阀值为50ms。官方建议必须小心使用p9k的配置，因为很容易使得提示变慢，但是p10k在任何配置中几乎都是即时的，可以保持远低于50ms。</p>
<p>另外笔者的系统上也测试过，p9k确实要比p10k慢，添加了很多设置后，p9k在终端中连续按Enter，松手之后还在提示，甚至一个普通的ls也有明显的延迟，但是p10k没有这样的问题，很流畅。</p>
<h2 id="63-加载速度">6.3 加载速度</h2>
<p>p10k比p9k能更快加载，前提是，zsh版本5.4+。<br>
官方建议使用下面的命令测试：</p>
<pre><code class="language-bash">time (repeat 1000 zsh -dfis &lt;&lt;&lt; 'source ~/powerlevel10k/powerlevel10k.zsh-theme')
</code></pre>
<p>但是笔者没有这个文件，怀疑是位置给错了，修改如下：</p>
<pre><code class="language-bash">time (repeat 1000 zsh -dfis &lt;&lt;&lt; 'source /usr/share/zsh-theme-powerlevel10k/powerlevel10k/powerlevel10k.zsh-theme')
</code></pre>
<p>笔者的系统上耗时如下：<br>
<img src="https://img-blog.csdnimg.cn/2020051120031034.png" alt="在这里插入图片描述" loading="lazy"><br>
换了p9k后：</p>
<pre><code class="language-bash">time (repeat 1000 zsh -dfis &lt;&lt;&lt; 'source /usr/share/zsh-theme-powerlevel9k/powerlevel9k.zsh-theme')
</code></pre>
<p>耗时如下：<br>
<img src="https://img-blog.csdnimg.cn/20200511201744364.png" alt="在这里插入图片描述" loading="lazy"><br>
不过好像没快多少的样子，可能是zsh版本的问题，装的是目前最新的5.8，可能老一点的版本区别会明显一点。<br>
官方的测试是p10k用了29s，比相同环境下的p9k master分支大约快6倍，比p9k next分支快17倍。笔者认为仅供参考吧，用p10k就对了，毕竟比p9k快。</p>
<h2 id="64-其他">6.4 其他</h2>
<ul>
<li>p10k默认只开启vcs中git后端的支持，如果需要svn/hg，需要添加到POWERLEVEL9K_VCS_BACKENDS。但是p10k还没有针对svn/hg优化，所以添加的话会让提示变慢</li>
<li>p10k不支持POWERLEVEL9K_VCS_SHOW_SUBMODULE_DIRTY=true</li>
<li>p10k会兼容p9k的所有选项，因此，相同配置下如果p9k与p10k看到的图标不一样，可能是设置了POWERLEVEL9K_MODE的原因，请去掉POWERLEVEL9K_MODE</li>
<li>p9k不识别ZLE_RPROMPT_INDENT，因此p10相比起p9k会有额外的空格。如果不想要可以设置ZLE_RPROMPT_INDENT=0<br>
<img src="https://img-blog.csdnimg.cn/20200512145835247.png" alt="在这里插入图片描述" loading="lazy"></li>
<li>p9k在图标附近有不一致的空格，在p10k已经不存在了，不过可以设置POWERLEVEL9K_LEGACY_ICON_SPACING=true显示与p9k中一样的空格<br>
<img src="https://img-blog.csdnimg.cn/20200512145806760.png" alt="在这里插入图片描述" loading="lazy"></li>
<li>p10k修正了p9k的许多bugs，除了修复空格问题等，最主要是极大地提高了速度</li>
</ul>
<h1 id="7-安装p10k">7 安装p10k</h1>
<h2 id="71-安装字体">7.1 安装字体</h2>
<p>Manjaro/Arch用户：</p>
<pre><code class="language-bash">sudo pacman -S nerd-fonts-meslo-lg
</code></pre>
<p>或手动安装：</p>
<ul>
<li><a href="https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Regular.ttf">MesloLGS NF Regular.ttf</a></li>
<li><a href="https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Bold.ttf">MesloLGS NF Bold.ttf</a></li>
<li><a href="https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Italic.ttf">MesloLGS NF Italic.ttf</a></li>
<li><a href="https://github.com/romkatv/powerlevel10k-media/raw/master/MesloLGS%20NF%20Bold%20Italic.ttf">MesloLGS NF Bold Italic.ttf</a></li>
</ul>
<h2 id="72-安装p10k">7.2 安装p10k</h2>
<p>Manjaro/Arch：</p>
<pre><code class="language-bash">sudo pacman -S zsh-theme-powerlevel10k #如果先前安装了p9k这一步会提示冲突
echo 'source /usr/share/zsh-theme-powerlevel10k/powerlevel10k.zsh-theme' &gt;&gt;! ~/.zshrc
</code></pre>
<p>其他：</p>
<pre><code class="language-bash">git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ~/powerlevel10k
echo 'source ~/powerlevel10k/powerlevel10k.zsh-theme' &gt;&gt;! ~/.zshrc
</code></pre>
<p>如果打开zsh时提示找不到powerlevel9k.zsh-theme这个文件，请在zshrc中把</p>
<pre><code class="language-bash">#~/.zshrc
source /usr/share/zsh-theme-powerlevel9k/powerlevel9k.zsh-theme
</code></pre>
<p>这一行删去。</p>
<h1 id="8-p10k配置">8 p10k配置</h1>
<h2 id="81-基本配置">8.1 基本配置</h2>
<p>终端输入</p>
<pre><code class="language-bash">p10k configure
</code></pre>
<p>就会出现图形化配置向导。首先会问几个问题：<br>
<img src="https://img-blog.csdnimg.cn/20200511213925189.png" alt="在这里插入图片描述" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/2020051121395215.png" alt="在这里插入图片描述" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/20200511214010451.png" alt="在这里插入图片描述" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/20200512135516854.png" alt="在这里插入图片描述" loading="lazy"><br>
会问三个图标：钻石，锁与Debian，应该是测试有没有安装对应的字体，然后会问图标是否会重叠，接着有四种风格可以选择：<br>
<img src="https://img-blog.csdnimg.cn/20200512141652442.png" alt="在这里插入图片描述" loading="lazy"><br>
看个人了，笔者选的3 ，接着可以选择：</p>
<ul>
<li>编码（Unicode/ASCII，一般选Unicode）</li>
<li>时间（不显示/12小时制/24小时制）</li>
<li>分隔符（三角/垂直/斜线/圆角）</li>
<li>提示段头部（三角/渐隐/斜线/垂直）</li>
<li>提示段尾部（垂直/渐隐/三角/倾斜/圆角）</li>
<li>高度（一行/两行）</li>
<li>左右提示段连接方式（无/点状连接/实线连接）</li>
<li>提示段旁的命令提示符（无/左/右/左+右）</li>
<li>颜色（最亮/亮/暗/最暗）</li>
<li>空格（稀疏/紧密）</li>
<li>图标（少/多）</li>
<li>流（简洁/流畅，针对时间等，流畅模式会多一个at与时钟的图标）</li>
<li>临时提示（开启/关闭）</li>
<li>即时提示模式（关闭/安静模式/啰嗦模式，关闭是已经尝试过即时提示模式，但是不兼容zsh配置，需要关闭，安静模式是zsh初始化时不会打印警告信息，啰嗦模式会在zsh初始化时打印警告信息）</li>
<li>覆盖p10k配置文件（如果p10k配置文件已存在，会提示是否覆盖，不覆盖的话也就是相当于此次配置无效，需要覆盖才能生效），覆盖之前原文件会备份</li>
</ul>
<p>简单配置的效果：<br>
<img src="https://img-blog.csdnimg.cn/20200512143546614.png" alt="在这里插入图片描述" loading="lazy"><br>
确实比p9k流畅了很多。</p>
<h2 id="82-自定义配置">8.2 自定义配置</h2>
<p>自定义配置与p9k类似，配置文件位置为：</p>
<pre><code class="language-bash">~/.p10k.zsh
</code></pre>
<p>由于大部分都是p9k的配置，这里就不重复了，图标，位置大体类似，颜色可以使用如下命令获取：</p>
<pre><code class="language-bash">for i in {0..255}; do print -Pn &quot;%K{$i}  %k%F{$i}${(l:3::0:)i}%f &quot; ${${(M)$((i%6)):#3}:+$'\n'}; done
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/202005121532132.png" alt="在这里插入图片描述" loading="lazy"><br>
使用时直接加上数字即可。<br>
<img src="https://img-blog.csdnimg.cn/20200512153242387.png" alt="在这里插入图片描述" loading="lazy"><br>
如果用的是彩虹风格，目录可能在提示段中很难看到，可以直接修改配置文件的颜色，或修改终端全局配置的颜色。<br>
<img src="https://img-blog.csdnimg.cn/20200512170719170.png" alt="在这里插入图片描述" loading="lazy"><br>
剩下的就个人慢慢摸索了，改颜色，改图标，改位置等等。<br>
最后贴一张配置完成的图：<br>
<img src="https://img-blog.csdnimg.cn/20200512171322832.png" alt="在这里插入图片描述" loading="lazy"></p>
<h1 id="9-配置文件">9 配置文件</h1>
<p>笔者的配置文件，仅供参考。</p>
<h2 id="91-p9k">9.1 p9k</h2>
<ul>
<li><a href="https://github.com/2293736867/BeatuifulP9kConfig">github</a></li>
<li><a href="https://gitee.com/u6b7b5fc3/BeatuifulP9kConfig">码云</a></li>
</ul>
<h2 id="92-p10k">9.2 p10k</h2>
<ul>
<li><a href="https://github.com/2293736867/BeautifulP10KConfig">github</a></li>
<li><a href="https://gitee.com/u6b7b5fc3/BeautifulP10KConfig">码云</a></li>
</ul>
<p>如果觉得文章好看，欢迎点赞。</p>
<p>同时欢迎关注微信公众号：氷泠之路。</p>
<figure data-type="image" tabindex="1"><img src="https://img-blog.csdnimg.cn/20200325170404220.jpg" alt="在这里插入图片描述" loading="lazy"></figure>

          </div>
        </div>

        
          <div class="next-post">
            <a class="purple-link" href="https://2293736867.github.io/post/unzip-jie-ya-zhong-wen-luan-ma/">
              <h3 class="post-title">
                下一篇：unzip解压中文乱码
              </h3>
            </a>
          </div>
          
      </div>

      

      <div class="site-footer">
  <div class="slogan">我配不上你，
纵然很努力。</div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://2293736867.github.io/atom.xml" target="_blank">RSS</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
