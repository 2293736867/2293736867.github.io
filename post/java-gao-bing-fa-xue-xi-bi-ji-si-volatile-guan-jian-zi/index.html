<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Java高并发学习笔记（四）：volatile关键字 | 氷泠&#39;s blog</title>
<meta name="description" content="几百遍，重复了几百遍
重复的情绪重复的熬过想你的夜" />
<link rel="shortcut icon" href="https://2293736867.github.io/favicon.ico">
<link rel="stylesheet" href="https://2293736867.github.io/styles/main.css">

<script src="https://2293736867.github.io/media/js/jquery.min.js"></script>
<script src="https://2293736867.github.io/media/js/masonry.pkgd.min.js"></script>
<script src="https://2293736867.github.io/media/js/aos.js"></script>
<script src="https://2293736867.github.io/media/js/pace.min.js"></script>
<script src="https://2293736867.github.io/media/js/view-image.min.js"></script>
<script src="https://2293736867.github.io/media/js/jquery.magnific-popup.min.js"></script>
<script src="https://2293736867.github.io/media/js/functions.js"></script>
    <meta name="referrer" content="never">
    <meta name="description" content="1 来源

来源：《Java高并发编程详解 多线程与架构设计》，汪文君著
章节：第十二、十三章

本文是两章的笔记整理。
2 CPU缓存
2.1 缓存模型
计算机中的所有运算操作都是由CPU完成的，CPU指令执行过程需要涉及数据读取和写入操..." />
    <meta name="keywords" content="高并发,Java" />
    <script src="https://2293736867.github.io/media/js/waterfall.min.js"></script>
    <script src="https://2293736867.github.io/media/js/prism.min.js"></script>
  </head>
  <body>
            <header id="header" class="grid-container">
        <!-- start: .menu-wrapper -->
        <div class="menu-mobile"> 
          <i class="fa fa-reorder"></i>
        </div>
        <div class="menu-wrapper">
          <div class="">
            <div class="logo">
              <a href="https://2293736867.github.io"><img src="/media/images/custom-headerLogo.png" alt=""></a>
            </div>
            <!-- start: .main-nav -->

            <nav class="main-nav grid-container grid-parent">
              <ul id="menu-header" class="menu gradient-effect">
                <li class=""><a href="https://2293736867.github.io" class="menu">首页</a></li>
                
                  <li class="" >
                    <a href="/archives" class="menu">
                      归档
                    </a>
                  </li>
                
                  <li class="" >
                    <a href="https://github.com/2293736867" class="menu">
                      Github
                    </a>
                  </li>
                
                <li class="search-menu-item hide-on-mobile hide-on-tablet"><a href="#search-lightbox" class="lightbox mfp-inline"><i class="fa fa-search-line"></i></a></li>
              </ul>
            </nav>
            <a href="#search-lightbox" class="lightbox epcl-search-button mfp-inline hide-on-tablet hide-on-desktop"><i class="fa fa-search-line"></i></a>
            <!-- end: .main-nav -->
            <div class="clear"></div>
            <div class="border hide-on-tablet hide-on-mobile"></div>
          </div>    
          <div class="clear"></div>
        </div>
        <!-- end: .menu-wrapper -->
        <div class="clear"></div>
      </header>
      <div class="hide-on-mobile hide-on-tablet hide-on-desktop">
        <div id="search-lightbox" class="grid-container grid-small grid-parent mfp-hide">
          <div class="search-wrapper section">
            <form id="gridea-search-form" data-update="1626656636551" action="/search/index.html" class="search-form" _lpchecked="1">
              <input type="text" name="q" id="s" value="" class="search-field" placeholder="搜点啥..." aria-label="搜点啥..." required="">
              <button type="submit" class="submit" aria-label="Submit">
                <i class="fa fa-search-line"></i>
              </button>
            </form>
          </div>
        </div>
      </div>

      <main id="single" class="main grid-container fullcover no-sidebar aos-init aos-animate" data-aos="fade">

        <div class="center content">
          <div class="featured-image cover" style="background-image: url('https://2293736867.github.io/post-images/java-gao-bing-fa-xue-xi-bi-ji-si-volatile-guan-jian-zi.jpeg');">
            <div class="meta top"> 
              <time class="meta-info" style="float:left;" datetime="2021-05-16"><i class="fa fa-calendar"></i><span class="lately">2 个月前</span></time>
              
              <a href="https://2293736867.github.io/post/java-gao-bing-fa-xue-xi-bi-ji-si-volatile-guan-jian-zi/#comments" class="comments meta-info" title="">
                <i class="fa fa-comment remixicon"></i><span class="comment-count valine-comment-count" data-xid="/java-gao-bing-fa-xue-xi-bi-ji-si-volatile-guan-jian-zi/"> </span>
              </a>
              <span id="/java-gao-bing-fa-xue-xi-bi-ji-si-volatile-guan-jian-zi/" class="leancloud_visitors views-counter meta-info" title=""><i class="fa fa-leancloud remixicon"></i><span class="leancloud-visitors-count"></span></span>
              
            </div>
            <div class="info">
              <div class="tags ">
                
                      <a href="https://2293736867.github.io/tag/-3_SBZaB7/" class="ctag ctag-0 ctag--3_SBZaB7" aria-label="">高并发</a>
                    
                      <a href="https://2293736867.github.io/tag/-AktfIpz8/" class="ctag ctag-1 ctag--AktfIpz8" aria-label="">Java</a>
                    
              </div>
              <h1 class="title ularge white bold">Java高并发学习笔记（四）：volatile关键字</h1>
            </div>
          </div>
        </div>  

        <div class="epcl-page-wrapper">
          <div class="left-content grid-70 np-mobile">
            <article class="main-article post">
              <section class="post-content">
                <div class="text">
                  <h1 id="1-来源">1 来源</h1>
<ul>
<li>来源：《Java高并发编程详解 多线程与架构设计》，汪文君著</li>
<li>章节：第十二、十三章</li>
</ul>
<p>本文是两章的笔记整理。</p>
<h1 id="2-cpu缓存">2 <code>CPU</code>缓存</h1>
<h2 id="21-缓存模型">2.1 缓存模型</h2>
<p>计算机中的所有运算操作都是由<code>CPU</code>完成的，<code>CPU</code>指令执行过程需要涉及数据读取和写入操作，但是<code>CPU</code>只能访问处于内存中的数据，而内存的速度和<code>CPU</code>的速度是远远不对等的，因此就出现了缓存模型，也就是在<code>CPU</code>和内存之间加入了缓存层。一般现代的<code>CPU</code>缓存层分为三级，分别叫<code>L1</code>缓存、<code>L2</code>缓存和<code>L3</code>缓存，简略图如下：</p>
<figure data-type="image" tabindex="1"><img src="https://img-blog.csdnimg.cn/20210515234450950.png" alt="在这里插入图片描述" loading="lazy"></figure>
<ul>
<li><code>L1</code>缓存：三级缓存中访问速度最快，但是容量最小，另外<code>L1</code>缓存还被划分成了数据缓存（<code>L1d</code>，<code>data</code>首字母）和指令缓存（<code>L1i</code>，<code>instruction</code>首字母）</li>
<li><code>L2</code>缓存：速度比<code>L1</code>慢，但是容量比<code>L1</code>大，在现代的多核<code>CPU</code>中，<code>L2</code>一般被单个核独占</li>
<li><code>L3</code>缓存：三级缓存中速度最慢，但是容量最大，现代<code>CPU</code>中也有<code>L3</code>是多核共享的设计，比如<code>zen3</code>架构的设计</li>
</ul>
<figure data-type="image" tabindex="2"><img src="https://img-blog.csdnimg.cn/20210516000524728.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>缓存的出现，是为了解决<code>CPU</code>直接访问内存效率低下的问题，<code>CPU</code>进行运算的时候，将需要的数据从主存复制一份到缓存中，因为缓存的访问速度快于内存，在计算的时候只需要读取缓存并将结果更新到缓存，运算结束再将结果刷新到主存，这样就大大提高了计算效率，整体交互图简略如下：</p>
<figure data-type="image" tabindex="3"><img src="https://img-blog.csdnimg.cn/20210516001151927.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h2 id="22-缓存一致性问题">2.2 缓存一致性问题</h2>
<p>虽然缓存的出现，大大提高了吞吐能力，但是，也引入了一个新的问题，就是缓存不一致。比如，最简单的一个<code>i++</code>操作，需要将内存数据复制一份到缓存中，<code>CPU</code>读取缓存值并进行更新，先写入缓存，运算结束后再将缓存中新的刷新到内存，具体过程如下：</p>
<ul>
<li>读取内存中的<code>i</code>到缓存中</li>
<li><code>CPU</code>读取缓存<code>i</code>中的值</li>
<li>对<code>i</code>进行加1操作</li>
<li>将结果写回缓存</li>
<li>再将数据刷新到主存</li>
</ul>
<p>这样的<code>i++</code>操作在单线程不会出现问题，但在多线程中，因为每个线程都有自己的工作内存（也叫本地内存，是线程自己的缓存），变量<code>i</code>在多个线程的本地内存中都存在一个副本，如果有两个线程执行<code>i++</code>操作：</p>
<ul>
<li>假设两个线程为A、B，同时假设<code>i</code>初始值为0</li>
<li>线程A从内存中读取<code>i</code>的值放入缓存中，此时<code>i</code>的值为0，线程B也同理，放入缓存中的值也是0</li>
<li>两个线程同时进行自增操作，此时A、B线程的缓存中，<code>i</code>的值都是1</li>
<li>两个线程将<code>i</code>写入主内存，相当于<code>i</code>被两次赋值为1</li>
<li>最终结果是<code>i</code>的值为1</li>
</ul>
<p>这个就是典型的缓存不一致问题，主流的解决办法有：</p>
<ul>
<li>总线加锁</li>
<li>缓存一致性协议</li>
</ul>
<h3 id="221-总线加锁">2.2.1 总线加锁</h3>
<p>这是一种悲观的实现方式，具体来说，就是通过处理器发出<code>lock</code>指令，锁住总线，总线收到指令后，会阻塞其他处理器的请求，直到占用锁的处理器完成操作。特点是只有一个抢到总线锁的处理器运行，但是这种方式效率低下，一旦某个处理器获取到锁其他处理器只能阻塞等待，会影响多核处理器的性能。</p>
<h3 id="222-缓存一致性协议">2.2.2 缓存一致性协议</h3>
<p>图示如下：</p>
<figure data-type="image" tabindex="4"><img src="https://img-blog.csdnimg.cn/20210516002914904.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>缓存一致性协议中最出名的就是<code>MESI</code>协议，<code>MESI</code>保证了每一个缓存中使用的共享变量的副本都是一致的。大致思想是，<code>CPU</code>操作缓存中的数据时，如果发现该变量是一个共享变量，操作如下：</p>
<ul>
<li>读取：不做其他处理，只是将缓存中数据读取到寄存器中</li>
<li>写入：发出信号通知其他<code>CPU</code>将该变量的缓存行设置为无效状态（<code>Invalid</code>），其他<code>CPU</code>进行该变量的读取时需要到主存中再次获取</li>
</ul>
<p>具体来说，<code>MESI</code>中规定了缓存行使用4种状态标记：</p>
<ul>
<li><code>M</code>：<code>Modified</code>，被修改</li>
<li><code>E</code>：<code>Exclusive</code>，独享的</li>
<li><code>S</code>：<code>Shared</code>，共享的</li>
<li><code>I</code>：<code>Invalid</code>，无效的</li>
</ul>
<p>有关<code>MESI</code>详细的实现超出了本文的范围，想要详细了解可以参考<a href="https://www.cnblogs.com/yanlong300/p/8986041.html">此处</a>或<a href="http://www2.in.tum.de/hp/file?fid=1276">此处</a>。</p>
<h1 id="3-jmm">3 <code>JMM</code></h1>
<p>看完了<code>CPU</code>缓存再来看一下<code>JMM</code>，也就是<code>Java</code>内存模型，指定了<code>JVM</code>如何与计算机的主存进行工作，同时也决定了一个线程对共享变量的写入何时对其他线程可见，<code>JMM</code>定义了线程和主内存之间的抽象关系，具体如下：</p>
<ul>
<li>共享变量存储于主内存中，每个线程都可以访问</li>
<li>每个线程都有私有的工作内存或者叫本地内存</li>
<li>工作内存只存储该线程对共享变量的副本</li>
<li>线程不能直接操作主内存，只有先操作了工作内存之后才能写入主内存</li>
<li>工作内存和<code>JMM</code>内存模型一样也是一个抽象概念，其实并不存在，涵盖了缓存、寄存器、编译器优化以及硬件等</li>
</ul>
<p>简略图如下：</p>
<figure data-type="image" tabindex="5"><img src="https://img-blog.csdnimg.cn/20210516104445340.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>与<code>MESI</code>类似，如果一个线程修改了共享变量，刷新到主内存后，其他线程读取工作内存的时候发现缓存失效，会从主内存再次读取到工作内存中。</p>
<p>而下图表示了<code>JVM</code>与计算机硬件分配的关系：</p>
<figure data-type="image" tabindex="6"><img src="https://img-blog.csdnimg.cn/20210516192712715.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h1 id="4-并发编程的三个特性">4 并发编程的三个特性</h1>
<p>文章都看了大半了还没到<code>volatile</code>？别急别急，先来看看并发编程中的三个重要特性，这对正确理解<code>volatile</code>有很大的帮助。</p>
<h2 id="41-原子性">4.1 原子性</h2>
<p>原子性就是在一次或多次操作中：</p>
<ul>
<li>要么所有的操作全部都得到了执行，且不会受到任何因素的干扰而中断</li>
<li>要么所有的操作都不执行</li>
</ul>
<p>一个典型的例子就是两个人转账，比如A向B转账1000元，那么这包含两个基本的操作：</p>
<ul>
<li>A的账户扣除1000元</li>
<li>B的账户增加1000元</li>
</ul>
<p>这两个操作，要么都成功，要么都失败，也就是不能出现A账户扣除1000但是B账户金额不变的情况，也不能出现A账户金额不变B账户增加1000的情况。</p>
<p>需要注意的是两个原子性操作结合在一起未必是原子性的，比如<code>i++</code>。本质上来说，<code>i++</code>涉及到了三个操作：</p>
<ul>
<li><code>get i</code></li>
<li><code>i+1</code></li>
<li><code>set i</code></li>
</ul>
<p>这三个操作都是原子性的，但是组合在一起（<code>i++</code>）就不是原子性的。</p>
<h2 id="42-可见性">4.2 可见性</h2>
<p>另一个重要的特性是可见性，可见性是指，一个线程对共享变量进行了修改，那么另外的线程可以立即看到修改后的最新值。</p>
<p>一个简单的例子如下：</p>
<pre><code class="language-java">public class Main {
    private int x = 0;
    private static final int MAX = 100000;
    public static void main(String[] args) throws InterruptedException {
        Main m = new Main();
        Thread thread0 = new Thread(()-&gt;{
            while(m.x &lt; MAX) {
                ++m.x;
            }
        });

        Thread thread1 = new Thread(()-&gt;{
            while(m.x &lt; MAX){
            }
            System.out.println(&quot;finish&quot;);
        });

        thread1.start();
        TimeUnit.MILLISECONDS.sleep(1);
        thread0.start();
    }
}
</code></pre>
<p>线程<code>thread1</code>会一直运行，因为<code>thread1</code>把<code>x</code>读入工作内存后，会一直判断工作内存中的值，由于<code>thread0</code>改变的是<code>thread0</code>工作内存的值，并没有对<code>thread1</code>可见，因此永远也不会输出<code>finish</code>，使用<code>jstack</code>也可以看到结果：</p>
<figure data-type="image" tabindex="7"><img src="https://img-blog.csdnimg.cn/20210516121151277.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h2 id="43-有序性">4.3 有序性</h2>
<p>有序性是指代码在执行过程中的先后顺序，由于<code>JVM</code>的优化，导致了代码的编写顺序未必是代码的运行顺序，比如下面的四条语句：</p>
<pre><code class="language-java">int x = 10;
int y = 0;
x++;
y = 20;
</code></pre>
<p>有可能<code>y=20</code>在<code>x++</code>前执行，这就是指令重排序。一般来说，处理器为了提高程序的效率，可能会对输入的代码指令做一定的优化，不会严格按照编写顺序去执行代码，但可以保证最终运算结果是编码时的期望结果，当然，重排序也有一定的规则，需要严格遵守指令之间的数据依赖关系，并不是可以任意重排序，比如：</p>
<pre><code class="language-java">int x = 10;
int y = 0;
x++;
y = x+1;
</code></pre>
<p><code>y=x+1</code>就不能先优于<code>x++</code>执行。</p>
<p>在单线程下重排序不会导致预期值的改变，但在多线程下，如果有序性得不到保证，那么将可能出现很大的问题：</p>
<pre><code class="language-java">private boolean initialized = false;
private Context context;
public Context load(){
    if(!initialized){
        context = loadContext();
        initialized = true;
    }
    return context;
}
</code></pre>
<p>如果发生了重排序，<code>initialized=true</code>排序到了<code>context=loadContext()</code>的前面，假设两个线程A、B同时访问，且<code>loadContext()</code>需要一定耗时，那么：</p>
<ul>
<li>线程A通过判断后，先设置布尔变量的值为<code>true</code>，再进行<code>loadContext()</code>操作</li>
<li>线程B中由于布尔变量被设置为<code>true</code>，会直接返回一个未加载完成的<code>context</code></li>
</ul>
<h1 id="5-volatile">5 <code>volatile</code></h1>
<p>好了终于到了<code>volatile</code>了，前面说了这么多，目的就是为了能彻底理解和明白<code>volatile</code>。这部分分为四个小节：</p>
<ul>
<li><code>volatile</code>的语义</li>
<li>如何保证有序性以及可见性</li>
<li>实现原理</li>
<li>使用场景</li>
<li>与<code>synchronized</code>区别</li>
</ul>
<p>先来介绍一下<code>volatile</code>的语义。</p>
<h2 id="51-语义">5.1 语义</h2>
<p>被<code>volatile</code>修饰的实例变量或者类变量具有两层语义：</p>
<ul>
<li>保证了不同线程之间对共享变量操作时的可见性</li>
<li>禁止对指令进行重排序操作</li>
</ul>
<h2 id="52-如何保证可见性以及有序性">5.2 如何保证可见性以及有序性</h2>
<p>先说结论：</p>
<ul>
<li><code>volatile</code>能保证可见性</li>
<li><code>volatile</code>能保证有序性</li>
<li><code>volatile</code>不能保证原子性</li>
</ul>
<p>下面分别进行介绍。</p>
<h3 id="521-可见性">5.2.1 可见性</h3>
<p><code>Java</code>中保证可见性有如下方式：</p>
<ul>
<li><code>volatile</code>：当一个变量被<code>volatile</code>修饰时，对共享资源的读操作会直接在主内存中进行（准确来说也会读取到工作内存中，但是如果其他线程进行了修改就必须从主内存重新读取），写操作是先修改工作内存，但是修改结束后立即刷新到主内存中</li>
<li><code>synchronized</code>：<code>synchronized</code>一样能保证可见性，能够保证同一时刻只有一个线程获取到锁，然后执行同步方法，并且确保锁释放之前，变量的修改被刷新到主内存中</li>
<li>使用显式锁<code>Lock</code>：<code>Lock</code>的<code>lock</code>方法能保证同一时刻只有一个线程能够获取到锁然后执行同步方法，并且确保锁释放之前能够将对变量的修改刷新到主内存中</li>
</ul>
<p>具体来说，可以看一下之前的例子：</p>
<pre><code class="language-java">public class Main {
    private int x = 0;
    private static final int MAX = 100000;
    public static void main(String[] args) throws InterruptedException {
        Main m = new Main();
        Thread thread0 = new Thread(()-&gt;{
            while(m.x &lt; MAX) {
                ++m.x;
            }
        });

        Thread thread1 = new Thread(()-&gt;{
            while(m.x &lt; MAX){
            }
            System.out.println(&quot;finish&quot;);
        });

        thread1.start();
        TimeUnit.MILLISECONDS.sleep(1);
        thread0.start();
    }
}
</code></pre>
<p>上面说过这段代码会不断运行，一直没有输出，就是因为修改后的<code>x</code>对线程<code>thread1</code>不可见，如果在<code>x</code>的定义中加上了<code>volatile</code>，就不会出现没有输出的情况了，因为此时对<code>x</code>的修改是线程<code>thread1</code>可见的。</p>
<h3 id="522-有序性">5.2.2 有序性</h3>
<p><code>JMM</code>中允许编译器和处理器对指令进行重排序，在多线程的情况下有可能会出现问题，为此，<code>Java</code>同样提供了三种机制去保证有序性：</p>
<ul>
<li><code>volatile</code></li>
<li><code>synchronized</code></li>
<li>显式锁<code>Lock</code></li>
</ul>
<p>另外，关于有序性不得不提的就是<code>Happens-before</code>原则。<code>Happends-before</code>原则说的就是如果两个操作的执行次序无法从该原则推导出来，那么就无法保证有序性，<code>JVM</code>或处理器可以任意重排序。这么做的目的是为了尽可能提高程序的并行度，具体规则如下：</p>
<ul>
<li>程序次序规则：在一个线程内，代码按照编写时的次序执行，编写在后面的操作发生与编写在前面的操作之后</li>
<li>锁定规则：如果一个锁处于锁定状态，则<code>unlock</code>操作要先行发生于对同一个锁的<code>lock</code>操作</li>
<li><code>volatile</code>变量规则：对一个变量的写操作要早于对这个变量之后的读操作</li>
<li>传递规则：如果操作A先于操作B，操作B先于操作C，那么操作A先于操作C</li>
<li>线程启动规则：<code>Thread</code>对象的<code>start()</code>方法先行发生于对该线程的任何动作</li>
<li>线程中断规则：对线程执行<code>interrupt()</code>方法肯定要优于捕获到中断信号，换句话说，如果收到了中断信号，那么在此之前必定调用了<code>interrupt()</code></li>
<li>线程终结规则：线程中所有操作都要先行发生于线程的终止检测，也就是逻辑单元的执行肯定要发生于线程终止之前</li>
<li>对象终结规则：一个对象初始化的完成先行发生于<code>finalize()</code>之前</li>
</ul>
<p>对于<code>volatile</code>，会直接禁止对指令重排，但是对于<code>volatile</code>前后无依赖关系的指令可以随意重排，比如：</p>
<pre><code class="language-java">int x = 0;
int y = 1;
//private volatile int z;
z = 20;
x++;
y--;
</code></pre>
<p>在<code>z=20</code>之前，先定义<code>x</code>或先定义<code>y</code>并没有要求，只需要在执行<code>z=20</code>的时候，可以保证<code>x=0,y=1</code>即可，同理，<code>x++</code>或<code>y--</code>具体先执行哪一个并没有要求，只需要保证两者执行在<code>z=20</code>之后即可。</p>
<h3 id="523-原子性">5.2.3 原子性</h3>
<p>在<code>Java</code>中，所有对基本数据类型变量的读取赋值操作都是原子性的，对引用类型的变量读取和赋值也是原子性的，但是：</p>
<ul>
<li>将一个变量赋值给另一个变量的操作不是原子性的，因为涉及到了一个变量的读取以及一个变量的写入，两个原子性操作结合在一起就不是原子性操作</li>
<li>多个原子性操作在一起就不是原子性操作，比如<code>i++</code></li>
<li><code>JMM</code>只保证基本读取和赋值的原子性操作，其他的均不保证，如果需要具备原子性，那么可以使用<code>synchronized</code>或<code>Lock</code>，或者<code>JUC</code>包下的原子操作类</li>
</ul>
<p>也就是说，<code>volatile</code>并不能保证原子性，例子如下：</p>
<pre><code class="language-java">public class Main {
    private volatile int x = 0;
    private static final CountDownLatch latch = new CountDownLatch(10);

    public void inc() {
        ++x;
    }

    public static void main(String[] args) throws InterruptedException {
        Main m = new Main();
        IntStream.range(0, 10).forEach(i -&gt; {
            new Thread(() -&gt; {
                for (int j = 0; j &lt; 1000; j++) {
                    m.inc();
                }
                latch.countDown();
            }).start();
        });
        latch.await();
        System.out.println(m.x);
    }
}
</code></pre>
<p>最后输出的<code>x</code>的值会少于<code>10000</code>，而且每次运行的结果也并不相同，至于原因，可以从两个线程A、B开始分析，图示如下：</p>
<figure data-type="image" tabindex="8"><img src="https://img-blog.csdnimg.cn/202105161331204.png" alt="在这里插入图片描述" loading="lazy"></figure>
<ul>
<li><code>0-t1</code>：线程A将<code>x</code>读入工作内存，此时<code>x=0</code></li>
<li><code>t1-t2</code>：线程A时间片完，<code>CPU</code>调度线程B，线程B将<code>x</code>读入工作内存，此时<code>x=0</code></li>
<li><code>t2-t3</code>：线程B对工作内存中的<code>x</code>进行自增操作，并更新到工作内存中</li>
<li><code>t3-t4</code>：线程B时间片完，<code>CPU</code>调度线程A，同理线程A对工作内存中的<code>x</code>自增</li>
<li><code>t4-t5</code>：线程A将工作内存中的值写回主内存，此时主内存中的值为<code>x=1</code></li>
<li><code>t5</code>以后：线程A时间片完，<code>CPU</code>调度线程B，线程B也将自己的工作内存写回主内存，再次将主内存中的<code>x</code>赋值为1</li>
</ul>
<p>也就是说，多线程操作的话，会出现两次自增但是实际上只进行一次数值修改的操作。想要<code>x</code>的值变为<code>10000</code>也很简单，加上<code>synchronized</code>即可：</p>
<pre><code class="language-java">new Thread(() -&gt; {
    synchronized (m) {
        for (int j = 0; j &lt; 1000; j++) {
            m.inc();
        }
    }
    latch.countDown();
}).start();
</code></pre>
<h2 id="53-实现原理">5.3 实现原理</h2>
<p>前面已经知道，<code>volatile</code>可以保证有序性以及可见性，那么，具体是如何操作的呢？</p>
<p>答案就是一个<code>lock;</code>前缀，该前缀实际上相当于一个内存屏障，该内存屏障会为指令的执行提供如下几个保障：</p>
<ul>
<li>确保指令重排序时不会将其后面的代码排到内存屏障之前</li>
<li>确保指令重排序时不会将其前面的代码排到内存屏障之后</li>
<li>确保执行到内存屏障修饰的指令时前面的代码全部执行完成</li>
<li>强制将线程工作内存中的值修改刷新到主存中</li>
<li>如果是写操作，会导致其他线程工作内存中的缓存数据失效</li>
</ul>
<h2 id="54-使用场景">5.4 使用场景</h2>
<p>一个典型的使用场景是利用开关进行线程的关闭操作，例子如下：</p>
<pre><code class="language-java">public class ThreadTest extends Thread{
    private volatile boolean started = true;

    @Override
    public void run() {
        while (started){
            
        }
    }

    public void shutdown(){
        this.started = false;
    }
}
</code></pre>
<p>如果布尔变量没有被<code>volatile</code>修饰，那么很可能新的布尔值刷新不到主内存中，导致线程不会结束。</p>
<h2 id="55-与synchronized的区别">5.5 与<code>synchronized</code>的区别</h2>
<ul>
<li>使用上的区别：<code>volatile</code>只能用于修饰实例变量或者类变量，但是不能用于修饰方法、方法参数、局部变量等，另外可以修饰的变量为<code>null</code>。但<code>synchronized</code>不能用于对变量的修饰，只能修饰方法或语句块，而且<code>monitor</code>对象不能为<code>null</code></li>
<li>对原子性的保证：<code>volatile</code>无法保证原子性，但是<code>synchronized</code>可以保证</li>
<li>对可见性的保证：<code>volatile</code>与<code>synchronized</code>都能保证可见性，但是<code>synchronized</code>是借助于<code>JVM</code>指令<code>monitor enter</code>/<code>monitor exit</code>保证的，在<code>monitor exit</code>的时候所有共享资源都被刷新到主内存中，而<code>volatile</code>是通过<code>lock;</code>机器指令实现的，迫使其他线程工作内存失效，需要到主内存加载</li>
<li>对有序性的保证：<code>volatile</code>能够禁止<code>JVM</code>以及处理器对其进行重排序，而<code>synchronized</code>保证的有序性是通过程序串行化执行换来的，并且在<code>synchronized</code>代码块中的代码也会发生指令重排的情况</li>
<li>其他区别：<code>volatile</code>不会使线程陷入阻塞，但<code>synchronized</code>会</li>
</ul>

                </div>
                <div class="clear"></div>
              </section>
            </article>
            <div class="clear"></div>

            <section class="related section">
              
              <article class="prev grid-50 tablet-grid-50 grid-parent">
                <div class="thumb cover lazy loaded" style="background-image: url('https://2293736867.github.io/post-images/mei-ri-fen-xiang-di-337-qi.jpg');"></div>
                 <a href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-337-qi/" class="full-link"></a>
                 <div class="info">
                  <time datetime="2021-05-17">2021-05-17</time>
                  <h4 class="title white no-margin">每日分享 第337期</h4>
                </div>
                 <span class="epcl-button red">
                  <img src="https://2293736867.github.io/media/images/left-arrow.svg" width="15" alt="Left Arrow">
                </span>
                <div class="overlay"></div>
              </article>
              
              
              <article class="next grid-50 tablet-grid-50 grid-parent">
                <div class="thumb cover lazy loaded" style="background-image: url('https://2293736867.github.io/post-images/mei-ri-fen-xiang-di-336-qi.jpg');"></div>
                 <a href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-336-qi/" class="full-link"></a>
                 <div class="info">
                  <time datetime="2021-05-16">2021-05-16</time>
                  <h4 class="title white no-margin">每日分享 第336期</h4>
                </div>
                 <span class="epcl-button red">
                  <img src="https://2293736867.github.io/media/images/right-arrow.svg" width="15" alt="Left Arrow">
                </span>
                <div class="overlay"></div>
              </article>
              

                <div class="clear"></div>
            </section>

              <div class="clear"></div>
              
            
              <div id="comments" class="bg-white hosted ">
                
                
                  <!-- jsDelivr -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqusjs.css">
<script src="https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqus.js"></script>

<div id="disqus_thread"></div>
<div class="clear"></div>
<script>
var options = {
  shortname: '',
  apikey: 'x4w0ijIgKdycYEPacfY9sSDFNA7k57W2vEw65a3PRFFckEGUqw6zvedonEtd93DN',
}
if ('') {
  options.api = ''
}
var dsqjs = new DisqusJS(options)
</script>

                
              </div>
            

            </div>
          </div>
      </main>

          <footer id="footer" class="grid-container">
        <div class="widgets row gradient-effect">
            <div class="default-sidebar border-effect">
              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="tag_cloud-2" class="widget widget_epcl_posts_thumbs underline-effect">
                  <h4 class="widget-title title white bordered">最新文章</h4>
                  
                  
                  <article class="item post-0 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-399-qi/" class="thumb hover-effect">
                      <span class="fullimage cover" style="display:block;border-radius:50%;background-image: url('https://2293736867.github.io/post-images/mei-ri-fen-xiang-di-399-qi.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2021-07-19">2021-07-19</time>
                      <h4 class="title usmall">
                        <a href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-399-qi/">每日分享 第399期</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  <article class="item post-1 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-398-qi/" class="thumb hover-effect">
                      <span class="fullimage cover" style="display:block;border-radius:50%;background-image: url('https://2293736867.github.io/post-images/mei-ri-fen-xiang-di-398-qi.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2021-07-18">2021-07-18</time>
                      <h4 class="title usmall">
                        <a href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-398-qi/">每日分享 第398期</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  <article class="item post-2 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-397-qi/" class="thumb hover-effect">
                      <span class="fullimage cover" style="display:block;border-radius:50%;background-image: url('https://2293736867.github.io/post-images/mei-ri-fen-xiang-di-397-qi.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2021-07-17">2021-07-17</time>
                      <h4 class="title usmall">
                        <a href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-397-qi/">每日分享 第397期</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  <div class="clear"></div>
                </section>
              </div>

              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="tag_cloud-2" class="widget widget_tag_cloud underline-effect">
                  <h4 class="widget-title title white bordered">标签云</h4>
                  <div class="tagcloud">
                    
                      <a href="https://2293736867.github.io/tag/e5akU9EUb/" class="ctag ctag-0 ctag-e5akU9EUb" aria-label="">每日分享</a>
                    
                      <a href="https://2293736867.github.io/tag/4GGshmfd-/" class="ctag ctag-1 ctag-4GGshmfd-" aria-label="">读写分离</a>
                    
                      <a href="https://2293736867.github.io/tag/TbD3ANc6VD/" class="ctag ctag-2 ctag-TbD3ANc6VD" aria-label="">分库分表</a>
                    
                      <a href="https://2293736867.github.io/tag/wtWhBuKjD/" class="ctag ctag-3 ctag-wtWhBuKjD" aria-label="">ShardingSphere</a>
                    
                      <a href="https://2293736867.github.io/tag/HhAuEu6wC/" class="ctag ctag-4 ctag-HhAuEu6wC" aria-label="">Demo</a>
                    
                      <a href="https://2293736867.github.io/tag/jLOEqgo2m/" class="ctag ctag-5 ctag-jLOEqgo2m" aria-label="">Spring Boot</a>
                    
                      <a href="https://2293736867.github.io/tag/tvpVzFblK/" class="ctag ctag-6 ctag-tvpVzFblK" aria-label="">MyBatisPlus</a>
                    
                      <a href="https://2293736867.github.io/tag/1yONWl62G/" class="ctag ctag-7 ctag-1yONWl62G" aria-label="">binlog</a>
                    
                      <a href="https://2293736867.github.io/tag/r7Ub49QuQq/" class="ctag ctag-8 ctag-r7Ub49QuQq" aria-label="">主从复制</a>
                    
                      <a href="https://2293736867.github.io/tag/zMdXcdRde/" class="ctag ctag-9 ctag-zMdXcdRde" aria-label="">MySQL</a>
                    
                      <a href="https://2293736867.github.io/tag/wtA4qyubx/" class="ctag ctag-10 ctag-wtA4qyubx" aria-label="">Linux</a>
                    
                      <a href="https://2293736867.github.io/tag/honQAnetP/" class="ctag ctag-11 ctag-honQAnetP" aria-label="">SSH</a>
                    
                      <a href="https://2293736867.github.io/tag/-3_SBZaB7/" class="ctag ctag-12 ctag--3_SBZaB7" aria-label="">高并发</a>
                    
                      <a href="https://2293736867.github.io/tag/-AktfIpz8/" class="ctag ctag-13 ctag--AktfIpz8" aria-label="">Java</a>
                    
                      <a href="https://2293736867.github.io/tag/jRXlnJ0Cl/" class="ctag ctag-14 ctag-jRXlnJ0Cl" aria-label="">Gradle</a>
                    
                      <a href="https://2293736867.github.io/tag/MD4_3l9-E/" class="ctag ctag-15 ctag-MD4_3l9-E" aria-label="">Manjaro</a>
                    
                      <a href="https://2293736867.github.io/tag/hmN5f1Dgf/" class="ctag ctag-16 ctag-hmN5f1Dgf" aria-label="">JVM</a>
                    
                      <a href="https://2293736867.github.io/tag/iwdKt-vEi/" class="ctag ctag-17 ctag-iwdKt-vEi" aria-label="">Windows</a>
                    
                      <a href="https://2293736867.github.io/tag/P6coYUl8A/" class="ctag ctag-18 ctag-P6coYUl8A" aria-label="">软件测试</a>
                    
                      <a href="https://2293736867.github.io/tag/VVnjOjF_K/" class="ctag ctag-19 ctag-VVnjOjF_K" aria-label="">Vim</a>
                    
                      <a href="https://2293736867.github.io/tag/Zh36z1JpD/" class="ctag ctag-20 ctag-Zh36z1JpD" aria-label="">Switch</a>
                    
                      <a href="https://2293736867.github.io/tag/SqY3UeW8b/" class="ctag ctag-21 ctag-SqY3UeW8b" aria-label="">Github</a>
                    
                      <a href="https://2293736867.github.io/tag/QJqlomFg9/" class="ctag ctag-22 ctag-QJqlomFg9" aria-label="">Slf4j</a>
                    
                      <a href="https://2293736867.github.io/tag/kAbR5fhGrj/" class="ctag ctag-23 ctag-kAbR5fhGrj" aria-label="">Log</a>
                    
                      <a href="https://2293736867.github.io/tag/eB6hSy8EZ/" class="ctag ctag-24 ctag-eB6hSy8EZ" aria-label="">Kotlin</a>
                    
                      <a href="https://2293736867.github.io/tag/x6hezqu0h/" class="ctag ctag-25 ctag-x6hezqu0h" aria-label="">Github Pages</a>
                    
                      <a href="https://2293736867.github.io/tag/TSVR1gTbAW/" class="ctag ctag-26 ctag-TSVR1gTbAW" aria-label="">DisqusJS</a>
                    
                      <a href="https://2293736867.github.io/tag/KG_EpW3KL/" class="ctag ctag-27 ctag-KG_EpW3KL" aria-label="">Gridea</a>
                    
                      <a href="https://2293736867.github.io/tag/jEhLpTJ4y/" class="ctag ctag-28 ctag-jEhLpTJ4y" aria-label="">Kotlin DSL</a>
                    
                      <a href="https://2293736867.github.io/tag/j27TsowsQ/" class="ctag ctag-29 ctag-j27TsowsQ" aria-label="">SHA256</a>
                    
                      <a href="https://2293736867.github.io/tag/1bPjb7633/" class="ctag ctag-30 ctag-1bPjb7633" aria-label="">Redis</a>
                    
                      <a href="https://2293736867.github.io/tag/4z8YfVN_z/" class="ctag ctag-31 ctag-4z8YfVN_z" aria-label="">Docker</a>
                    
                      <a href="https://2293736867.github.io/tag/qkGQwVHv8/" class="ctag ctag-32 ctag-qkGQwVHv8" aria-label="">IDEA</a>
                    
                      <a href="https://2293736867.github.io/tag/k_kTITP45/" class="ctag ctag-33 ctag-k_kTITP45" aria-label="">WebStorm</a>
                    
                      <a href="https://2293736867.github.io/tag/OykyL0ueI/" class="ctag ctag-34 ctag-OykyL0ueI" aria-label="">Vue3</a>
                    
                      <a href="https://2293736867.github.io/tag/lAlW3LzZy/" class="ctag ctag-35 ctag-lAlW3LzZy" aria-label="">Vite</a>
                    
                      <a href="https://2293736867.github.io/tag/U8vH4mq52/" class="ctag ctag-36 ctag-U8vH4mq52" aria-label="">Chrome</a>
                    
                      <a href="https://2293736867.github.io/tag/3qNOu3uvC/" class="ctag ctag-37 ctag-3qNOu3uvC" aria-label="">pyenv</a>
                    
                      <a href="https://2293736867.github.io/tag/28CF6BHsq/" class="ctag ctag-38 ctag-28CF6BHsq" aria-label="">Python</a>
                    
                      <a href="https://2293736867.github.io/tag/beuZIsL3V/" class="ctag ctag-39 ctag-beuZIsL3V" aria-label="">VirtualBox</a>
                    
                      <a href="https://2293736867.github.io/tag/LfPbGAMCs/" class="ctag ctag-40 ctag-LfPbGAMCs" aria-label="">Java Web</a>
                    
                      <a href="https://2293736867.github.io/tag/vBuId7yVdn/" class="ctag ctag-41 ctag-vBuId7yVdn" aria-label="">Android</a>
                    
                      <a href="https://2293736867.github.io/tag/HaIBKIG-Y/" class="ctag ctag-42 ctag-HaIBKIG-Y" aria-label="">Debian</a>
                    
                      <a href="https://2293736867.github.io/tag/fFCOUCKJji/" class="ctag ctag-43 ctag-fFCOUCKJji" aria-label="">MyCLI</a>
                    
                      <a href="https://2293736867.github.io/tag/ODfvYwg3O/" class="ctag ctag-44 ctag-ODfvYwg3O" aria-label="">地图</a>
                    
                      <a href="https://2293736867.github.io/tag/YdNb8nB1n/" class="ctag ctag-45 ctag-YdNb8nB1n" aria-label="">Element-Plus</a>
                    
                      <a href="https://2293736867.github.io/tag/87dRXt1l_8/" class="ctag ctag-46 ctag-87dRXt1l_8" aria-label="">Echarts</a>
                    
                      <a href="https://2293736867.github.io/tag/TFZz0NHYM/" class="ctag ctag-47 ctag-TFZz0NHYM" aria-label="">Token</a>
                    
                      <a href="https://2293736867.github.io/tag/v6JZElgCrM/" class="ctag ctag-48 ctag-v6JZElgCrM" aria-label="">ECC</a>
                    
                      <a href="https://2293736867.github.io/tag/sYkFqGm0dQ/" class="ctag ctag-49 ctag-sYkFqGm0dQ" aria-label="">ECDSA</a>
                    
                      <a href="https://2293736867.github.io/tag/8dOYqqfXPD/" class="ctag ctag-50 ctag-8dOYqqfXPD" aria-label="">Auth0</a>
                    
                      <a href="https://2293736867.github.io/tag/bK7AXA8PC/" class="ctag ctag-51 ctag-bK7AXA8PC" aria-label="">Vue.js</a>
                    
                      <a href="https://2293736867.github.io/tag/NxCZbHQqot/" class="ctag ctag-52 ctag-NxCZbHQqot" aria-label="">Node.js</a>
                    
                      <a href="https://2293736867.github.io/tag/Nr-J-3R61V/" class="ctag ctag-53 ctag-Nr-J-3R61V" aria-label="">SHA</a>
                    
                      <a href="https://2293736867.github.io/tag/7QobdEpAB/" class="ctag ctag-54 ctag-7QobdEpAB" aria-label="">Git</a>
                    
                      <a href="https://2293736867.github.io/tag/lE7-ZBoCn/" class="ctag ctag-55 ctag-lE7-ZBoCn" aria-label="">MongoDB</a>
                    
                      <a href="https://2293736867.github.io/tag/jM1IwIS2X/" class="ctag ctag-56 ctag-jM1IwIS2X" aria-label="">Spring</a>
                    
                      <a href="https://2293736867.github.io/tag/mIpAXBTpr/" class="ctag ctag-57 ctag-mIpAXBTpr" aria-label="">虚拟机</a>
                    
                      <a href="https://2293736867.github.io/tag/PPNnoV579/" class="ctag ctag-58 ctag-PPNnoV579" aria-label="">CUDA</a>
                    
                      <a href="https://2293736867.github.io/tag/eGsE7XySYo/" class="ctag ctag-59 ctag-eGsE7XySYo" aria-label="">PyTorch</a>
                    
                      <a href="https://2293736867.github.io/tag/RoCvXhPfH/" class="ctag ctag-60 ctag-RoCvXhPfH" aria-label="">NTFS</a>
                    
                      <a href="https://2293736867.github.io/tag/SjeU3w4_d/" class="ctag ctag-61 ctag-SjeU3w4_d" aria-label="">BootstrapVue</a>
                    
                      <a href="https://2293736867.github.io/tag/94FcDb__B/" class="ctag ctag-62 ctag-94FcDb__B" aria-label="">Vue</a>
                    
                      <a href="https://2293736867.github.io/tag/j4BuDeUjQ/" class="ctag ctag-63 ctag-j4BuDeUjQ" aria-label="">MyBaits</a>
                    
                      <a href="https://2293736867.github.io/tag/FaFerPQym/" class="ctag ctag-64 ctag-FaFerPQym" aria-label="">终端美化</a>
                    
                      <a href="https://2293736867.github.io/tag/vMaxTlWsr/" class="ctag ctag-65 ctag-vMaxTlWsr" aria-label="">Nvidia</a>
                    
                      <a href="https://2293736867.github.io/tag/4fbWA3FjM/" class="ctag ctag-66 ctag-4fbWA3FjM" aria-label="">Matlab</a>
                    
                      <a href="https://2293736867.github.io/tag/BC-AL9W6w/" class="ctag ctag-67 ctag-BC-AL9W6w" aria-label="">Oracle</a>
                    
                      <a href="https://2293736867.github.io/tag/U_PXoCTJu/" class="ctag ctag-68 ctag-U_PXoCTJu" aria-label="">JDBCTemplate</a>
                    
                      <a href="https://2293736867.github.io/tag/tpJlWuxg-t/" class="ctag ctag-69 ctag-tpJlWuxg-t" aria-label="">HTTPS</a>
                    
                      <a href="https://2293736867.github.io/tag/R1SdHxPlR/" class="ctag ctag-70 ctag-R1SdHxPlR" aria-label="">Maven</a>
                    
                      <a href="https://2293736867.github.io/tag/i2hWOKTzb/" class="ctag ctag-71 ctag-i2hWOKTzb" aria-label="">七夕快乐</a>
                    
                      <a href="https://2293736867.github.io/tag/lhG453lfc/" class="ctag ctag-72 ctag-lhG453lfc" aria-label="">JetBrains</a>
                    
                      <a href="https://2293736867.github.io/tag/6gn0AkH2Q/" class="ctag ctag-73 ctag-6gn0AkH2Q" aria-label="">Hadoop</a>
                    
                      <a href="https://2293736867.github.io/tag/iPJJVQ6jY/" class="ctag ctag-74 ctag-iPJJVQ6jY" aria-label="">CentOS</a>
                    
                      <a href="https://2293736867.github.io/tag/iihFN8FL0/" class="ctag ctag-75 ctag-iihFN8FL0" aria-label="">Jupyter</a>
                    
                      <a href="https://2293736867.github.io/tag/Q0QnSl8as/" class="ctag ctag-76 ctag-Q0QnSl8as" aria-label="">设计模式</a>
                    
                      <a href="https://2293736867.github.io/tag/YMPVdyUgq/" class="ctag ctag-77 ctag-YMPVdyUgq" aria-label="">Capslock+</a>
                    
                      <a href="https://2293736867.github.io/tag/wz4wl2haW/" class="ctag ctag-78 ctag-wz4wl2haW" aria-label="">激活</a>
                    
                      <a href="https://2293736867.github.io/tag/WbQ1chYU2I/" class="ctag ctag-79 ctag-WbQ1chYU2I" aria-label="">Hello World</a>
                    
                      <a href="https://2293736867.github.io/tag/Zp8szr4lB/" class="ctag ctag-80 ctag-Zp8szr4lB" aria-label="">Jar</a>
                    
                      <a href="https://2293736867.github.io/tag/yCD9r2xgw/" class="ctag ctag-81 ctag-yCD9r2xgw" aria-label="">HTTP Client</a>
                    
                      <a href="https://2293736867.github.io/tag/bF2mL6IvE/" class="ctag ctag-82 ctag-bF2mL6IvE" aria-label="">HTTP/2</a>
                    
                      <a href="https://2293736867.github.io/tag/orx4wZc0f/" class="ctag ctag-83 ctag-orx4wZc0f" aria-label="">Tomcat</a>
                    
                      <a href="https://2293736867.github.io/tag/AdS9f37e0/" class="ctag ctag-84 ctag-AdS9f37e0" aria-label="">注孤生</a>
                    
                      <a href="https://2293736867.github.io/tag/j0fdg3Cut/" class="ctag ctag-85 ctag-j0fdg3Cut" aria-label="">JFX</a>
                    
                      <a href="https://2293736867.github.io/tag/o5hKqf9Ap/" class="ctag ctag-86 ctag-o5hKqf9Ap" aria-label="">Music</a>
                    
                      <a href="https://2293736867.github.io/tag/bFNak4fnm/" class="ctag ctag-87 ctag-bFNak4fnm" aria-label="">OkHttp</a>
                    
                      <a href="https://2293736867.github.io/tag/LO227Db0V/" class="ctag ctag-88 ctag-LO227Db0V" aria-label="">Powerlevel10K</a>
                    
                      <a href="https://2293736867.github.io/tag/hsNVKS9Qq/" class="ctag ctag-89 ctag-hsNVKS9Qq" aria-label="">Compress</a>
                    
                      <a href="https://2293736867.github.io/tag/dvWKgSydX/" class="ctag ctag-90 ctag-dvWKgSydX" aria-label="">unzip</a>
                    
                      <a href="https://2293736867.github.io/tag/l6qOxzmkS/" class="ctag ctag-91 ctag-l6qOxzmkS" aria-label="">TP6</a>
                    
                      <a href="https://2293736867.github.io/tag/t_WSDKPh7/" class="ctag ctag-92 ctag-t_WSDKPh7" aria-label="">PHP</a>
                    
                      <a href="https://2293736867.github.io/tag/OBGyotm1E9/" class="ctag ctag-93 ctag-OBGyotm1E9" aria-label="">JRebel</a>
                    
                      <a href="https://2293736867.github.io/tag/aicrp5v2D/" class="ctag ctag-94 ctag-aicrp5v2D" aria-label="">个人博客</a>
                    
                      <a href="https://2293736867.github.io/tag/ECj8IAI_Y/" class="ctag ctag-95 ctag-ECj8IAI_Y" aria-label="">Zend Studio</a>
                    
                      <a href="https://2293736867.github.io/tag/-g6dgYxeO/" class="ctag ctag-96 ctag--g6dgYxeO" aria-label="">Apache</a>
                    
                      <a href="https://2293736867.github.io/tag/ErQ7EACbc/" class="ctag ctag-97 ctag-ErQ7EACbc" aria-label="">SSL</a>
                    
                      <a href="https://2293736867.github.io/tag/eT8Xr7OEa/" class="ctag ctag-98 ctag-eT8Xr7OEa" aria-label="">SCP</a>
                    
                      <a href="https://2293736867.github.io/tag/EpuvEnzD6/" class="ctag ctag-99 ctag-EpuvEnzD6" aria-label="">Nginx</a>
                    
                      <a href="https://2293736867.github.io/tag/qR5NhsqP6K/" class="ctag ctag-100 ctag-qR5NhsqP6K" aria-label="">acme.sh</a>
                    
                      <a href="https://2293736867.github.io/tag/wfF83Rkm0/" class="ctag ctag-101 ctag-wfF83Rkm0" aria-label="">jQuery</a>
                    
                      <a href="https://2293736867.github.io/tag/iNele6Dhd/" class="ctag ctag-102 ctag-iNele6Dhd" aria-label="">Android Studio</a>
                    
                      <a href="https://2293736867.github.io/tag/TwsilcwD0/" class="ctag ctag-103 ctag-TwsilcwD0" aria-label="">CMake</a>
                    
                      <a href="https://2293736867.github.io/tag/GGPqmyDEU/" class="ctag ctag-104 ctag-GGPqmyDEU" aria-label="">GCC</a>
                    
                      <a href="https://2293736867.github.io/tag/Cy8VujzGx/" class="ctag ctag-105 ctag-Cy8VujzGx" aria-label="">PyCharm</a>
                    
                      <a href="https://2293736867.github.io/tag/LwvWGj4Ip/" class="ctag ctag-106 ctag-LwvWGj4Ip" aria-label="">熵权可拓物元模型</a>
                    
                      <a href="https://2293736867.github.io/tag/DZ5E1trvJ/" class="ctag ctag-107 ctag-DZ5E1trvJ" aria-label="">AC</a>
                    
                      <a href="https://2293736867.github.io/tag/sHFJEY1cE/" class="ctag ctag-108 ctag-sHFJEY1cE" aria-label="">正则表达式</a>
                    
                      <a href="https://2293736867.github.io/tag/V7ARPGm-S/" class="ctag ctag-109 ctag-V7ARPGm-S" aria-label="">Grub</a>
                    
                      <a href="https://2293736867.github.io/tag/OQzDJDrvg/" class="ctag ctag-110 ctag-OQzDJDrvg" aria-label="">软件工程</a>
                    
                      <a href="https://2293736867.github.io/tag/AdtivoET7/" class="ctag ctag-111 ctag-AdtivoET7" aria-label="">Tools</a>
                    
                      <a href="https://2293736867.github.io/tag/XYwHTUWyVk/" class="ctag ctag-112 ctag-XYwHTUWyVk" aria-label="">Web</a>
                    
                      <a href="https://2293736867.github.io/tag/kQfuG5TKhu/" class="ctag ctag-113 ctag-kQfuG5TKhu" aria-label="">FTP</a>
                    
                      <a href="https://2293736867.github.io/tag/Vx2vpr_C7/" class="ctag ctag-114 ctag-Vx2vpr_C7" aria-label="">Gson</a>
                    
                      <a href="https://2293736867.github.io/tag/nGstKfTrf/" class="ctag ctag-115 ctag-nGstKfTrf" aria-label="">UDP</a>
                    
                      <a href="https://2293736867.github.io/tag/tWrsXRojT/" class="ctag ctag-116 ctag-tWrsXRojT" aria-label="">TCP</a>
                    
                      <a href="https://2293736867.github.io/tag/JoO79KeOi/" class="ctag ctag-117 ctag-JoO79KeOi" aria-label="">Swing</a>
                    
                      <a href="https://2293736867.github.io/tag/ghe87GgWJ5/" class="ctag ctag-118 ctag-ghe87GgWJ5" aria-label="">Spring Data JPA</a>
                    
                      <a href="https://2293736867.github.io/tag/TrLCkYWTX/" class="ctag ctag-119 ctag-TrLCkYWTX" aria-label="">JDBC</a>
                    
                      <a href="https://2293736867.github.io/tag/94BG00D7hD/" class="ctag ctag-120 ctag-94BG00D7hD" aria-label="">C3P0</a>
                    
                      <a href="https://2293736867.github.io/tag/iZ_eZyYBHd/" class="ctag ctag-121 ctag-iZ_eZyYBHd" aria-label="">DBCP</a>
                    
                      <a href="https://2293736867.github.io/tag/FbxLgkEJb/" class="ctag ctag-122 ctag-FbxLgkEJb" aria-label="">Qt</a>
                    
                      <a href="https://2293736867.github.io/tag/ZccDmc7QXC/" class="ctag ctag-123 ctag-ZccDmc7QXC" aria-label="">C++</a>
                    
                      <a href="https://2293736867.github.io/tag/6rtV8THYT/" class="ctag ctag-124 ctag-6rtV8THYT" aria-label="">Log4j2</a>
                    
                      <a href="https://2293736867.github.io/tag/8EbOHbvZf/" class="ctag ctag-125 ctag-8EbOHbvZf" aria-label="">about</a>
                    
                  </div>
                  <div class="clear"></div>
                </section>
              </div>

              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="epcl_about-2" class="widget widget_epcl_about underline-effect">
                  <h4 class="widget-title title white bordered">关于我</h4>
                  <div class="avatar">
                    <a href="" class="translate-effect thumb"><span class="fullimage cover" style="background-image: url(https://2293736867.github.io/images/avatar.png);"></span></a>
                  </div>
                  <div class="info">
                    <h4 class="title small author-name gradient-effect no-margin"><a href="">氷泠&#39;s blog</a></h4>
                    <p class="founder">几百遍，重复了几百遍
重复的情绪重复的熬过想你的夜</p>
                    <div class="social">
                      
                          
                            <a href="https://github.com/2293736867" class="translate-effect" target="_blank"><i class="fa fa-github"></i></a>
                        
                      
                        
                      
                        
                      
                        
                      
                        
                      
                    </div> 
                  </div>
                  <div class="clear"></div>
                  </section>
              </div>

            </div>
            <div class="clear"></div>
        </div>

        <div class="logo">
          <a href="https://2293736867.github.io"><img src="/media/images/custom-footerLogo.png" alt=""></a>
        </div>
        <p class="published border-effect">
          ©2019 共 681 篇文章
          <br/>
          Theme <a href="https://gridea.dev/" target="_blank">「breek」</a> Powered by <a href="https://gridea.dev/" target="_blank">「Gridea」</a>
        </p>
        
        <a href="javascript:void(0)" id="back-to-top" class="epcl-button dark" style="display:none">
          <i class="fa fa-arrow"></i>
        </a>
    </footer>
    
    <div class="clear"></div>

        
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"></script>
<script type="text/javascript" src="https://cdn.staticfile.org/valine/1.3.10/Valine.Pure.min.js"></script>
<script>
    new Valine({
        el: '#comments',
        appId: 'bB7Cg2lXd41aulCOwaP57TCl-gzGzoHsz' ,
        appKey: 'JbjT1r2X8OAL2m2kxGBCs6oD',
        pageSize: 30,
        placeholder: '既然来了，那就留个痕迹吧~',
        visitor: true // 阅读量统计
    })
</script>
    

      
    <script src="https://2293736867.github.io/media/js/functions-post.js"></script>

    </div>
    <!-- end: #wrapper -->
  </body>
</html>
