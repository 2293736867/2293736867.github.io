
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>每天AC系列(十二):K个一组翻转链表 | 氷泠&#39;s blog</title>
<meta name="description" content="我配不上你，
纵然很努力。">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://2293736867.github.io/favicon.ico?v=1615370942909">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://2293736867.github.io/styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://2293736867.github.io">
        <img class="avatar" src="https://2293736867.github.io/images/avatar.png?v=1615370942909" alt="" width="32px" height="32px">
      </a>
      <a href="https://2293736867.github.io">
        <h1 class="site-title">氷泠&#39;s blog</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="/archives" class="menu purple-link">
            归档
          </a>
        
      
        
          <a href="/post/about" class="menu purple-link">
            关于
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
            <div class="feature-container" style="background-image: url('https://2293736867.github.io/post-images/mei-tian-ac-xi-lie-shi-er-k-ge-yi-zu-fan-zhuan-lian-biao.png')">
            </div>
          
          <h2 class="post-title">每天AC系列(十二):K个一组翻转链表</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2020-06-03</span>
            
              <span>
                <i class="icon-pricetags-outline"></i>
                
                  <a href="https://2293736867.github.io/tag/DZ5E1trvJ/">
                    AC
                    
                  </a>
                
              </span>
            
          </div>
          <div class="post-content">
            <h1 id="1-题目">1 题目</h1>
<p><a href="https://leetcode-cn.com/problems/reverse-nodes-in-k-group/">LeetCode第25题</a>,每K个节点一组进行翻转,剩下不足K个的保留原状.<br>
<img src="https://img-blog.csdnimg.cn/20200202174216899.png" alt="在这里插入图片描述" loading="lazy"></p>
<h1 id="2-直接翻转">2 直接翻转</h1>
<p>将链表分成三部分，已翻转，待翻转，未翻转三部分：<br>
<img src="https://img-blog.csdnimg.cn/20200204110044528.png" alt="在这里插入图片描述" loading="lazy"><br>
首先，用一个指针t表示要插入的位置的前驱，一边把head移动k遍，一边插入在t后面（下图假设k=3）：<br>
<img src="https://img-blog.csdnimg.cn/20200204204144493.png" alt="在这里插入图片描述" loading="lazy"></p>
<pre><code class="language-java">int i=0;
for(;i&lt;k &amp;&amp; head != null;++i)
{
    temp = head.next;
    head.next = t.next;
    t.next = head;
    head = temp;
}
</code></pre>
<p>直接插在t的后面，一轮循环之后，移动t与head.<br>
<img src="https://img-blog.csdnimg.cn/20200204204413436.png" alt="在这里插入图片描述" loading="lazy">t的新位置为未插入head之前的head的位置，因此在插入之前把head的位置保存下来，直接使t移动到该位置，head的位置为自然移动到的位置，不需改变。</p>
<pre><code class="language-java">ListNode nextTPosition = head;
ListNode temp;
int i=0;
for(;i&lt;k &amp;&amp; head != null;++i)
{
    temp = head.next;
   	head.next = t.next;
   	t.next = head;
   	head = temp;
}
if(i == k)
   	t = nextTPosition;
</code></pre>
<p>接着再翻转，到达7后，7不需要翻转，因为剩下的节点数不足：<br>
<img src="https://img-blog.csdnimg.cn/2020020420554951.png" alt="在这里插入图片描述" loading="lazy"><br>
这时就需要i发挥作用了，i表示已翻转的节点的值，因为只是一次遍历，每遍历k次便翻转k次，若i小于k，由于已经翻转了剩下的i个节点，因此需要再将这剩下的i个节点翻转一次：</p>
<pre><code class="language-java">if(i == k)
	t = nextTPosition;
else
{
    for(head = t.next,t.next=null;head!=null;)
    {
        temp = head.next;
        head.next = t.next;
        t.next = head;
        head = temp;
    }
    break;
}
</code></pre>
<p>对剩下的i个节点再次翻转时，不需要修改t的位置，使head指向t.next，再把t.next置为null，因为此时t为</p>
<pre><code class="language-java">4-&gt;7
</code></pre>
<p>若不把t.next置为null，在</p>
<pre><code class="language-java">head.next = t.next
</code></pre>
<p>这一步会使head.next指向错误的t.next，导致会在最后一个节点不断循环。<br>
翻转最后的i个节点后，跳出循环，返回结果。<br>
<img src="https://img-blog.csdnimg.cn/20200204203625792.png" alt="在这里插入图片描述" loading="lazy"></p>
<h1 id="3-递归">3 递归</h1>
<p>递归的话思路也类似，遍历k次，翻转k个，若还有需要翻转的节点，递归翻转，若没有，翻转剩下的i个节点。</p>
<pre><code class="language-java">if(i == k)
    t.next = reverse(head,k);
</code></pre>
<p>大部分代码与循环相同就不贴了，最大的不同是这里，这里的t为原来未遍历前的head，因为改成递归后，不需要使用t作为移动的指针指示插入的位置，t.next就相当于翻转后的最后一个节点，把递归的结果插入到这个节点的后面。<br>
<img src="https://img-blog.csdnimg.cn/20200204211521407.png" alt="在这里插入图片描述" loading="lazy"></p>
<h1 id="4-使用额外空间-栈">4 使用额外空间--栈</h1>
<p>因为题目规定只能使用常数的额外空间，因此应该只有这两种方法了，但是，如果允许使用额外的空间，可以使用栈优化直接翻转的算法。</p>
<p>因为出栈的次序正是翻转的顺序，每遍历k个节点就压栈k个节点，若剩余不足k个节点，把head连上dummy，若还有多余的节点或者刚好遍历完，把出栈的节点依次连上主链。</p>
<pre><code class="language-java">while(true)
{
	Stack&lt;ListNode&gt; s = new Stack&lt;&gt;();
	ListNode temp = head;
	int i=0;
	for(;i&lt;k &amp;&amp; head != null;++i)
	{
	    s.add(new ListNode(head.val));
	    head = head.next;
	}
	if(i == k)
	{
	    for(i=0;i&lt;k;++i)
	    {
	        t.next = s.pop();
	        t = t.next;
	    }
	}
	else if(head == null)
	{
	    t.next = temp;
	    break;
	}
}
</code></pre>
<p>其中for循环为遍历压栈，i==k判断是否翻转链表。</p>
<h1 id="5-源码">5 源码</h1>
<p><a href="https://github.com/2293736867/ACEveryDay/tree/master/Day12">github</a></p>
<p><a href="https://gitee.com/imykr/ACEveryDay/tree/master/Day12">码云</a></p>

          </div>
        </div>

        
          <div class="next-post">
            <a class="purple-link" href="https://2293736867.github.io/post/mei-tian-ac-xi-lie-shi-yi-shan-chu-pai-xu-shu-zu-zhong-de-chong-fu-xiang/">
              <h3 class="post-title">
                下一篇：每天AC系列(十一):删除排序数组中的重复项
              </h3>
            </a>
          </div>
          
      </div>

      
        
          <div id="gitalk-container"></div>
        

        
      

      <div class="site-footer">
  <div class="slogan">我配不上你，
纵然很努力。</div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://2293736867.github.io/atom.xml" target="_blank">RSS</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>



  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '477bf133e6f4f92e3d3d',
        clientSecret: 'c917fc4292d22d69e98b9521ac1e6fca627fe54c',
        repo: '2293736867.github.io',
        owner: '2293736867',
        admin: ['2293736867'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
