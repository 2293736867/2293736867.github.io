
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>Nginx/Apache + acme.sh 实现https访问 | 氷泠&#39;s blog</title>
<meta name="description" content="我配不上你，
纵然很努力。">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://2293736867.github.io/favicon.ico?v=1615370942909">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://2293736867.github.io/styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://2293736867.github.io">
        <img class="avatar" src="https://2293736867.github.io/images/avatar.png?v=1615370942909" alt="" width="32px" height="32px">
      </a>
      <a href="https://2293736867.github.io">
        <h1 class="site-title">氷泠&#39;s blog</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="/archives" class="menu purple-link">
            归档
          </a>
        
      
        
          <a href="/post/about" class="menu purple-link">
            关于
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
            <div class="feature-container" style="background-image: url('/post-images/nginxapache-acmesh-shi-xian-https-fang-wen.jpeg')">
            </div>
          
          <h2 class="post-title">Nginx/Apache + acme.sh 实现https访问</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2020-06-03</span>
            
              <span>
                <i class="icon-pricetags-outline"></i>
                
                  <a href="https://2293736867.github.io/tag/EpuvEnzD6/">
                    Nginx
                    
                      ，
                    
                  </a>
                
                  <a href="https://2293736867.github.io/tag/tpJlWuxg-t/">
                    HTTPS
                    
                      ，
                    
                  </a>
                
                  <a href="https://2293736867.github.io/tag/qR5NhsqP6K/">
                    acme.sh
                    
                      ，
                    
                  </a>
                
                  <a href="https://2293736867.github.io/tag/-g6dgYxeO/">
                    Apache
                    
                  </a>
                
              </span>
            
          </div>
          <div class="post-content">
            <p><ul class="markdownIt-TOC">
<li><a href="#1-%E6%A6%82%E8%BF%B0">1 概述</a></li>
<li><a href="#2-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">2 准备工作</a>
<ul>
<li><a href="#21-%E5%9F%9F%E5%90%8D%E4%B8%8E%E6%9C%8D%E5%8A%A1%E5%99%A8">2.1 域名与服务器</a></li>
<li><a href="#22-%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90">2.2 域名解析</a></li>
<li><a href="#22-%E7%AB%AF%E5%8F%A3">2.2 端口</a></li>
</ul>
</li>
<li><a href="#3-nginx">3 Nginx</a>
<ul>
<li><a href="#31-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E7%9A%84nginx1179">3.1 编译安装的Nginx(1.17.9)</a>
<ul>
<li><a href="#311-%E5%AE%89%E8%A3%85nginx">3.1.1 安装Nginx</a></li>
<li><a href="#312-%E8%AF%81%E4%B9%A6%E5%A4%84%E7%90%86">3.1.2 证书处理</a></li>
<li><a href="#313-nginx%E9%85%8D%E7%BD%AE">3.1.3 Nginx配置</a></li>
<li><a href="#314-%E6%B5%8B%E8%AF%95">3.1.4 测试</a></li>
</ul>
</li>
<li><a href="#32-%E4%BB%8E%E4%BB%93%E5%BA%93%E5%AE%89%E8%A3%85nginx1161">3.2 从仓库安装Nginx(1.16.1)</a>
<ul>
<li><a href="#321-%E5%AE%89%E8%A3%85nginx">3.2.1 安装Nginx</a></li>
<li><a href="#322-%E8%AF%81%E4%B9%A6%E5%A4%84%E7%90%86">3.2.2 证书处理</a></li>
<li><a href="#323-nginx%E9%85%8D%E7%BD%AE">3.2.3 Nginx配置</a></li>
<li><a href="#324-%E6%B5%8B%E8%AF%95">3.2.4 测试</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#4-apache">4 Apache</a>
<ul>
<li><a href="#41-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85%E7%9A%84apache2441">4.1 编译安装的Apache(2.4.41)</a>
<ul>
<li><a href="#411-%E5%AE%89%E8%A3%85apache">4.1.1 安装Apache</a></li>
<li><a href="#412-%E8%AF%81%E4%B9%A6%E5%A4%84%E7%90%86">4.1.2 证书处理</a></li>
<li><a href="#413-apache%E9%85%8D%E7%BD%AE">4.1.3 Apache配置</a></li>
<li><a href="#414-%E6%B5%8B%E8%AF%95">4.1.4 测试</a></li>
</ul>
</li>
<li><a href="#42-%E4%BB%8E%E4%BB%93%E5%BA%93%E5%AE%89%E8%A3%85%E7%9A%84apache246">4.2 从仓库安装的Apache(2.4.6)</a>
<ul>
<li><a href="#421-%E5%AE%89%E8%A3%85apache">4.2.1 安装Apache</a></li>
<li><a href="#422-%E8%AF%81%E4%B9%A6%E5%A4%84%E7%90%86">4.2.2 证书处理</a></li>
<li><a href="#423-apache%E9%85%8D%E7%BD%AE">4.2.3 Apache配置</a></li>
<li><a href="#424-%E6%B5%8B%E8%AF%95">4.2.4 测试</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#5-%E6%80%BB%E7%BB%93">5 总结</a></li>
</ul>
</p>
<h1 id="1-概述">1 概述</h1>
<p>acme.sh实现了acme协议，可以从Let‘s Encrypt生成免费的ssl证书用于实现https，本文介绍了常见的两种服务器Apache与Nginx上利用acme.sh配置https服务。<br>
约定:</p>
<pre><code class="language-bash">APACHE_INSTALL_DIR  ---   Apache安装目录
NGINX_INSTALL_DIR   ---   Nginx安装目录
www.test.com        ---   测试域名,请按需要换成自己的域名
</code></pre>
<h1 id="2-准备工作">2 准备工作</h1>
<ul>
<li>一个域名</li>
<li>一台云服务器</li>
</ul>
<h2 id="21-域名与服务器">2.1 域名与服务器</h2>
<p>域名与服务器直接买就好了，笔者的都是在阿里云上买的。</p>
<h2 id="22-域名解析">2.2 域名解析</h2>
<p>需要确保域名可以解析到对应的ip上面，一般的域名购买商会提供解析服务，按图形界面操作即可，以阿里云为例，选择域名进行解析：<br>
<img src="https://img-blog.csdnimg.cn/20200317005748607.png" alt="在这里插入图片描述" loading="lazy"><br>
主机记录填www，记录值填服务器公网ip.<br>
<img src="https://img-blog.csdnimg.cn/20200317005817155.png" alt="在这里插入图片描述" loading="lazy"><br>
间隔十分钟左右可以ping一下自己的域名，如果显示服务器ip则解析成功。</p>
<h2 id="22-端口">2.2 端口</h2>
<p>服务器要开启80与443端口，80用于HTTP测试，443用于HTTPS访问。以阿里云为例:<br>
<img src="https://img-blog.csdnimg.cn/20200317135937646.png" alt="在这里插入图片描述" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/20200317140139818.png" alt="在这里插入图片描述" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/20200317140205495.png" alt="在这里插入图片描述" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/20200317140231194.png" alt="在这里插入图片描述" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/20200317140246326.png" alt="在这里插入图片描述" loading="lazy"></p>
<h1 id="3-nginx">3 Nginx</h1>
<p>Nginx有两种安装方式，一种是仓库形式安装，另一种是从源码编译安装。</p>
<h2 id="31-编译安装的nginx1179">3.1 编译安装的Nginx(1.17.9)</h2>
<h3 id="311-安装nginx">3.1.1 安装Nginx</h3>
<p>先去<a href="http://nginx.org/en/download.html">下载源码</a>，上传到服务器，解压：</p>
<pre><code class="language-bash">tar -zxvf nginx-1.17.9.tar.gz
cd nginx-1.17.9
</code></pre>
<p>可以先使用</p>
<pre><code class="language-bash">./configure --help
</code></pre>
<p>查看选项帮助，这里要注意一下pcre与openssl，是源码目录，不是安装目录，安装之后删了源码的，重新来<a href="https://sourceforge.net/projects/pcre/">这里下载pcre</a>与<a href="https://www.openssl.org/source/">这里下载openssl</a>，注意一定需要http_ssl_module这个模块，不要漏了。</p>
<pre><code class="language-bash">./configure --prefix=/xxxxx --with-pcre=/xxxxx --with-openssl=/xxxx --with-http_ssl_module
make
sudo make install
</code></pre>
<p>好了之后进入安装目录下的sbin，启动服务。</p>
<pre><code class="language-bash">cd NGINX_INSTALL_DIR/sin
./nginx
</code></pre>
<p>然后可以在浏览器输入服务器公网ip测试一下：<br>
<img src="https://img-blog.csdnimg.cn/20200317004956936.png" alt="在这里插入图片描述" loading="lazy"></p>
<h3 id="312-证书处理">3.1.2 证书处理</h3>
<p>首先安装acme.sh</p>
<pre><code class="language-bash">curl https://get.acme.sh | sh
. ~/.bashrc
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200317005319462.png" alt="在这里插入图片描述" loading="lazy"><br>
生成证书</p>
<pre><code class="language-bash">acme.sh --issue -d www.test.com --webroot NGINX_INSTALL_DIR/html
</code></pre>
<p>webroot的话就直接使用Nginx的默认文档根目录。好了之后会看到这样的提示：<br>
<img src="https://img-blog.csdnimg.cn/20200317010637741.png" alt="在这里插入图片描述" loading="lazy"><br>
接着安装证书：</p>
<pre><code class="language-bash">acme.sh --installcert \
-d www.test.com \
--keypath /xxxx/xxx.key \
--fullchainpath /xxx/xxx.pem
</code></pre>
<p>路径与名字随便，后缀不能变。<br>
<img src="https://img-blog.csdnimg.cn/2020031701091843.png" alt="在这里插入图片描述" loading="lazy"></p>
<h3 id="313-nginx配置">3.1.3 Nginx配置</h3>
<p>修改Nginx配置文件：</p>
<pre><code class="language-bash">cd NGINX_INSTALL_DIR/conf
cp nginx.conf nginx.conf.bak
vim nginx.conf
</code></pre>
<p>找到HTTPS server这一行，这里是96行，把从server开始到最后一个花括号的代码全部去掉注释。<br>
<img src="https://img-blog.csdnimg.cn/20200317011257305.png" alt="在这里插入图片描述" loading="lazy"><br>
然后修改这三行，server_name填域名，ssl_certificate填刚才的pem文件路径，ssl_certificate_key填刚才的key文件路径。路径建议绝对路径，可以不加双引号。<br>
<img src="https://img-blog.csdnimg.cn/20200317011502176.png" alt="在这里插入图片描述" loading="lazy"><br>
记得记得要加上一行ssl协议：<br>
<img src="https://img-blog.csdnimg.cn/20200317014031227.png" alt="在这里插入图片描述" loading="lazy"></p>
<h3 id="314-测试">3.1.4 测试</h3>
<p>可以先使用-t测试语法错误：</p>
<pre><code class="language-bash">cd NGINX_INSTALL_DIR/sbin
./nginx -t
</code></pre>
<p>ok的话，重启服务并输入域名测试：</p>
<pre><code class="language-bash">cd NGINX_INSTALL_DIR/sbin
./nginx -s stop
./nginx
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200317014120675.png" alt="在这里插入图片描述" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/2020031701405932.png" alt="在这里插入图片描述" loading="lazy"><br>
成功！</p>
<h2 id="32-从仓库安装nginx1161">3.2 从仓库安装Nginx(1.16.1)</h2>
<h3 id="321-安装nginx">3.2.1 安装Nginx</h3>
<p>从仓库安装就简单多了，一行就可以了，系统Centos，其他自行搜索：</p>
<pre><code class="language-bash">yum install nginx
</code></pre>
<p>可以先测试一下，直接用</p>
<pre><code class="language-bash">nginx
</code></pre>
<p>开启服务，然后浏览器输入公网ip：<br>
<img src="https://img-blog.csdnimg.cn/20200317014949623.png" alt="在这里插入图片描述" loading="lazy"><br>
（笔者有点怀疑是不是装了个假的Nginx，两个的主页居然不一样。。。。）</p>
<h3 id="322-证书处理">3.2.2 证书处理</h3>
<p>没安装acme.sh的先安装：</p>
<pre><code class="language-bash">curl https://get.acme.sh | sh
. ~/.bashrc
</code></pre>
<p>申请证书：</p>
<pre><code class="language-bash">acme.sh --issue -d www.test.com --webroot /usr/share/nginx/html
</code></pre>
<p>安装证书：</p>
<pre><code class="language-bash">acme.sh --installcert \
-d www.test.com \
--keypath /xxxx/xxx.key \
--fullchainpath /xxx/xxx.pem
</code></pre>
<h3 id="323-nginx配置">3.2.3 Nginx配置</h3>
<p>同样先备份：</p>
<pre><code class="language-bash">cd /etc/nginx
cp nginx.conf nginx.conf.bak
vim nginx.conf
</code></pre>
<p>这里的配置比编译安装的又多了不少，一样从server（61行）开始去掉注释：<br>
<img src="https://img-blog.csdnimg.cn/20200317015539790.png" alt="在这里插入图片描述" loading="lazy"><br>
然后修改三行：<br>
<img src="https://img-blog.csdnimg.cn/20200317015723131.png" alt="在这里插入图片描述" loading="lazy"><br>
server_name填域名，ssl_certificate填pem文件，ssl_certificate_key填key文件。<br>
最后增加一行ssl协议：<br>
<img src="https://img-blog.csdnimg.cn/20200317025303324.png" alt="在这里插入图片描述" loading="lazy"></p>
<h3 id="324-测试">3.2.4 测试</h3>
<p>可以先用-t测试语法错误：</p>
<pre><code class="language-bash">nginx -t
</code></pre>
<p>ok的话重启服务：</p>
<pre><code class="language-bash">nginx -s stop
nginx
</code></pre>
<p>浏览器输入域名访问：<br>
<img src="https://img-blog.csdnimg.cn/20200317025240627.png" alt="在这里插入图片描述" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/20200317025401531.png" alt="在这里插入图片描述" loading="lazy"></p>
<h1 id="4-apache">4 Apache</h1>
<p>Apache也有两种安装方式，从源码编译安装与从仓库安装。</p>
<h2 id="41-编译安装的apache2441">4.1 编译安装的Apache(2.4.41)</h2>
<h3 id="411-安装apache">4.1.1 安装Apache</h3>
<p>编译安装Apache比较麻烦，需要安装pcre，apr，apr-util，生成Makefile时需要指定以下几个选项：</p>
<pre><code class="language-bash">--with-apr \
--with-apr-util \
--with-pcre \
--enable-ssl \
--with-ssl 
</code></pre>
<p>具体可以看<a href="https://blog.csdn.net/qq_27525611/article/details/104716600">这里</a>。<br>
安装好了之后需要先确定ssl模块是否存在：</p>
<pre><code class="language-bash">cd APACHE_INSTALL_DIR/modules
ls | grep ssl
</code></pre>
<p>如果没有显示mod_ssl.so，则需要重新安装，确定生成Makefile时没有漏掉</p>
<pre><code class="language-bash">--enable-ssl
与
--with-ssl
</code></pre>
<p>如果有ssl模块，直接修改配置文件测试一下。</p>
<pre><code class="language-bash">cd APACHE_INSTALL_DIR/conf
vim httpd.conf
</code></pre>
<p>修改ServerName为</p>
<pre><code class="language-bash">localhost:80
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200317112929230.png" alt="在这里插入图片描述" loading="lazy"><br>
启动服务输入localhost测试：</p>
<pre><code class="language-bash">cd APACHE_INSTALL_DIR/bin
./apachectl
</code></pre>
<p>页面只有一行It works!：<br>
<img src="https://img-blog.csdnimg.cn/20200317113052882.png" alt="在这里插入图片描述" loading="lazy"><br>
（话说这和仓库安装的Apache首页差距这么大。。。）</p>
<h3 id="412-证书处理">4.1.2 证书处理</h3>
<p>没安装acme.sh的先安装：</p>
<pre><code class="language-bash">curl https://get.acme.sh | sh
. ~/.bashrc
</code></pre>
<p>申请证书：</p>
<pre><code class="language-bash">acme.sh --issue -d www.test.com --webroot APACHE_INSTALL_DIR/htdocs
</code></pre>
<p>这里webroot为Apache默认的文档根目录.<br>
安装证书：</p>
<pre><code class="language-bash">acme.sh --installcert -d www.test.com \
--key-file /xxxx/xxx.key \
--cert-file /xxxx/xxxx.crt \
--fullchain-file /xxx/xxxfullchain.crt 
</code></pre>
<p>路径与名字随便，后缀名不能变。</p>
<h3 id="413-apache配置">4.1.3 Apache配置</h3>
<p>首先修改conf/httpd.conf：</p>
<pre><code class="language-bash">cd APACHE_INSTALL_DIR/conf
cp httpd.conf httpd.conf.bak
vim httpd.conf
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200317133511616.png" alt="在这里插入图片描述" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/20200317132738142.png" alt="在这里插入图片描述" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/20200317132745841.png" alt="在这里插入图片描述" loading="lazy"><br>
找到这三行，去掉注释。<br>
然后修改httpd-ssl.conf:</p>
<pre><code class="language-bash">cd extra
cp http-ssl.conf http-ssl.conf.bak
vim httpd-ssl.conf
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200317133012729.png" alt="在这里插入图片描述" loading="lazy"><br>
DocumentRoot可以默认，ServerName改成</p>
<pre><code class="language-bash">www.test.com:443
</code></pre>
<p>然后修改这三行，把证书的文件相应填入。<br>
<img src="https://img-blog.csdnimg.cn/20200317133145247.png" alt="在这里插入图片描述" loading="lazy"></p>
<h3 id="414-测试">4.1.4 测试</h3>
<p>语法检查：</p>
<pre><code class="language-bash">cd APACHE_INSTALL_DIR/bin
./apachectl -t
</code></pre>
<p>没有错误之后重启服务：</p>
<pre><code class="language-bash">./apachectl stop
./apachectl
</code></pre>
<p>浏览器输入域名访问：<br>
<img src="https://img-blog.csdnimg.cn/20200317133911280.png" alt="在这里插入图片描述" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/20200317133855215.png" alt="在这里插入图片描述" loading="lazy"></p>
<h2 id="42-从仓库安装的apache246">4.2 从仓库安装的Apache(2.4.6)</h2>
<h3 id="421-安装apache">4.2.1 安装Apache</h3>
<pre><code class="language-bash">yum install httpd
</code></pre>
<p>修改配置文件并进行测试：</p>
<pre><code class="language-bash">cd /etc/httpd/conf
cp httpd.conf httpd.conf.bak
vim httpd.conf
</code></pre>
<p>找到ServerName改成</p>
<pre><code class="language-bash">localhost:80
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200317030501258.png" alt="在这里插入图片描述" loading="lazy"><br>
开启服务后输入localhost:80.</p>
<pre><code class="language-bash">systemctl start httpd
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200317030857326.png" alt="在这里插入图片描述" loading="lazy"><br>
另外要确保ssl模块存在：</p>
<pre><code class="language-bash">cd /etc/httpd/modules
ls | grep ssl
</code></pre>
<p>如果没有输出的话，证明没有ssl模块，需要安装：</p>
<pre><code class="language-bash">yum install mod_ssl
</code></pre>
<p>再一次grep：</p>
<pre><code class="language-bash">ls | grep ssl
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://img-blog.csdnimg.cn/20200317031220343.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h3 id="422-证书处理">4.2.2 证书处理</h3>
<p>没安装acme.sh的先安装：</p>
<pre><code class="language-bash">curl https://get.acme.sh | sh
. ~/.bashrc
</code></pre>
<p>申请证书：</p>
<pre><code class="language-bash">acme.sh --issue -d www.test.com --webroot /var/www/html
</code></pre>
<p>其中/var/www/html为Apache默认文档根目录。<br>
安装证书：</p>
<pre><code class="language-bash">acme.sh --installcert -d www.test.com \
--key-file /xxxx/xxx.key \
--cert-file /xxxx/xxxx.crt \
--fullchain-file /xxx/xxxfullchain.crt 
</code></pre>
<figure data-type="image" tabindex="2"><img src="https://img-blog.csdnimg.cn/20200317032615967.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h3 id="423-apache配置">4.2.3 Apache配置</h3>
<p>修改ssl.conf:</p>
<pre><code class="language-bash">cd /etc/httpd/conf.d
cp ssl.conf ssl.conf.bak
vim ssl.conf
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200317034408977.png" alt="在这里插入图片描述" loading="lazy"><br>
修改ServerName与DocumentRoot，ServerName填域名，DocumentRoot直接去掉注释。接着修改以下三行，根据刚才生成的三个文件对应填入即可。<br>
<img src="https://img-blog.csdnimg.cn/2020031703450263.png" alt="在这里插入图片描述" loading="lazy"></p>
<h3 id="424-测试">4.2.4 测试</h3>
<pre><code class="language-bash">apachectl -t
</code></pre>
<p>没有语法错误就重启服务：</p>
<pre><code class="language-bash">systemctl stop httpd
systemctl start httpd
</code></pre>
<p>浏览器输入访问：<br>
<img src="https://img-blog.csdnimg.cn/20200317034119940.png" alt="在这里插入图片描述" loading="lazy"></p>
<h1 id="5-总结">5 总结</h1>
<p>其实这里采用了比较麻烦的方式手动安装证书，acme.sh其实还有更简单的不需要webroot的命令：</p>
<pre><code class="language-bash">acme.sh --issue -d www.test.com --apache
acme.sh --issue -d www.test.com --nginx
</code></pre>
<p>另外还可以通过手动dns的方式：</p>
<pre><code class="language-bash">acme.sh --issue -d www.test.com --dns dns_xxx
</code></pre>
<p>这种方式可以利用域名解析商提供的api自动添加记录完成认证，可以参考<a href="https://calfsoft.com/2018/12/06/Acme-Aliyun/#%E5%AE%89%E8%A3%85-acme-sh">这里</a>。<br>
另外文章没有说到证书过期更新的问题，可以看官方中文说明，<a href="https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E">这里</a>。<br>
除此之外还可以利用openssl使安全性的评分更高，<a href="https://www.ssllabs.com/ssltest/">测试网站这里</a>，<a href="https://www.jianshu.com/p/b6b172f69c14">修改配置这里</a>。<br>
还有最后一个,现有云服务器厂商提供了免费的证书购买，如阿里云，可以直接购买免费证书然后利用文档安装到服务器上。</p>
<p>祝你们早日有一个属于自己的https的网站。</p>

          </div>
        </div>

        
          <div class="next-post">
            <a class="purple-link" href="https://2293736867.github.io/post/github-pagesgridea-da-jian-ge-ren-bo-ke/">
              <h3 class="post-title">
                下一篇：Github Pages+Gridea搭建个人博客
              </h3>
            </a>
          </div>
          
      </div>

      
        
          <div id="gitalk-container"></div>
        

        
      

      <div class="site-footer">
  <div class="slogan">我配不上你，
纵然很努力。</div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://2293736867.github.io/atom.xml" target="_blank">RSS</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>



  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '477bf133e6f4f92e3d3d',
        clientSecret: 'c917fc4292d22d69e98b9521ac1e6fca627fe54c',
        repo: '2293736867.github.io',
        owner: '2293736867',
        admin: ['2293736867'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
