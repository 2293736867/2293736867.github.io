<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>JavaFX+SpringBoot+验证码功能的小型薪酬管理系统 | 氷泠&#39;s blog</title>
<meta name="description" content="我配不上你，
纵然很努力。" />
<link rel="shortcut icon" href="https://2293736867.github.io/favicon.ico">
<link rel="stylesheet" href="https://2293736867.github.io/styles/main.css">

<script src="https://2293736867.github.io/media/js/jquery.min.js"></script>
<script src="https://2293736867.github.io/media/js/masonry.pkgd.min.js"></script>
<script src="https://2293736867.github.io/media/js/aos.js"></script>
<script src="https://2293736867.github.io/media/js/pace.min.js"></script>
<script src="https://2293736867.github.io/media/js/view-image.min.js"></script>
<script src="https://2293736867.github.io/media/js/jquery.magnific-popup.min.js"></script>
<script src="https://2293736867.github.io/media/js/functions.js"></script>
    <meta name="referrer" content="never">
    <meta name="description" content="
2020.07.22更新
1 概述

1.1 简介
1.2 响应流程
1.3 演示


2 环境

2.1 本地开发环境
2.2 服务器环境


3 前端代码部分

3.1 前端概述
3.2 概览

3.2.1. 代码目录树
3.2.2 ..." />
    <meta name="keywords" content="JFX,IDEA,Maven,Spring Boot" />
    <script src="https://2293736867.github.io/media/js/waterfall.min.js"></script>
    <script src="https://2293736867.github.io/media/js/prism.min.js"></script>
  </head>
  <body>
            <header id="header" class="grid-container">
        <!-- start: .menu-wrapper -->
        <div class="menu-mobile"> 
          <i class="fa fa-reorder"></i>
        </div>
        <div class="menu-wrapper">
          <div class="">
            <div class="logo">
              <a href="https://2293736867.github.io"><img src="/media/images/custom-headerLogo.png" alt=""></a>
            </div>
            <!-- start: .main-nav -->

            <nav class="main-nav grid-container grid-parent">
              <ul id="menu-header" class="menu gradient-effect">
                <li class=""><a href="https://2293736867.github.io" class="menu">首页</a></li>
                
                  <li class="" >
                    <a href="/archives" class="menu">
                      归档
                    </a>
                  </li>
                
                  <li class="" >
                    <a href="https://github.com/2293736867" class="menu">
                      Github
                    </a>
                  </li>
                
                  <li class="" >
                    <a href="https://blog.csdn.net/qq_27525611" class="menu">
                      CSDN
                    </a>
                  </li>
                
                <li class="search-menu-item hide-on-mobile hide-on-tablet"><a href="#search-lightbox" class="lightbox mfp-inline"><i class="fa fa-search-line"></i></a></li>
              </ul>
            </nav>
            <a href="#search-lightbox" class="lightbox epcl-search-button mfp-inline hide-on-tablet hide-on-desktop"><i class="fa fa-search-line"></i></a>
            <!-- end: .main-nav -->
            <div class="clear"></div>
            <div class="border hide-on-tablet hide-on-mobile"></div>
          </div>    
          <div class="clear"></div>
        </div>
        <!-- end: .menu-wrapper -->
        <div class="clear"></div>
      </header>
      <div class="hide-on-mobile hide-on-tablet hide-on-desktop">
        <div id="search-lightbox" class="grid-container grid-small grid-parent mfp-hide">
          <div class="search-wrapper section">
            <form id="gridea-search-form" data-update="1618361787150" action="/search/index.html" class="search-form" _lpchecked="1">
              <input type="text" name="q" id="s" value="" class="search-field" placeholder="搜点啥..." aria-label="搜点啥..." required="">
              <button type="submit" class="submit" aria-label="Submit">
                <i class="fa fa-search-line"></i>
              </button>
            </form>
          </div>
        </div>
      </div>

      <main id="single" class="main grid-container fullcover no-sidebar aos-init aos-animate" data-aos="fade">

        <div class="center content">
          <div class="featured-image cover" style="background-image: url('https://2293736867.github.io/post-images/javafxspringbootyan-zheng-ma-gong-neng-de-xiao-xing-xin-chou-guan-li-xi-tong.jpg');">
            <div class="meta top"> 
              <time class="meta-info" style="float:left;" datetime="2020-06-06"><i class="fa fa-calendar"></i><span class="lately">10 个月前</span></time>
              
              <a href="https://2293736867.github.io/post/javafxspringbootyan-zheng-ma-gong-neng-de-xiao-xing-xin-chou-guan-li-xi-tong/#comments" class="comments meta-info" title="">
                <i class="fa fa-comment remixicon"></i><span class="comment-count valine-comment-count" data-xid="/javafxspringbootyan-zheng-ma-gong-neng-de-xiao-xing-xin-chou-guan-li-xi-tong/"> </span>
              </a>
              <span id="/javafxspringbootyan-zheng-ma-gong-neng-de-xiao-xing-xin-chou-guan-li-xi-tong/" class="leancloud_visitors views-counter meta-info" title=""><i class="fa fa-leancloud remixicon"></i><span class="leancloud-visitors-count"></span></span>
              
            </div>
            <div class="info">
              <div class="tags ">
                
                      <a href="https://2293736867.github.io/tag/j0fdg3Cut/" class="ctag ctag-0 ctag-j0fdg3Cut" aria-label="">JFX</a>
                    
                      <a href="https://2293736867.github.io/tag/qkGQwVHv8/" class="ctag ctag-1 ctag-qkGQwVHv8" aria-label="">IDEA</a>
                    
                      <a href="https://2293736867.github.io/tag/R1SdHxPlR/" class="ctag ctag-2 ctag-R1SdHxPlR" aria-label="">Maven</a>
                    
                      <a href="https://2293736867.github.io/tag/jLOEqgo2m/" class="ctag ctag-3 ctag-jLOEqgo2m" aria-label="">Spring Boot</a>
                    
              </div>
              <h1 class="title ularge white bold">JavaFX+SpringBoot+验证码功能的小型薪酬管理系统</h1>
            </div>
          </div>
        </div>  

        <div class="epcl-page-wrapper">
          <div class="left-content grid-70 np-mobile">
            <article class="main-article post">
              <section class="post-content">
                <div class="text">
                  <p><ul class="markdownIt-TOC">
<li><a href="#20200722%E6%9B%B4%E6%96%B0">2020.07.22更新</a></li>
<li><a href="#1-%E6%A6%82%E8%BF%B0">1 概述</a>
<ul>
<li><a href="#11-%E7%AE%80%E4%BB%8B">1.1 简介</a></li>
<li><a href="#12-%E5%93%8D%E5%BA%94%E6%B5%81%E7%A8%8B">1.2 响应流程</a></li>
<li><a href="#13-%E6%BC%94%E7%A4%BA">1.3 演示</a></li>
</ul>
</li>
<li><a href="#2-%E7%8E%AF%E5%A2%83">2 环境</a>
<ul>
<li><a href="#21-%E6%9C%AC%E5%9C%B0%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83">2.1 本地开发环境</a></li>
<li><a href="#22-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%8E%AF%E5%A2%83">2.2 服务器环境</a></li>
</ul>
</li>
<li><a href="#3-%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E9%83%A8%E5%88%86">3 前端代码部分</a>
<ul>
<li><a href="#31-%E5%89%8D%E7%AB%AF%E6%A6%82%E8%BF%B0">3.1 前端概述</a></li>
<li><a href="#32-%E6%A6%82%E8%A7%88">3.2 概览</a>
<ul>
<li><a href="#321-%E4%BB%A3%E7%A0%81%E7%9B%AE%E5%BD%95%E6%A0%91">3.2.1. 代码目录树</a></li>
<li><a href="#322-%E8%B5%84%E6%BA%90%E7%9B%AE%E5%BD%95%E6%A0%91">3.2.2 资源目录树</a></li>
<li><a href="#323-%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96">3.2.3 项目依赖</a></li>
</ul>
</li>
<li><a href="#33-%E5%B8%B8%E9%87%8F%E6%A8%A1%E5%9D%97">3.3 常量模块</a></li>
<li><a href="#34-%E6%8E%A7%E5%88%B6%E5%99%A8%E6%A8%A1%E5%9D%97">3.4 控制器模块</a>
<ul>
<li><a href="#341-%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C%E7%95%8C%E9%9D%A2">3.4.1 登录注册界面</a></li>
<li><a href="#342-%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2">3.4.2 用户界面</a></li>
</ul>
</li>
<li><a href="#35-%E5%AE%9E%E4%BD%93%E7%B1%BB%E6%A8%A1%E5%9D%97">3.5 实体类模块</a></li>
<li><a href="#36-%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97">3.6  日志模块</a></li>
<li><a href="#37-%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9D%97">3.7 网络模块</a>
<ul>
<li><a href="#371-request%E5%8C%85">3.7.1 request包</a></li>
<li><a href="#372-requestbuilder%E5%8C%85">3.7.2 requestBuilder包</a></li>
<li><a href="#373-okhttp">3.7.3 OKHTTP</a></li>
<li><a href="#374-https">3.7.4 HTTPS</a>
<ul>
<li><a href="#3741-okhttp%E9%85%8D%E7%BD%AE">3.7.4.1 OkHttp配置</a></li>
<li><a href="#3742-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BE%E7%BD%AE%E8%AF%81%E4%B9%A6">3.7.4.2 服务器设置证书</a></li>
</ul>
</li>
<li><a href="#375-%E5%9B%BE%E7%89%87%E5%A4%84%E7%90%86">3.7.5 图片处理</a></li>
</ul>
</li>
<li><a href="#38-%E5%8A%A8%E7%94%BB%E6%A8%A1%E5%9D%97">3.8 动画模块</a></li>
<li><a href="#39-%E5%B7%A5%E5%85%B7%E7%B1%BB%E6%A8%A1%E5%9D%97">3.9 工具类模块</a>
<ul>
<li><a href="#391-conversion">3.9.1 Conversion</a></li>
<li><a href="#392-utils">3.9.2 Utils</a></li>
</ul>
</li>
<li><a href="#310-%E8%A7%86%E5%9B%BE%E6%A8%A1%E5%9D%97">3.10 视图模块</a></li>
</ul>
</li>
<li><a href="#4-%E5%89%8D%E7%AB%AFui%E9%83%A8%E5%88%86">4 前端UI部分</a>
<ul>
<li><a href="#41-fxml">4.1 fxml</a></li>
<li><a href="#42-css">4.2 css</a></li>
<li><a href="#43-stage%E6%9E%84%E5%BB%BA%E8%BF%87%E7%A8%8B">4.3 Stage构建过程</a></li>
</ul>
</li>
<li><a href="#5-%E5%90%8E%E7%AB%AF%E9%83%A8%E5%88%86">5 后端部分</a>
<ul>
<li><a href="#51-%E5%90%8E%E7%AB%AF%E6%A6%82%E8%BF%B0">5.1 后端概述</a></li>
<li><a href="#52-%E6%A6%82%E8%A7%88">5.2 概览</a>
<ul>
<li><a href="#521-%E4%BB%A3%E7%A0%81%E7%9B%AE%E5%BD%95%E6%A0%91">5.2.1 代码目录树</a></li>
<li><a href="#522-%E4%BE%9D%E8%B5%96">5.2.2 依赖</a></li>
</ul>
</li>
<li><a href="#53-%E6%8E%A7%E5%88%B6%E5%99%A8%E5%B1%82">5.3 控制器层</a></li>
<li><a href="#54-%E4%B8%9A%E5%8A%A1%E5%B1%82%E4%B8%8E%E6%8C%81%E4%B9%85%E5%B1%82">5.4 业务层与持久层</a></li>
<li><a href="#55-%E6%97%A5%E5%BF%97">5.5 日志</a></li>
<li><a href="#56-%E5%B7%A5%E5%85%B7%E7%B1%BB">5.6 工具类</a></li>
<li><a href="#57-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">5.7 配置文件</a>
<ul>
<li><a href="#571-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%88%86%E7%B1%BB">5.7.1 配置文件分类</a></li>
<li><a href="#572-%E5%8A%A0%E5%AF%86">5.7.2 加密</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#6-%E9%83%A8%E7%BD%B2%E4%B8%8E%E6%89%93%E5%8C%85">6 部署与打包</a>
<ul>
<li><a href="#61-%E5%89%8D%E7%AB%AF%E6%89%93%E5%8C%85">6.1 前端打包</a>
<ul>
<li><a href="#611-idea%E4%B8%80%E6%AC%A1%E6%89%93%E5%8C%85">6.1.1 IDEA一次打包</a></li>
<li><a href="#612-exe4j%E4%BA%8C%E6%AC%A1%E6%89%93%E5%8C%85">6.1.2 exe4j二次打包</a>
<ul>
<li><a href="#6121-exe4j">6.1.2.1 exe4j</a></li>
<li><a href="#6122-%E7%94%9F%E6%88%90jre">6.1.2.2 生成jre</a></li>
<li><a href="#6123-exe4j%E6%89%93%E5%8C%85">6.1.2.3 exe4j打包</a></li>
</ul>
</li>
<li><a href="#613-enigma-virtual-box%E4%B8%89%E6%AC%A1%E6%89%93%E5%8C%85">6.1.3 Enigma Virtual Box三次打包</a></li>
</ul>
</li>
<li><a href="#62-%E5%90%8E%E7%AB%AF%E9%83%A8%E7%BD%B2">6.2 后端部署</a></li>
</ul>
</li>
<li><a href="#7-%E8%BF%90%E8%A1%8C">7 运行</a></li>
<li><a href="#8-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">8 注意事项</a>
<ul>
<li><a href="#81-%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98">8.1 路径问题</a></li>
<li><a href="#82-https">8.2 HTTPS</a></li>
<li><a href="#83-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8A%A0%E5%AF%86">8.3 配置文件加密</a></li>
<li><a href="#84-%E9%94%AE%E7%9B%98%E4%BA%8B%E4%BB%B6">8.4 键盘事件</a></li>
<li><a href="#85-%E6%95%B0%E6%8D%AE%E5%BA%93">8.5 数据库</a></li>
<li><a href="#86-%E9%AA%8C%E8%AF%81%E7%A0%81">8.6 验证码</a></li>
</ul>
</li>
<li><a href="#9-%E6%BA%90%E7%A0%81">9 源码</a></li>
<li><a href="#10-%E9%A1%B9%E7%9B%AE%E4%B8%8D%E8%B6%B3%E4%B9%8B%E5%A4%84">10 项目不足之处</a></li>
<li><a href="#11-%E5%8F%82%E8%80%83">11 参考</a></li>
</ul>
</p>
<h1 id="20200722更新">2020.07.22更新</h1>
<h1 id="1-概述">1 概述</h1>
<h2 id="11-简介">1.1 简介</h2>
<p>一个简单的小型薪酬管理系统，前端JavaFX+后端Spring Boot，功能倒没多少，主要精力放在了UI和前端的一些逻辑上面，后端其实做得很简单。</p>
<p>主要功能：</p>
<ul>
<li>用户注册/登录</li>
<li>验证码找回密码</li>
<li>用户修改信息，修改头像</li>
<li>柱状图形式显示薪酬</li>
<li>管理员管理用户，录入工资</li>
</ul>
<h2 id="12-响应流程">1.2 响应流程</h2>
<figure data-type="image" tabindex="1"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTQ5ODU5N2E5ZmI?x-oss-process=image/format,png" alt="" loading="lazy"></figure>
<h2 id="13-演示">1.3 演示</h2>
<p>登录界面：</p>
<figure data-type="image" tabindex="2"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkMDc5M2RiYmU?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<figure data-type="image" tabindex="3"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkMDg1OGYxNDM?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>用户界面：</p>
<figure data-type="image" tabindex="4"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkMGNjNTFhNmY?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>管理员界面：</p>
<figure data-type="image" tabindex="5"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkMGUzYzk0ZmU?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<h1 id="2-环境">2 环境</h1>
<h2 id="21-本地开发环境">2.1 本地开发环境</h2>
<ul>
<li>Manjaro 20.0.3</li>
<li>IDEA 2020.1.1</li>
<li>OpenJDK 11.0.7.u10-1</li>
<li>OepnJFX 11.0.3.u1-1</li>
<li>Spring Boot 2.3.0</li>
<li>MySQL 8.0.20</li>
</ul>
<h2 id="22-服务器环境">2.2 服务器环境</h2>
<ul>
<li>CentOS 8.1.1911</li>
<li>OpenJDK 11</li>
<li>Tomcat 9.0.33</li>
<li>MySQL 8.0.17</li>
</ul>
<h1 id="3-前端代码部分">3 前端代码部分</h1>
<h2 id="31-前端概述">3.1 前端概述</h2>
<p>前端主要分为5个部分实现：控制器模块，视图模块，网络模块，动画模块还有工具类模块。</p>
<ul>
<li>控制器模块：负责交互事件</li>
<li>视图模块：负责更新UI</li>
<li>网络模块：向后台发送数据请求</li>
<li>动画模块：位移、缩放、淡入/淡出、旋转动画</li>
<li>工具类模块：加密，检查网路连通，居中界面等</li>
</ul>
<h2 id="32-概览">3.2 概览</h2>
<h3 id="321-代码目录树">3.2.1. 代码目录树</h3>
<figure data-type="image" tabindex="6"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkMTBjOTA3NzA?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkMTFiNTY4ZmU?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"><br>
说明：</p>
<ul>
<li><code>constant</code>包：项目所需要的字符串常量以及一些枚举常量</li>
<li><code>controller</code>包：控制器类，负责UI与用户的交互</li>
<li><code>entity</code>包：实体类</li>
<li><code>log</code>包：日志类</li>
<li><code>network</code>包：负责网络请求，包括请求生成以及请求发送</li>
<li><code>transition</code>包：负责处理动画</li>
<li><code>utils</code>包：工具类</li>
<li><code>view</code>包：负责UI的初始化预计更新</li>
</ul>
<h3 id="322-资源目录树">3.2.2 资源目录树</h3>
<figure data-type="image" tabindex="7"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkMzFkNzNiZDg?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkMzQzYmQ5NmM?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"><br>
说明：</p>
<ul>
<li><code>css</code>：界面所用到的样式</li>
<li><code>fxml</code>：一个特殊的xml文件，用于定义界面与绑定Controller中的函数，也就是绑定事件</li>
<li><code>image</code>：静态图片</li>
<li><code>key</code>：证书文件，用于OkHttp中的HTTPS连接</li>
<li><code>properties</code>：项目中的一些常量属性</li>
</ul>
<h3 id="323-项目依赖">3.2.3 项目依赖</h3>
<p>主要依赖如下：</p>
<ul>
<li><a href="https://mvnrepository.com/search?q=gson">Gson</a>：用于在实体类以及Map与JSON字符串之间进行转换</li>
<li><a href="https://mvnrepository.com/search?q=log4j2">Log4j2</a>：日志</li>
<li><a href="https://mvnrepository.com/search?q=lombok">Lombok</a>：神器不解释，但是有一些声音说不要使用，可以参考<a href="https://www.v2ex.com/amp/t/562185/2">这里</a>或<a href="http://blog.itpub.net/69908877/viewspace-2676272/">这里</a>，看个人啦</li>
<li><a href="https://mvnrepository.com/search?q=okhttp">OkHttp3</a>：网路请求</li>
<li><a href="https://mvnrepository.com/search?q=apache%20commons">Apache Commons</a>：工具类</li>
<li><a href="https://gluonhq.com/products/javafx/">OpenJFX11</a>：OpenJFX核心</li>
</ul>
<h2 id="33-常量模块">3.3 常量模块</h2>
<figure data-type="image" tabindex="8"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkM2EzNDcyNWQ?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>包含程序所需要的字符串以及枚举常量：</p>
<ul>
<li><code>CSSPath</code>：CSS路径，用于给Scene添加样式，如<code>scene.getStylesheets.add(path)</code></li>
<li><code>FXMLPath</code>：FXML路径，用于<code>FXMLLoader</code>加载<code>FXML</code>文件，如<code>FXMLLoader.load(getClass.getResource(path).openStream())</code></li>
<li><code>AllURL</code>：发送请求到后端的URL</li>
<li><code>BuilderKeys</code>：OkHttp中的<code>FormBody.Builder</code>中使用的常量键名</li>
<li><code>PaneName</code>：Pane名字，用于在同一个Scene切换不同的Pane</li>
<li><code>ReturnCode</code>：后端返回码，需要与后端协商</li>
<li><code>ViewSize</code>：界面尺寸</li>
</ul>
<p>重点说一下路径问题，笔者的css与fxml文件都放在resources下：</p>
<figure data-type="image" tabindex="9"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkM2M3NDNjMjY?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>其中fxml路径在项目中的用法如下：</p>
<pre><code class="language-java">URL url = getClass().getResource(FXMLPath.xxxx);
FXMLLoader loader = new FXMLLoader();
loader.setLocation(url);
loader.load(url.openStream());
</code></pre>
<p>获取路径从根路径获取，比如上图中的MessageBox.fxml：</p>
<pre><code class="language-java">private static final String FXML_PREFIX = &quot;/fxml/&quot;;
private static final String FXML_SUFFIX = &quot;.fxml&quot;;	
public static final String MESSAGE_BOX = FXML_PREFIX + &quot;MessageBox&quot; + FXML_SUFFIX;
</code></pre>
<p>若fxml文件直接放在resources根目录下，可以使用：</p>
<pre><code class="language-java">getClass().getResource(&quot;/xxx.fxml&quot;);
</code></pre>
<p>直接获取。</p>
<p>css同理：</p>
<pre><code class="language-java">private static final String CSS_PREFIX = &quot;/css/&quot;;
private static final String CSS_SUFFIX = &quot;.css&quot;;
public static final String MESSAGE_BOX = CSS_PREFIX + &quot;MessageBox&quot; + CSS_SUFFIX;
</code></pre>
<p>网络请求的URL建议把路径写到配置文件中，比如这里的从配置文件读取：</p>
<pre><code class="language-java">Properties properties = Utils.getProperties();
if (properties != null)
{
    String baseUrl = properties.getProperty(&quot;baseurl&quot;) + properties.getProperty(&quot;port&quot;) + &quot;/&quot; + properties.getProperty(&quot;projectName&quot;);
    SIGN_IN_UP_URL = baseUrl + &quot;signInUp&quot;;
    //...
}
</code></pre>
<h2 id="34-控制器模块">3.4 控制器模块</h2>
<p>控制器模块用于处理用户的交互事件，分为三类：</p>
<ul>
<li>登录注册界面控制器（start包）</li>
<li>用户界面控制器（worker包）</li>
<li>管理员界面控制器（admin包）</li>
</ul>
<figure data-type="image" tabindex="10"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkM2RmNmJkMTM?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<figure data-type="image" tabindex="11"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkNDdmNjAxMmI?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<h3 id="341-登录注册界面">3.4.1 登录注册界面</h3>
<p>这是程序一开始进入的界面，会在这里绑定一些基本的关闭，最小化，标题栏拖拽事件：</p>
<pre><code class="language-java">public void onMousePressed(MouseEvent e)
{
    stageX = stage.getX();
    stageY = stage.getY();
    screexX = e.getScreenX();
    screenY = e.getScreenY();
}
public void onMouseDragged(MouseEvent e)
{
    stage.setX(e.getScreenX() - screexX + stageX);
    stage.setY(e.getScreenY() - screenY + stageY);
}
public void close()
{
    GUI.close();
}
public void minimize()
{
    GUI.minimize();
}
</code></pre>
<p>登录界面的控制器也很简单，就一个登录/注册功能加一个跳转到找回密码界面，代码就不贴了。</p>
<p>至于找回密码界面，需要做的比较多，首先需要判断用户输入的电话是否在后端数据库存在，另外还要检查两次输入的密码是否一致，还要判断短信是否发送成功，并且检查用户输入的验证码与后端返回的验证码是否一致（短信验证码部分其实不需要后端处理，原本是放在前端的，但是考虑到可能会泄漏一些重要的信息就放到后端处理了）。</p>
<h3 id="342-用户界面">3.4.2 用户界面</h3>
<p>接着是用户登录后进入的界面，加了渐隐与移动动画：</p>
<pre><code class="language-java">public void userEnter()
{
    new Transition()
    .add(new Move(userImage).x(-70))
    .add(new Fade(userLabel).fromTo(0,1)).add(new Move(userLabel).x(95))
    .add(new Scale(userPolygon).ratio(1.8)).add(new Move(userPolygon).x(180))
    .add(new Scale(queryPolygon).ratio(1.8)).add(new Move(queryPolygon).x(180))
    .play();
}

public void userExited()
{
    new Transition()
    .add(new Move(userImage).x(0))
    .add(new Fade(userLabel).fromTo(1,0)).add(new Move(userLabel).x(0))
    .add(new Scale(userPolygon).ratio(1)).add(new Move(userPolygon).x(0))
    .add(new Scale(queryPolygon).ratio(1)).add(new Move(queryPolygon).x(0))
    .play();
}
</code></pre>
<p>效果如下：</p>
<figure data-type="image" tabindex="12"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkNWE2YTU1Mzc?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>实际处理是把<code>&lt;Image&gt;</code>以及<code>&lt;Label&gt;</code>放进一个<code>&lt;AnchorPane&gt;</code>中，然后为这个<code>&lt;AnchorPane&gt;</code>添加鼠标移入与移出事件。从代码中可以知道图片加上了位移动画，文字同时加上了淡入与位移动画，多边形同时加上了缩放与位移动画。以左下的<code>&lt;AnchorPane&gt;</code>事件为例，当鼠标移入时，首先把图片左移：</p>
<pre><code class="language-java">.add(new Move(userImage).x(-70))
</code></pre>
<p>x表示横向位移。</p>
<p>接着是淡入与位移文字：</p>
<pre><code class="language-java">.add(new Fade(userLabel).fromTo(0,1)).add(new Move(userLabel).x(95))    
</code></pre>
<p>fromTo表示透明度的变化，从0到1，相当于淡入效果。</p>
<p>最后放大多边形1.8倍同时右移多边形：</p>
<pre><code class="language-java">.add(new Scale(userPolygon).ratio(1.8)).add(new Move(userPolygon).x(180))
</code></pre>
<p>ratio表示放大的倍率，这里是放大到原来的1.8倍。</p>
<p>同理右上方同样需要进行放大与移动：</p>
<pre><code class="language-java">.add(new Scale(queryPolygon).ratio(1.8)).add(new Move(queryPolygon).x(180))
</code></pre>
<p>其中用到的<code>Transition</code>，<code>Scale</code>，<code>Fade</code>是自定义的动画处理类，详情请看&quot;3.8 动画模块&quot;。</p>
<h2 id="35-实体类模块">3.5 实体类模块</h2>
<p>简单的一个Worker：</p>
<pre><code class="language-java">@Getter
@Setter
@NoArgsConstructor
public class Worker {
    private String cellphone;
    private String password;
    private String name = &quot;无姓名&quot;;
    private String department = &quot;无部门&quot;;
    private String position = &quot;无职位&quot;;
    private String timeAndSalary;

    public Worker(String cellphone,String password)
    {
        this.cellphone = cellphone;
        this.password = password;
    }
}
</code></pre>
<p>注解使用了Lombok，Lombok介绍请<a href="https://www.cnblogs.com/relucent/p/8992147.html">戳这里</a>，完整用法<a href="https://projectlombok.org/features/all">戳这里</a>。</p>
<p><code>timeAndSalary</code>是一个使用Gson转换为String的Map，键为对应的年月，值为工资。具体转换方法请到工具类模块查看。</p>
<h2 id="36-日志模块">3.6  日志模块</h2>
<p>日志模块使用了Log4j2，<code>resources</code>下的<code>log4j2.xml</code>如下：</p>
<pre><code class="language-xml">&lt;configuration status=&quot;OFF&quot;&gt;
    &lt;appenders&gt;
        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;
            &lt;PatternLayout pattern=&quot;Time:%d{HH:mm:ss}     Level:%-5level %nMessage:%msg%n&quot;/&gt;
        &lt;/Console&gt;
    &lt;/appenders&gt;
    &lt;loggers&gt;
        &lt;logger name=&quot;test&quot; level=&quot;info&quot; additivity=&quot;false&quot;&gt;
            &lt;appender-ref ref=&quot;Console&quot;/&gt;
        &lt;/logger&gt;
        &lt;root level=&quot;info&quot;&gt;
            &lt;appender-ref ref=&quot;Console&quot;/&gt;
        &lt;/root&gt;
    &lt;/loggers&gt;
&lt;/configuration&gt;
</code></pre>
<p>这是最一般的配置，<code>pattern</code>里面是输出格式，其中</p>
<ul>
<li><code>%d{HH:mm:ss}</code>：时间格式</li>
<li><code>level</code>：日志等级</li>
<li><code>n</code>：换行</li>
<li><code>msg</code>：日志信息</li>
</ul>
<p>这里前端的日志进行了简化处理，需要更多配置请自行搜索。</p>
<h2 id="37-网络模块">3.7 网络模块</h2>
<p>网络模块的核心使用了OkHttp实现，主要分为两个包：</p>
<figure data-type="image" tabindex="13"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkNjBkM2IyZjU?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<ul>
<li><code>request</code>：封装发送到后端的各种请求</li>
<li><code>requestBuilder</code>：创建request的Builder类</li>
<li><code>OKHTTP</code>：封装OkHttp的工具类，对外只有一个静态send方法，参数只有一个，request包中的类，使用requestBuilder生成。send方法返回一个Object，Object怎么处理需要在用到OKHTTP的地方与返回方法对应</li>
</ul>
<h3 id="371-request包">3.7.1 request包</h3>
<p>封装了各种网络请求：</p>
<figure data-type="image" tabindex="14"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkNjBhMmM4ZTU?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>所有请求继承自BaseRequest，BaseRequest的公有方法包括：</p>
<ul>
<li><code>setUrl</code>：设置发送的URL</li>
<li><code>setCellphone</code>：添加cellphone参数</li>
<li><code>setPassword</code>：添加password参数，注意会经过前端的SHA-512加密</li>
<li><code>setWorker</code>：添加Worker参数</li>
<li><code>setWorkers</code>：接受一个List&lt;Worker&gt;，管理员保存所有Worker时使用</li>
<li><code>setAvatar</code>：添加头像参数</li>
<li><code>setAvatars</code>：接受一个HashMap&lt;String,String&gt;，键为电话，标识唯一的Worker，值为图片经过Base64转换为的String</li>
</ul>
<p>唯一一个抽象方法是：</p>
<pre><code class="language-java">public abstract Object handleResult(ReturnCode code)：
</code></pre>
<p>根据不同的请求处理返回的结果，后端返回一个ReturnCode，其中封装了状态码，错误信息与返回值，由Gson转为String，前端得到String后经Gson转为ReturnCode，从里面获取状态码以及返回值。</p>
<p>其余的请求类继承自<code>BaseRequest</code>，并且实现不同的处理结果方法，以Get请求为例：</p>
<pre><code class="language-java">public class GetOneRequest extends BaseRequest {
    @Override
    public Object handleResult(ReturnCode code)
    {
        switch (code)
        {
            case EMPTY_CELLPHONE:
                MessageBox.emptyCellphone();
                return false;
            case INVALID_CELLPHONE:
                MessageBox.invalidCellphone();
                return false;
            case CELLPHONE_NOT_MATCH:
                MessageBox.show(&quot;获取失败，电话号码不匹配&quot;);
                return false;
            case EMPTY_WORKER:
                MessageBox.emptyWorker();
                return false;
            case GET_ONE_SUCCESS:
                return Conversion.JSONToWorker(code.body());
            default:
                MessageBox.unknownError(code.name());
                return false;
        }
    }
}
</code></pre>
<p>获取一个Worker，可能的返回值有（返回的是在ReturnCode中定义的枚举值，需要前后端统一）：</p>
<ul>
<li><code>EMPTY_CELLPHOE</code>：表示发送的get请求中电话为空</li>
<li><code>INVALID_CELLPHONE</code>：非法电话号码，判断的代码为：<code>String reg = &quot;^[1][358][0-9]{9}$&quot;;return !(Pattern.compile(reg).matcher(cellphone).matches());</code></li>
<li><code>CELLPHONE_NOT_MATCH</code>：电话号码不匹配，也就是数据库没有对应的Worker</li>
<li><code>EMPTY_WORKER</code>：数据库中存在这个Worker，但由于转换为String时后端处理失败，返回一个空的Worker</li>
<li><code>GET_ONE_SUCCESS</code>：获取成功，使用工具类转换String为Worker</li>
<li>其他：未知错误</li>
</ul>
<h3 id="372-requestbuilder包">3.7.2 requestBuilder包</h3>
<p>包含了对应于request的Builder：</p>
<figure data-type="image" tabindex="15"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkNzg3MWM2NWY?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>除了默认的构造方法与build方法外，只有set方法，比如：</p>
<pre><code class="language-java">public class GetOneRequestBuilder {
    private final GetOneRequest request = new GetOneRequest();
    public GetOneRequestBuilder()
    {
        request.setUrl(AllURL.GET_ONE_URL);
    }
    public GetOneRequestBuilder cellphone(String cellphone)
    {
        if(Check.isEmpty(cellphone))
        {
            MessageBox.emptyCellphone();
            return null;
        }
        request.setCellphone(cellphone);
        return this;
    }
    public GetOneRequest build()
    {
        return request;
    }
}
</code></pre>
<p>在默认构造方法里面设置了URL，剩下就只需设置电话即可获取Worker。</p>
<h3 id="373-okhttp">3.7.3 OKHTTP</h3>
<p>这是一个封装了OkHttp的静态工具类，唯一一个公有静态方法如下：</p>
<pre><code class="language-java">public static Object send(BaseRequest content)
{
    Call call = client.newCall(new Request.Builder().url(content.getUrl()).post(content.getBody()).build());
    try
    {
        ResponseBody body = call.execute().body();
        if(body != null)
            return content.handleResult(Conversion.stringToReturnCode(body.string()));
    }
    catch (IOException e)
    {
        L.error(&quot;Reseponse body is null&quot;);
        MessageBox.show(&quot;服务器无法连通,响应为空&quot;);
    }
    return null;
}
</code></pre>
<p>采用同步POST请求的方式，用<code>BaseRequest</code>作为基类是因为能在<code>Call</code>中方便地获取URL以及请求体，若数据量大可以考虑异步请求。<br>
另外上面也提到后端返回的是经由Gson转换为<code>String</code>的<code>ReturnCode</code>，所以获取body后，先转换为<code>ReturnCode</code>再处理。</p>
<h3 id="374-https">3.7.4 HTTPS</h3>
<p>至于HTTPS，由于在Tomcat上进行部署，需要在Tomcat里设置证书，同时也需要在OkHttp中设置以下三部分：</p>
<ul>
<li><code>sslSocketFactory</code>：ssl套接字工厂</li>
<li><code>HostnameVerifier</code>：验证主机名</li>
<li><code>X509TrustManager</code>：证书信任器管理类</li>
</ul>
<h4 id="3741-okhttp配置">3.7.4.1 OkHttp配置</h4>
<p>上面提到了需要设置三部分，下面来看看最简单的一个验证主机名部分，利用的是<code>HostnameVerifier</code>接口：</p>
<figure data-type="image" tabindex="16"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkNzFhMzE2MGI?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<pre><code class="language-java">OkHttpClient client = new OkHttpClient.Builder()
.connectTimeout(1500, TimeUnit.MILLISECONDS)
.hostnameVerifier((hostname, sslSession) -&gt; {
    if (&quot;www.test.com&quot;.equals(hostname)) {
        return true;
    } else {
        HostnameVerifier verifier = HttpsURLConnection.getDefaultHostnameVerifier();
        return verifier.verify(hostname, sslSession);
    }
}).build();
</code></pre>
<p>这里验证主机名为<code>www.test.com</code>就返回true（也可是使用公网ip验证），否则使用默认的HostnameVerifier。业务逻辑复杂的话可以结合配置中心，黑/白名单等进行动态校验。</p>
<p>接着是<code>X509TrustManager</code>的处理（来源<a href="https://www.programcreek.com/java-api-examples/?class=java.security.cert.CertificateFactory&amp;method=generateCertificates">Java Code Example</a>）：</p>
<pre><code class="language-java">private static X509TrustManager trustManagerForCertificates(InputStream in)
            throws GeneralSecurityException
{
    CertificateFactory certificateFactory = CertificateFactory.getInstance(&quot;X.509&quot;);
    Collection&lt;? extends Certificate&gt; certificates = certificateFactory.generateCertificates(in);
    if (certificates.isEmpty()) {
        throw new IllegalArgumentException(&quot;expected non-empty set of trusted certificates&quot;);
    }
    char[] password = &quot;www.test.com&quot;.toCharArray(); // Any password will work.
    KeyStore keyStore = newEmptyKeyStore(password);
    int index = 0;
    for (Certificate certificate : certificates) {
        String certificateAlias = Integer.toString(index++);
        keyStore.setCertificateEntry(certificateAlias, certificate);
    }
    // Use it to build an X509 trust manager.
    KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(
            KeyManagerFactory.getDefaultAlgorithm());
    keyManagerFactory.init(keyStore, password);
    TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(
            TrustManagerFactory.getDefaultAlgorithm());
    trustManagerFactory.init(keyStore);
    TrustManager[] trustManagers = trustManagerFactory.getTrustManagers();
    if (trustManagers.length != 1 || !(trustManagers[0] instanceof X509TrustManager)){
        throw new IllegalStateException(&quot;Unexpected default trust managers:&quot; + Arrays.toString(trustManagers));
    }
    return (X509TrustManager) trustManagers[0];
}

private static KeyStore newEmptyKeyStore(char[] password) throws GeneralSecurityException {
    try {
        KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType()); // 这里添加自定义的密码，默认
        InputStream in = null; // By convention, 'null' creates an empty key store.
        keyStore.load(in, password);
        return keyStore;
    } catch (IOException e) {
        throw new AssertionError(e);
    }
}
</code></pre>
<p>返回一个信任由输入流读取的证书的信任管理器，若证书没有被签名则抛出<code>SSLHandsakeException</code>，证书建议使用第三方签名的而不是自签名的（比如使用<code>OpenSSL</code>或者<code>acme.sh</code>生成），特别是在生产环境中千万不要使用自签名的，例子的注释也提到：</p>
<figure data-type="image" tabindex="17"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkNjMwZDcwNjU?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>最后是SSL套接字工厂的处理：</p>
<pre><code class="language-java">private static SSLSocketFactory createSSLSocketFactory() {
    SSLSocketFactory ssfFactory = null;
    try {
        SSLContext sc = SSLContext.getInstance(&quot;TLS&quot;);
        sc.init(null, new TrustManager[]{trustManager}, new SecureRandom());
        ssfFactory = sc.getSocketFactory();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return ssfFactory;
}
</code></pre>
<p>完整的<code>OkHttpClient</code>构造如下：</p>
<pre><code class="language-java">X509TrustManager trustManager = trustManagerForCertificates(OKHTTP.class.getResourceAsStream(&quot;/key/pem.pem&quot;));
OkHttpClient client = new OkHttpClient.Builder()
.connectTimeout(1500, TimeUnit.MILLISECONDS)
.sslSocketFactory(createSSLSocketFactory(), trustManager)
.hostnameVerifier((hostname, sslSession) -&gt; {
    if (&quot;www.test.com&quot;.equals(hostname)) {
        return true;
    } else {
        HostnameVerifier verifier = HttpsURLConnection.getDefaultHostnameVerifier();
        return verifier.verify(hostname, sslSession);
    }
})
.readTimeout(10, TimeUnit.SECONDS).build();
</code></pre>
<p>其中<code>/key/pem.pem</code>为<code>resources</code>下的证书文件。</p>
<h4 id="3742-服务器设置证书">3.7.4.2 服务器设置证书</h4>
<p>使用WAR进行部署，JAR部署的方式请自行搜索，服务器Tomcat，其他web服务器请自行搜索。</p>
<p>首先在Tomcat配置文件中的<code>conf/server.xml</code>修改域名：</p>
<figure data-type="image" tabindex="18"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkODZkMGU1NWU?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>找到<code>&lt;Host&gt;</code>并复制，直接修改其中的<code>name</code>为对应域名：</p>
<figure data-type="image" tabindex="19"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkODdiYWJjNmE?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>接着从证书厂商下载文件（一般都带文档，根据文档部署），Tomcat的是两个文件，一个是pfx，一个是密码文件，继续修改<code>server.xml</code>，搜索8443， 找到如下位置：</p>
<figure data-type="image" tabindex="20"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkOGQ1NzJkY2E?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>其中上面的<code>&lt;Connector&gt;</code>是HTTP/1.1协议的，基于NIO实现，下面的<code>&lt;Connector&gt;</code>是HTTP/2的，基于APR实现。</p>
<p>使用HTTP/1.1会比较简单一些，仅仅是修改<code>server.xm</code>l即可，使用HTTP/2的话会麻烦一点，如果基于APR（Apache Portable Runtime）实现需要安装APR，APR-util以及Tomcat-Native，可以参考<a href="https://blog.csdn.net/qq_27525611/article/details/106557158">这里</a>，下面以HTTP/1.1的为例，修改如下：</p>
<pre><code class="language-xml">&lt;Connector port=&quot;8123&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot;
	maxThreads=&quot;200&quot; SSLEnabled=&quot;true&quot; 
	scheme=&quot;https&quot; secure=&quot;true&quot;
	keystoreFile=&quot;/xxx/xxx/xxx/xxx.pfx&quot; keystoreType=&quot;PKCS12&quot;
	keystorePass=&quot;YOUR PASSWORD&quot; clientAuth=&quot;false&quot;
	sslProtocol=&quot;TLS&quot;&gt;
&lt;/Connector&gt;
</code></pre>
<p>修改证书位置以及密码。如果想要更加安全的话可以指定使用某个TLS版本，比如使用TLS1.2版本：</p>
<pre><code class="language-xml">&lt;Connector ...
sslProtocol=&quot;TLS&quot; sslEnabledProtocols=&quot;TLSv1.2&quot;
&gt;
</code></pre>
<h3 id="375-图片处理">3.7.5 图片处理</h3>
<p>图片原本是想使用OkHttp的MultipartBody处理的，但是处理的图片都不太，貌似没有必要，而且实体类的数据都是以字符串的形式传输的，因此，笔者的想法是能不能统一都用字符串进行传输，于是找到了图片和String互转的函数，稍微改动，原来的函数需要外部依赖，现在改为了JDK自带的Base64：</p>
<pre><code class="language-java">public static String avatarToString(Path path)
{
    try
    {
        return new String(encoder.encode(Files.readAllBytes(path)));
    }
    catch (IOException e)
    {
        MessageBox.avatarToStringFailed();
        L.error(e);
        return null;
    }
}

public static void stringToAvatar(String base64Code, String cellphone){
	try
	{
	    if(!Files.exists(TEMP_PATH))
	        Files.createDirectory(TEMP_PATH);
	    if(!Files.exists(getPath(cellphone)))
	        Files.createFile(getPath(cellphone));
	    Files.write(getPath(cellphone), decoder.decode(base64Code));
	}
	catch (IOException e) {
	    MessageBox.stringToAvatarFailed();
	    L.error(e);
	}
}
</code></pre>
<p>Base64是一种基于64个可打印字符来表示二进制数据的方法，可以把二进制数据（图片/视频等）转为字符,或把对应的字符解码变为原来的二进制数据。</p>
<p>笔者实测这种方法转换速度不慢，只要有了正确的转换函数，服务器端可以轻松进行转换，但是对于大文件的支持不好：</p>
<figure data-type="image" tabindex="21"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkYWU3MmViOTI?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>这种方法对一般的图片来说足够了，但是对于真正的文件还是建议使用MultipartBody进行处理。</p>
<h2 id="38-动画模块">3.8 动画模块</h2>
<figure data-type="image" tabindex="22"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkOTk2ZjBiMDM?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>包含了四类动画：</p>
<ul>
<li>淡入/淡出</li>
<li>位移</li>
<li>缩放</li>
<li>旋转</li>
</ul>
<p>这四个类都实现了<code>CustomTransitionOperation</code>接口：</p>
<pre><code class="language-java">import javafx.animation.Animation;

public interface CustomTransitionOperation {
    double defaultSeconds = 0.4;
    Animation build();
    void play();
}
</code></pre>
<p>其中：</p>
<ul>
<li><code>defaultSeconds</code>表示动画默认持续的秒数</li>
<li><code>build</code>用于<code>Transition</code>中对各个动画类进行统一的<code>build</code>操作</li>
<li><code>play</code>用于播放动画</li>
</ul>
<p>四个动画类类似，以旋转动画类为例：</p>
<pre><code class="language-java">public class Rotate implements CustomTransitionOperation{
    private final RotateTransition transition = new RotateTransition(Duration.seconds(1));

    public Rotate(Node node)
    {
        transition.setNode(node);
    }

    public Rotate seconds(double seconds)
    {
        transition.setDuration(Duration.seconds(seconds));
        return this;
    }

    public Rotate to(double to)
    {
        transition.setToAngle(to);
        return this;
    }

    @Override
    public Animation build() {
        return transition;
    }

    @Override
    public void play() {
        transition.play();
    }
}
</code></pre>
<p>seconds设置秒数，to设置旋转的角度，所有动画类统一由<code>Transition</code>控制：</p>
<pre><code class="language-java">public class Transition {
    private final ArrayList&lt;Animation&gt; animations = new ArrayList&lt;&gt;();

    public Transition add(CustomTransitionOperation animation)
    {
        animations.add(animation.build());
        return this;
    }

    public void play()
    {
        animations.forEach(Animation::play);
    }
}
</code></pre>
<p>里面是一个动画类的集合，每次add操作时先生成对应的动画再添加进集合，最后统一播放，示例用法如下：</p>
<pre><code class="language-java">new Transition()
.add(new Move(userImage).x(-70))
.add(new Fade(userLabel).fromTo(0,1)).add(new Move(userLabel).x(95))
.add(new Scale(userPolygon).ratio(1.8)).add(new Move(userPolygon).x(180))
.add(new Scale(workloadPolygon).ratio(1.8)).add(new Move(workloadPolygon).x(180))
.play();
</code></pre>
<h2 id="39-工具类模块">3.9 工具类模块</h2>
<figure data-type="image" tabindex="23"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkOTk4ZjFiM2M?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<ul>
<li><code>AvatarUtils</code>：用于本地生成临时图片以及图片转换处理</li>
<li><code>Check</code>：检查是否为空，是否合法等</li>
<li><code>Conversion</code>：转换类，通过Gson在<code>Worker/String</code>，<code>Map/String</code>，<code>List/String</code>之间进行转换</li>
<li><code>Utils</code>：加密，设置运行环境，居中<code>Stage</code>，检查网络连通等</li>
</ul>
<p>这里说一下<code>Utils</code>与<code>Conversion</code>。</p>
<h3 id="391-conversion">3.9.1 Conversion</h3>
<p>转换类，利用Gson在<code>String</code>与<code>List</code>/<code>Worker</code>/<code>Map</code>之间进行转换，比如<code>String</code>转<code>Map</code>：</p>
<pre><code class="language-java">public static Map&lt;String,Double&gt; stringToMap(String str)
{
    if(Check.isEmpty(str))
        return null;
    Map&lt;?,?&gt; m = gson.fromJson(str,Map.class);
    Map&lt;String,Double&gt; map = new HashMap&lt;&gt;(m.size());
    m.forEach((k,v)-&gt;map.put((String)k,(Double)v));
    return map;
}
</code></pre>
<p>大部分的转换函数类似，首先判空，接着进行对应的类型转换，这里的Conversion与后端的基本一致，后端也需要使用Conversion类进行转换操作。</p>
<h3 id="392-utils">3.9.2 Utils</h3>
<p>获取属性文件方法如下：</p>
<pre><code class="language-java">//获取属性文件
public static Properties getProperties()
{
    Properties properties = new Properties();
    //项目属性文件分成了config_dev.properties,config_test.properties,config_prod.properties
    String fileName = &quot;properties/config_&quot;+ getEnv() +&quot;.properties&quot;;
    ClassLoader loader = Thread.currentThread().getContextClassLoader();
    try(InputStream inputStream = loader.getResourceAsStream(fileName))
    {
        if(inputStream != null)
        {
        	//防止乱码
            properties.load(new InputStreamReader(inputStream, StandardCharsets.UTF_8));
            return properties;
        }
        L.error(&quot;Can not load properties properly.InputStream is null.&quot;);
        return null;
    }
    catch (IOException e)
    {
        L.error(&quot;Can not load properties properly.Message:&quot;+e.getMessage());
        return null;
    }
}
</code></pre>
<p>另一个是检查网路连通的方法：</p>
<pre><code class="language-java">public static boolean networkAvaliable()
{
    try(Socket socket = new Socket())
    {
        socket.connect(new InetSocketAddress(&quot;www.baidu.com&quot;,443));
        return true;
    }
    catch (IOException e)
    {
        L.error(&quot;Can not connect network.&quot;);
        e.printStackTrace();
    }
    return false;
}

public static boolean backendAvaliable()
{
    try(Socket socket = new Socket())
    {
        if(isProdEnvironment())
            socket.connect(new InetSocketAddress(&quot;www.test.com&quot;,8888));
        else
            socket.connect(new InetSocketAddress(&quot;127.0.0.1&quot;,8080));
        return true;
    }
    catch (IOException e)
    {
        L.error(&quot;Can not connect back end server.&quot;);
        L.error(ExceptionUtils.getStackTrace(e));
    }
    return false;
}
</code></pre>
<p>采用socket进行判断，准确来说是包含检查网络连通以及后端是否连通。</p>
<p>最后是居中<code>Stage</code>的方法，尽管Stage中自带了一个centerOnScreen，但是出来的效果并不好，笔者的实测是水平居中但是垂直偏上的，并不是垂直水平居中。</p>
<figure data-type="image" tabindex="24"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkYjdhZDIwN2M?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>因此根据屏幕高宽以及Stage的大小手动设置Stage的x和y。</p>
<pre><code class="language-java">public static void centerMainStage()
{
    Rectangle2D screenRectangle = Screen.getPrimary().getBounds();
    double width = screenRectangle.getWidth();
	double height = screenRectangle.getHeight();
	
	Stage stage = GUI.getStage();
    stage.setX(width/2 - ViewSize.MAIN_WIDTH/2);
    stage.setY(height/2 - ViewSize.MAIN_HEIGHT/2);
}
</code></pre>
<h2 id="310-视图模块">3.10 视图模块</h2>
<figure data-type="image" tabindex="25"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkYmQyZDZkYzM?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<ul>
<li><code>GUI</code>：全局变量共享以及以及控制<code>Scene</code>的切换</li>
<li><code>MainScene</code>：全局控制器，负责初始化以及绑定键盘事件</li>
<li><code>MessageBox</code>：提示信息框，对外提供<code>show()</code>等的静态方法</li>
</ul>
<p>GUI中的方法主要为<code>switchToXxx</code>，比如：</p>
<pre><code class="language-java">public static void switchToSignInUp()
{
    if(GUI.isUserInformation())
    {
        AvatarUtils.deletePathIfExists();
        GUI.getUserInformationController().reset();
    }
    mainParent.requestFocus();
    children.clear();
    children.add(signInUpParent.lookup(PaneName.SIGN_IN_UP));
    scene.getStylesheets().add(CSSPath.SIGN_IN_UP);
    Label minimize = (Label) (mainParent.lookup(&quot;#minimize&quot;));
    minimize.setText(&quot;-&quot;);
    minimize.setFont(new Font(&quot;System&quot;, 20));
    minimize.setOnMouseClicked(v-&gt;minimize());
}
</code></pre>
<p>跳转到登录注册界面，是公有静态方法，首先判断是否为用户信息界面，如果是进行一些清理操作，接着是让<code>Parent</code>获取焦点（为了让键盘事件响应），然后将对应的<code>AnchorPane</code>添加到<code>Children</code>，并添加css，最后修改按钮文字与事件。</p>
<p>另外还在<code>MainScene</code>中加了一些键盘事件响应，比如Enter：</p>
<pre><code class="language-java">ObservableMap&lt;KeyCombination,Runnable&gt; keyEvent = GUI.getScene().getAcclerators();
keyEvent.put(new KeyCodeCombination(KeyCode.ENTER),()-&gt;
{
    if (GUI.isSignInUp())
        GUI.getSignInUpController().signInUp();
    else if (GUI.isRetrievePassword())
        GUI.getRetrievePasswordController().reset();
    else if(GUI.isWorker())
        GUI.switchToUserInformation();
    else if(GUI.isAdmin())
        GUI.switchToUserManagement();
    else if(GUI.isUserInformation())
    {
        UserInformationController controller = GUI.getUserInformationController();
        if(controller.isModifying())
            controller.saveInformation();
        else
            controller.modifyInformation();
    }
    else if(GUI.isSalaryEntry())
    {
        GUI.getSalaryEntryController().save();
    }
});
</code></pre>
<h1 id="4-前端ui部分">4 前端UI部分</h1>
<h2 id="41-fxml">4.1 fxml</h2>
<figure data-type="image" tabindex="26"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkYmQ0ZWY5NDM?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>界面基本上靠这些fxml文件控制，这部分没太多内容，基本上靠IDEA自带的Scene Builder设计，少部分靠代码控制，下面说几个注意事项：</p>
<ul>
<li>根节点为AnchorPane，每个fxml设置一个独立的<code>fx:id</code>以便切换</li>
<li>事件绑定在对应的控件中，比如在一个Label绑定鼠标进入事件，在这个Label上设置<code>onMouseEntered=&quot;#xxx&quot;</code>，其中里面的方法为对应的控制器（<code>fx:controller=&quot;xxx.xxx.xxx.xxxController&quot;</code>）中的方法</li>
<li><code>&lt;Image&gt;</code>中的URL属性需要带上<code>@</code>，比如<code>&lt;Image url=&quot;@../../image/xxx.png&quot;&gt;</code></li>
</ul>
<h2 id="42-css">4.2 css</h2>
<p>JFX中集成了部分css的美化功能，比如：</p>
<pre><code class="language-css">-fx-background-radius: 25px;
-fx-background-color:#e2ff1f;
</code></pre>
<p>用法是需要先在fxml中设置id。</p>
<p>这里注意一下两个id的不同：</p>
<ul>
<li><code>fx:id</code></li>
<li><code>id</code></li>
</ul>
<p><code>fx:id</code>指的是控件的<code>fx:id</code>，通常配合Controller中的<code>@FXML</code>使用，比如一个Label设置了<code>fx:id</code>为label1</p>
<pre><code class="language-xml">&lt;Label fx:id=&quot;label1&quot; layoutX=&quot;450.0&quot; layoutY=&quot;402.0&quot; text=&quot;Label&quot;&gt;
   &lt;font&gt;
       &lt;Font size=&quot;18.0&quot; /&gt;
   &lt;/font&gt;
&lt;/Label&gt;
</code></pre>
<p>则可以在对应Controller中使用<code>@FXML</code>获取，名字与<code>fx:id</code>一致：</p>
<pre><code class="language-java">@FXML
private Label label1;
</code></pre>
<p>而<code>id</code>指的是css的<code>id</code>，用法是在css引用即可，比如上面的Label又同时设置了<code>id</code>（可以相同，也可不同）：</p>
<pre><code class="language-xml">&lt;Label fx:id=&quot;label1&quot; id=&quot;label1&quot; layoutX=&quot;450.0&quot; layoutY=&quot;402.0&quot; text=&quot;Label&quot;&gt;
   &lt;font&gt;
       &lt;Font size=&quot;18.0&quot; /&gt;
   &lt;/font&gt;
&lt;/Label&gt;
</code></pre>
<p>然后在css文件中像引用普通<code>id</code>一样引用：</p>
<pre><code class="language-css">#label1
{
    -fx-background-radius: 20px; /*圆角*/
}
</code></pre>
<p>同时JFX还支持css的伪类，比如下面的最小化与关闭的鼠标移入效果是使用伪类实现的：</p>
<figure data-type="image" tabindex="27"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkYmZhYmNhZjY?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<pre><code class="language-css">#minimize:hover
{
    -fx-opacity: 1;
    -fx-background-radius: 10px;
    -fx-background-color: #323232;
    -fx-text-fill: #ffffff;
}

#close:hover
{
    -fx-opacity: 1;
    -fx-background-radius: 10px;
    -fx-background-color: #dd2c00;
    -fx-text-fill: #ffffff;
}
</code></pre>
<p>当然一些比较复杂的是不支持的，笔者尝试过使用transition之类的，不支持。</p>
<p>最后需要在对应的Scene里面引入css：</p>
<pre><code class="language-java">Scene scene = new Scene();
scene.getStylesheets().add(&quot;xxx/xxx/xxx/xxx.css&quot;);
</code></pre>
<p>程序中的用法是：</p>
<pre><code class="language-java">scene.getStylesheets().add(CSSPath.SIGN_IN_UP);
</code></pre>
<h2 id="43-stage构建过程">4.3 Stage构建过程</h2>
<p>下面以提示框为例，说明Stage的构建过程。</p>
<pre><code class="language-java">try {
    Stage stage = new Stage();
    Parent root = FXMLLoader.load(getClass().getResource(FXMLPath.MESSAGE_BOX));
    Scene scene = new Scene(root, ViewSize.MESSAGE_BOX_WIDTH,ViewSize.MESSAGE_BOX_HEIGHT);
    scene.getStylesheets().add(CSSPath.MESSAGE_BOX);
    Button button = (Button)root.lookup(&quot;#button&quot;);
    button.setOnMouseClicked(v-&gt;stage.hide());
    Label label = (Label)root.lookup(&quot;#label&quot;);
    label.setText(message);
    stage.initStyle(StageStyle.TRANSPARENT);
    stage.setScene(scene);
    Utils.centerMessgeBoxStage(stage);
    stage.show();

    root.requestFocus();
    scene.getAccelerators().put(new KeyCodeCombination(KeyCode.ENTER), stage::close);
    scene.getAccelerators().put(new KeyCodeCombination(KeyCode.BACK_SPACE), stage::close);
} catch (IOException e) {
	//...
}
</code></pre>
<p>首先新建一个<code>Stage</code>，接着利用<code>FXMLLoader</code>加载对应路径上的fxml文件，获取<code>Parent</code>后，利用该<code>Parent</code>生成<code>Scene</code>，再为<code>Scene</code>添加样式。</p>
<p>接着是控件的处理，这里的<code>lookup</code>类似Android中的<code>findViewById</code>，根据<code>fx:id</code>获取对应控件，注意需要加上<code>#</code>。处理好控件之后，居中并显示<code>Stage</code>，同时，绑定键盘事件并让<code>Parent</code>获取焦点。</p>
<h1 id="5-后端部分">5 后端部分</h1>
<h2 id="51-后端概述">5.1 后端概述</h2>
<p>后端以Spring Boot框架为核心，部署方式为WAR，整体分为三层：</p>
<ul>
<li>控制器层：负责接受前端的请求并调用业务层方法</li>
<li>业务层：处理主要业务，如CRUD，图片处理等</li>
<li>持久层：数据持久化，Hibernate+Spring Data JPA</li>
</ul>
<p>总的来说没有用到什么高大上的东西，逻辑也比较简单。</p>
<h2 id="52-概览">5.2 概览</h2>
<h3 id="521-代码目录树">5.2.1 代码目录树</h3>
<figure data-type="image" tabindex="28"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkZGJkYjg5Njg?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<h3 id="522-依赖">5.2.2 依赖</h3>
<p>主要依赖如下：</p>
<ul>
<li><a href="https://mvnrepository.com/search?q=spring%20boot%20start%20data%20jpa">Spring Boot Starter Data JPA</a>：数据持久化</li>
<li><a href="https://mvnrepository.com/search?q=guava">Guava</a>：用于将<code>Iterable&lt;Worker&gt;</code>转换为集合</li>
<li><a href="https://mvnrepository.com/search?q=lombok">Lombok</a>：同前端</li>
<li><a href="https://mvnrepository.com/search?q=gson">Gson</a>：JSON转换类</li>
<li><a href="https://mvnrepository.com/search?q=Apache%20commons">Apache Commons</a>：用于异常处理+随机字符串生成</li>
<li><a href="https://mvnrepository.com/search?q=tencentcloud-sdk-java">TencentCloud SDK Java</a>：短信验证码API</li>
<li><a href="https://mvnrepository.com/search?q=jasypt%20spring%20boot%20starter">Jasypt Spring Boot Starter</a>：加密配置文件</li>
</ul>
<h2 id="53-控制器层">5.3 控制器层</h2>
<p>控制器分为三类，一类处理图片，一类处理CRUD请求，一类处理短信发送请求，统一接受POST忽略GET请求。大概的处理流程是接收参数后首先进行判断操作，比如判空以及判断是否合法等等，接着调用业务层的方法并对返回结果进行封装，同时进行日志记录，最后利用Gson把返回结果转为字符串。代码大部分比较简单就不贴了，说一下短信验证码的部分。</p>
<p>验证码模块使用了腾讯云的接口，官网<a href="https://cloud.tencent.com/">这里</a>，搜索短信功能即可。</p>
<figure data-type="image" tabindex="29"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkZGNlOWFmNGI?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>新用户默认赠送100条短信：</p>
<figure data-type="image" tabindex="30"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkZGZhOTAxODc?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>发送之前需要创建签名与正文模板，审核通过即可使用。</p>
<figure data-type="image" tabindex="31"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkZTIxMjE5MzE?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>可以先根据快速开始试用一下短信功能，若能成功收到短信，可以<a href="https://github.com/TencentCloud/tencentcloud-sdk-java">戳这里</a>查看API（Java版）。</p>
<p>下面的例子由<a href="https://github.com/TencentCloud/tencentcloud-sdk-java/blob/master/examples/sms/v20190711/SendSms.java">文档例子</a>简化而来：</p>
<pre><code class="language-java">@PostMapping(&quot;sendSms&quot;)
public @ResponseBody
String sendSms(@RequestParam String cellphone)
{
    String randomCode = RandomStringUtils.randomNumeric(6);
    if(Check.isEmpty(cellphone))
    {
        L.sendSmsFailed(&quot;null&quot;,randomCode,&quot;cellphone is empty&quot;);
        return toStr(ReturnCode.EMPTY_CELLPHONE);
    }
    if(Check.isInvalidCellphone(cellphone))
    {
        L.sendSmsFailed(cellphone,randomCode,&quot;cellphone is not valid.&quot;);
        return toStr(ReturnCode.INVALID_CELLPHONE);
    }
    ReturnCode s = ReturnCode.SEND_SMS_SUCCESS;
    try
    {
        SmsClient client = new SmsClient(new Credential(secretId,secretKey),&quot;&quot;);
        SendSmsRequest request = new SendSmsRequest();
        request.setSmsSdkAppid(appId);
        request.setSign(sign);
        request.setTemplateID(templateId);

        String [] templateParamSet = {randomCode};
        request.setTemplateParamSet(templateParamSet);

        String [] phoneNumbers = {&quot;+86&quot;+cellphone};
        request.setPhoneNumberSet(phoneNumbers);
        SendSmsResponse response = client.SendSms(request);

        if(response != null &amp;&amp; response.getSendStatusSet()[0].getCode().equals(&quot;Ok&quot;))
        {
            L.sendSmsSuccess(cellphone,randomCode);
            s.body(randomCode);
        }
    } catch (Exception e) {
        L.sendSmsFailed(cellphone,randomCode,e);
        s = ReturnCode.UNKNOWN_ERROR;
    }
    return toStr(s);
}
</code></pre>
<p>其中<code>appId,sign,templateID</code>分别是对应的appid，签名id与正文模板id，申请通过之后会分配的，然后随机生成六位数字的验证码。</p>
<p><code>request.setPhoneNumberSet()</code>的参数为需要发送的手机号码String数组，注意需要加上区号。发送成功的话手机会收到，失败的话请根据异常信息自行判断修改。</p>
<p>唯一要注意一下的是appid之类的数据通过<code>@Value</code>进行属性注入时，如：</p>
<pre><code class="language-java">@Controller
@RequestMapping(&quot;/&quot;)
public class SmsController {
    @Value(&quot;${tencent.secret.id}&quot;)
    private String secretId;
    ...
}
</code></pre>
<p>但是由于sign部分含有中文，所以需要进行编码转换：</p>
<pre><code class="language-java">@Value(&quot;${tencent.sign}&quot;)
private String sign;

@PostConstruct
public void init()
{
    sign = new String(sign.getBytes(StandardCharsets.ISO_8859_1),StandardCharsets.UTF_8);
}
</code></pre>
<h2 id="54-业务层与持久层">5.4 业务层与持久层</h2>
<p>由于程序中的业务层与持久层都比较简单就合并一起说了，比如业务层的saveOne方法，保存一个Worker，先利用Gson转换为Worker后直接利用<code>CrudRespository&lt;T,ID&gt;</code>提供的save方法保存：</p>
<pre><code class="language-java">public ReturnCode saveOne(String json) {
    ReturnCode s = ReturnCode.SAVE_ONE_SUCCESS;
    Worker worker = Conversion.JSONToWorker(json);
    if (Check.isEmpty(worker)) {
        L.emptyWorker();
        s = ReturnCode.EMPTY_WORKER;
    }
    else
        workerRepository.save(worker);
    return s;
}
</code></pre>
<p>另外由于<code>CrudRepository&lt;T,ID&gt;</code>的saveAll方法参数为<code>Iterable&lt;S&gt;</code>，因此可以直接保存<code>List&lt;S&gt;</code>，比如：</p>
<pre><code class="language-java">public ReturnCode saveAll(List&lt;Worker&gt; workers)
{
    workerRepository.saveAll(workers);
    return ReturnCode.SAVE_ALL_SUCCESS;
}
</code></pre>
<p>需要在控制层中把前端发送的String转换为<code>List&lt;S&gt;</code>。</p>
<h2 id="55-日志">5.5 日志</h2>
<p>日志用的是Spring Boot自带的日志系统，只是简单地配置了一下日志路径，除此之外，日志的格式自定义（因为追求整洁输出,感觉配置文件实现得不够好,因此自定义了一个工具类）。</p>
<p>比如日志截取如下：</p>
<figure data-type="image" tabindex="32"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkZTJlOGEyM2M?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>自定义了标题以及每行固定输出，前后加上了提示符，内容包括方法，级别，时间以及其他信息。</p>
<p>总的来说，除了格式化器外总共有7个类，其中L是主类，外部类只需要调用L的方法，大部分是公有静态方法，其余6个是L调用的类：</p>
<figure data-type="image" tabindex="33"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkZjBkZjJhZjM?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>如备份成功时调用：</p>
<pre><code class="language-java">public Success
{
	public static void backup()
	{
	    l.info(new FormatterBuilder().title(getTitle()).info().position().time().build());
	}
	//...
}
</code></pre>
<p>其中<code>FormatterBuilder</code>是格式化器，用来格式化输出的字符串，方法包括时间，位置，级别以及其他信息：</p>
<pre><code class="language-java">public FormatterBuilder info()
{
    return level(&quot;info&quot;);
}
public FormatterBuilder time()
{
    content(&quot;time&quot;,getCurrentTime());
    return this;
}
private FormatterBuilder level(String level)
{
    content(&quot;level&quot;,level);
    return this;
}
public FormatterBuilder cellphone(String cellphone)
{
    content(&quot;cellphone&quot;,cellphone);
    return this;
}
public FormatterBuilder message(String message)
{
    content(&quot;message&quot;,message);
    return this;
}
</code></pre>
<h2 id="56-工具类">5.6 工具类</h2>
<figure data-type="image" tabindex="34"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNkZmM3MmM1MmE?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>四个：</p>
<ul>
<li>Backup：定时数据库备份</li>
<li>Check：检查合法性，是否为空等</li>
<li>Conversion：转换类，与前端的几乎一致，利用Gson在<code>String</code>与<code>List/Map/Worker</code>之间进行转换</li>
<li>ReturnCode：返回码枚举类</li>
</ul>
<p>重点说一下备份，代码不长就直接整个类贴出来了：</p>
<pre><code class="language-java">@Component
@EnableScheduling
public class Backup {
    private static final long INTERVAL = 1000 * 3600 * 12;
    @Value(&quot;${backup.command}&quot;)
    private String command;
    @Value(&quot;${backup.path}&quot;)
    private String strPath;
    @Value(&quot;${spring.datasource.username}&quot;)
    private String username;
    @Value(&quot;${spring.datasource.password}&quot;)
    private String password;
    @Value(&quot;${spring.datasource.url}&quot;)
    private String url;
    @Value(&quot;${backup.dataTimeFormat}&quot;)
    private String dateTimeFormat;

    @Scheduled(fixedRate = INTERVAL)
    public void startBackup()
    {
        try
        {
            String[] commands = command.split(&quot;,&quot;);
            String dbname = url.substring(url.lastIndexOf(&quot;/&quot;)+1);
            commands[2] = commands[2] + username + &quot; --password=&quot; + password + &quot; &quot; + dbname + &quot; &gt; &quot; + strPath +
                    dbname + &quot;_&quot; + DateTimeFormatter.ofPattern(dateTimeFormat).format(LocalDateTime.now())+&quot;.sql&quot;;
            Path path = Paths.get(strPath);
            if(!Files.exists(path))
                Files.createDirectories(path);
            Process process = Runtime.getRuntime().exec(commands);
            process.waitFor();
            if(process.exitValue() != 0)
            {
                InputStream inputStream = process.getErrorStream();
                StringBuilder str = new StringBuilder();
                byte []b = new byte[2048];
                while(inputStream.read(b,0,2048) != -1)
                    str.append(new String(b));
                L.backupFailed(str.toString());
            }
            L.backupSuccess();
        }
        catch (IOException | InterruptedException e)
        {
            L.backupFailed(e.getMessage());
        }
    }
}
</code></pre>
<p>首先利用<code>@Value</code>获取配置文件中的值，接着在备份方法加上<code>@Scheduled</code>。<code>@Scheduled</code>是Spring Boot用于提供定时任务的注解，用于控制任务在某个指定时间执行或者每隔一段时间执行（这里是半天一次），主要有三种配置执行时间的方式：</p>
<ul>
<li>cron</li>
<li>fixedRate</li>
<li>fixedDelay</li>
</ul>
<p>这里不展开了，详细用法可以<a href="https://blog.csdn.net/qq_27525611/article/details/104083548">戳这里</a>。</p>
<p>另外在使用前需要在类上加上<code>@EnableScheduling</code>。备份时首先利用URL获取数据库名，接着拼合备份命令，注意如果本地使用win开发备份命令会与linux不同：</p>
<pre><code class="language-java">//win(未经测试，笔者在Linux上开发)
command[0]=cmd
command[1]=/c
command[2]=mysqldump -u username --password=your_password dbname &gt; backupPath+File.separator+dbname+datetimeFormmater+&quot;.sql&quot;

//linux(本地Manjaro+服务器CentOS测试通过)
command[0]=/bin/sh
command[1]=-c
command[2]=/usr/bin/mysqldump -u username --password=your_password dbname &gt; backupPath+File.separator+dbname+datetimeFormmater+&quot;.sql&quot;
</code></pre>
<p>再判断备份路径是否存在，接着利用Java自带的<code>Process</code>进行备份处理，若出错则利用其中的<code>getErrorStream()</code>获取错误信息并记录日志。</p>
<h2 id="57-配置文件">5.7 配置文件</h2>
<h3 id="571-配置文件分类">5.7.1 配置文件分类</h3>
<figure data-type="image" tabindex="35"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlMDIyNjdkZWM?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>一个总的配置文件+三个是特定环境下（开发，测试，生产）的配置文件，可以使用<code>spring.profiles.active</code>切换配置文件，比如<code>spring.profiles.active=dev</code>，注意命名有规则，中间加一杠。另外自定义的配置需要在<code>additional-spring-configuration-metadata.json</code>中添加字段（非强制，只是IDE会提示），比如：</p>
<pre><code class="language-json">&quot;properties&quot;: [
    {
        &quot;name&quot;: &quot;backup.path&quot;,
        &quot;type&quot;: &quot;java.lang.String&quot;,
        &quot;defaultValue&quot;: null
    },
]
</code></pre>
<h3 id="572-加密">5.7.2 加密</h3>
<p>都2020年了，还在配置文件中使用明文密码就不太好吧？</p>
<p>该加密了。</p>
<p>使用的是Jasypt Spring Boot组件，官方github请<a href="https://github.com/ulisesbocchio/jasypt-spring-boot">戳这里</a>。</p>
<p>用法这里就不详细介绍了，详情看笔者的另一篇博客，<a href="https://www.cnblogs.com/6b7b5fc3/p/12791351.html">戳这里</a>。</p>
<p>但是笔者实测目前最新的3.0.2版本（本文写于2020.06.05，2020.05.31作者已更新3.0.3版本，但是笔者没有测试过）会有如下问题：</p>
<pre><code class="language-bash">Description:

Failed to bind properties under 'spring.datasource.password' to java.lang.String:

    Reason: Failed to bind properties under 'spring.datasource.password' to java.lang.String

Action:

Update your application's configuration
</code></pre>
<p>解决方案以及问题详细描述<a href="https://blog.csdn.net/qq_27525611/article/details/106450385">戳这里</a>。</p>
<h1 id="6-部署与打包">6 部署与打包</h1>
<h2 id="61-前端打包">6.1 前端打包</h2>
<p>先说一下前端的打包过程，简单地说打成JAR即可跨平台运行，但是如果是特定平台的话比如Win，想打成无需额外JDK环境的EXE还是需要一些额外操作，这里简单介绍一下打包过程。</p>
<p>（如果是JDK8可以使用<code>mvn jfx:native</code>打包，这个可以很方便地直接打成DMG或者EXE，但可惜JFX11行不通，反正笔者尝试失败了，如果有大神知道如何使用<code>JavaFX-Maven-Plugin</code>或者在IDEA中使用<code>artifact</code>直接打成exe或dmg欢迎留言补充）</p>
<h3 id="611-idea一次打包">6.1.1 IDEA一次打包</h3>
<p>打包需要用到Maven插件，常用的Maven打包插件如下：</p>
<ul>
<li>mave-jar-plugin：默认的打包jar插件，生成的JR很小，但是需要把lib放置与jar相同目录下，用来打普通的JAR包</li>
<li>maven-shade-plugin：提供了两大基本功能，将依赖的jar包打包到当前jar包，能对依赖的JAR包进行重命名以及取舍过滤</li>
<li>maven-assembly-plugin：支持定制化的打包方式，更多的是对项目目录的重新组装</li>
</ul>
<p>本项目使用maven-shade-plugin打包。</p>
<p>需要先引入（引入之后可以把原来的Maven插件去掉），最新版本<a href="https://github.com/apache/maven-shade-plugin">戳这里</a>的官方github查看：</p>
<pre><code class="language-xml">&lt;build&gt;
	&lt;plugins&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
            &lt;version&gt;3.2.4&lt;/version&gt;
	            &lt;executions&gt;
	            	&lt;execution&gt;
	                    &lt;phase&gt;package&lt;/phase&gt;
	                    &lt;goals&gt;
	                        &lt;goal&gt;shade&lt;/goal&gt;
	                    &lt;/goals&gt;
	                    &lt;configuration&gt;
	                        &lt;transformers&gt;
	                            &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;
	                                &lt;mainClass&gt;xxxx.xxx.xxx.Main&lt;/mainClass&gt;
	                            &lt;/transformer&gt;
	                        &lt;/transformers&gt;
	                    &lt;/configuration&gt;
	                &lt;/execution&gt;
	            &lt;/executions&gt;
          &lt;/plugin&gt;
	&lt;/plugins&gt;
&lt;/build&gt;
</code></pre>
<p>只需要修改主类即可：</p>
<pre><code class="language-xml">&lt;mainClass&gt;xxxx.xxx.xxx.Main&lt;/mainClass&gt;
</code></pre>
<p>接着就可以从IDEA右侧栏的Maven中一键打包：</p>
<figure data-type="image" tabindex="36"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlMDY1M2I3Njg?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>这样在target下就有JAR包了，可以跨平台运行，只需提供JDK环境。</p>
<pre><code class="language-bash">java -jar xxx.jar
</code></pre>
<p>下面的两步是使用exe4j与Enigma Virtual Box打成一个单一EXE的方法，仅针对Win，使用Linux/Mac可以跳过或自行搜索其他方法。</p>
<h3 id="612-exe4j二次打包">6.1.2 exe4j二次打包</h3>
<h4 id="6121-exe4j">6.1.2.1 exe4j</h4>
<p>exe4j能集成Java应用程序到Win下的java可执行文件生成工具,无论是用于服务器还是用于GUI或者命令行的应用程序。简单地说，本项目用其将jar转换为EXE。exe4j需要JRE，从JDK9开始模块化，需要自行生成JRE，因此，需要先生成JRE再使用exe4j打包。</p>
<h4 id="6122-生成jre">6.1.2.2 生成jre</h4>
<p>各个模块的作用可以<a href="https://www.apiref.com/java11-zh/index.html">这里</a>查看：</p>
<figure data-type="image" tabindex="37"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlMDY2NWYxY2Q?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>经测试本程序所需要的模块如下：</p>
<pre><code class="language-bash">java.base,java.logging,java.net.http,javafx.base,javafx.controls,javafx.fxml,javafx.graphics,java.sql,java.management
</code></pre>
<p>切换到JDK目录下，使用<code>jlink</code>生成JRE：</p>
<pre><code class="language-bash">jlink --module-path jmods --add-modules 
java.base,java.logging,java.net.http,javafx.base,javafx.controls,javafx.fxml,javafx.graphics,java.sql,java.management
--output jre
</code></pre>
<p>由于OpenJDK11不自带JavaFX，需要<a href="https://gluonhq.com/products/javafx/">戳这里</a>自行下载Win平台的JFX jmods，并移动到JDK的<code>jmods</code>目录下。生成的JRE大小为91M：</p>
<figure data-type="image" tabindex="38"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlMjM5MjBlZTk?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>如果实在不清楚使用哪一些模块可以使用全部模块，但是不建议：</p>
<pre><code class="language-bash">jlink --module-path jmods --add-modules 
java.base,java.compiler,java.datatransfer,java.xml,java.prefs,java.desktop,java.instrument,java.logging,java.management,java.security.sasl,java.naming,java.rmi,java.management.rmi,java.net.http,java.scripting,java.security.jgss,java.transaction.xa,java.sql,java.sql.rowset,java.xml.crypto,java.se,java.smartcardio,jdk.accessibility,jdk.internal.vm.ci,jdk.management,jdk.unsupported,jdk.internal.vm.compiler,jdk.aot,jdk.internal.jvmstat,jdk.attach,jdk.charsets,jdk.compiler,jdk.crypto.ec,jdk.crypto.cryptoki,jdk.crypto.mscapi,jdk.dynalink,jdk.internal.ed,jdk.editpad,jdk.hotspot.agent,jdk.httpserver,jdk.internal.le,jdk.internal.opt,jdk.internal.vm.compiler.management,jdk.jartool,jdk.javadoc,jdk.jcmd,jdk.management.agent,jdk.jconsole,jdk.jdeps,jdk.jdwp.agent,jdk.jdi,jdk.jfr,jdk.jlink,jdk.jshell,jdk.jsobject,jdk.jstatd,jdk.localedata,jdk.management.jfr,jdk.naming.dns,jdk.naming.rmi,jdk.net,jdk.pack,jdk.rmic,jdk.scripting.nashorn,jdk.scripting.nashorn.shell,jdk.sctp,jdk.security.auth,jdk.security.jgss,jdk.unsupported.desktop,jdk.xml.dom,jdk.zipfs,javafx.web,javafx.swing,javafx.media,javafx.graphics,javafx.fxml,javafx.controls,javafx.base 
--output jre
</code></pre>
<p>大小为238M：</p>
<figure data-type="image" tabindex="39"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlMjVjMDIyOTk?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<h4 id="6123-exe4j打包">6.1.2.3 exe4j打包</h4>
<p>exe4j使用参考<a href="https://zhuanlan.zhihu.com/p/82540739">这里</a>，首先一开始的界面应该是这样的：</p>
<figure data-type="image" tabindex="40"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlMmE0ZjRjNzI?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>配置文件首次运行是没有的，next即可。</p>
<p>选择JAR in EXE mode：</p>
<figure data-type="image" tabindex="41"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlMjc0MjhkNzM?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>填入名称与输出目录：</p>
<figure data-type="image" tabindex="42"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlMmRmNjZhMWE?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>这里的类型为GUI application，填上可执行文件的名称，选择图标路径，勾选允许单个应用实例运行：</p>
<figure data-type="image" tabindex="43"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlMzAzNDRlY2E?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>重定向这里可以选择标准输出流与标准错误流的输出目录，不需要的话默认即可：</p>
<figure data-type="image" tabindex="44"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlNDMzZmVhYWE?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>64位Win需要勾选生成64位的可执行文件：</p>
<figure data-type="image" tabindex="45"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlNDYwZmFlODI?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>接着是Java类与JRE路径设置：</p>
<figure data-type="image" tabindex="46"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlNGNhMmI5Y2Y?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>选择IDEA生成的JAR，接着填上主类路径：</p>
<figure data-type="image" tabindex="47"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlNTBhYTE5NjY?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>设置jre的最低支持与最高支持版本：</p>
<figure data-type="image" tabindex="48"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlNTVkZmNlMDI?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>下一步是指定JRE搜索路径，首先把默认的三个位置删除：</p>
<figure data-type="image" tabindex="49"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlNWM1ZDNhODY?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>接着选择之前生成的JRE，把JRE放在与JAR同一目录下，路径填上当前目录下的JRE：</p>
<figure data-type="image" tabindex="50"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlNjk1MDg0Y2Q?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>接下来全next即可，完成后会提示exe4j has finished，直接运行测试一遍：</p>
<figure data-type="image" tabindex="51"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlNmIwMzg2Mjg?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>首先会提示一遍这是用exe4j生成的：</p>
<figure data-type="image" tabindex="52"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlNmRhYjk2ODM?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>若没有缺少模块应该就可以正常启动了，有缺少模块的话会默认在当前exe路径生成一个error.log，查看并添加对应模块再次使用jlink生成jre，并使用exe4j再次打包。</p>
<h3 id="613-enigma-virtual-box三次打包">6.1.3 Enigma Virtual Box三次打包</h3>
<p>使用exe4j打包后，虽然是也可以直接运行了，但是JRE太大，而且笔者这种有强迫症非得装进一个EXE。所幸笔者之前用过Enigma Virtual Box这个打包工具，能把所有文件打包为一个独立的EXE。</p>
<p>使用很简单，首先添加exe4j打包出来的EXE：</p>
<figure data-type="image" tabindex="53"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlNzQ1ZGZkMzY?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>接着新建一个jre目录，添加上一步生成的jre：</p>
<figure data-type="image" tabindex="54"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlN2RiNTU1ZGQ?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<figure data-type="image" tabindex="55"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlOTM1NzI3NzU?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<figure data-type="image" tabindex="56"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlOTM1MzI1YTM?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>最后选择压缩文件：</p>
<figure data-type="image" tabindex="57"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlOTc5YzhiZDQ?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>打包出来的单独exe大小为65M，相比起exe4j还要带上的89M的jre，已经节省了空间。</p>
<figure data-type="image" tabindex="58"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlOWM0NWRjMzI?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<h2 id="62-后端部署">6.2 后端部署</h2>
<p>后端部署的方式也简单，采用WAR部署的方式，若项目为JAR包打包可以自行转换为WAR包，具体转换方式不难请自行搜索。由于Web服务器为Tomcat，因此直接把WAR包放置于webapps下即可，其他Web服务器自请自行搜索。</p>
<p>当然也可以使用Docker部署，但需要使用JAR而不是WAR，具体方式自行搜索。</p>
<h1 id="7-运行">7 运行</h1>
<p>本项目已经打包，前端包括jar与exe，后端包括jar与war，首先把后端运行（先开启数据库服务）：</p>
<p>使用jar：</p>
<pre><code class="language-bash">java -jar Backend.jar
</code></pre>
<p>使用war直接放到Tomcat的webapps下然后到bin下：</p>
<pre><code class="language-bash">./startup.sh
</code></pre>
<p>接着运行前端，Windows的话可以直接运行exe，当然也可以jar，Linux的话jar：</p>
<pre><code class="language-bash">java -jar Frontend.jar
</code></pre>
<p>若运行失败可以用IDEA打开项目直接在IDEA中运行或者自行打包运行。</p>
<h1 id="8-注意事项">8 注意事项</h1>
<h2 id="81-路径问题">8.1 路径问题</h2>
<p>对于资源文件千万千万不要直接使用什么相对路径或绝对路径，比如：</p>
<pre><code class="language-java">String path1 = &quot;/xxx/xxx/xxx/xx.png&quot;;
String path2 = &quot;xxx/xx.jpg&quot;;
</code></pre>
<p>这样会有很多问题，比如有可能在IDEA中直接运行与打成jar包运行的结果不一致，路径读取不了，另外还可能会出现平台问题，众所周知Linux的路径分隔符与Windows的不一致。所以，对于资源文件，统一使用如下方式获取：</p>
<pre><code class="language-java">String path = getClass().getResource(&quot;/image/xx.png&quot;);
</code></pre>
<p>其中<code>image</code>直接位于<code>resources</code>资源文件夹下。其他类似，也就是说这里的<code>/</code>代表在<code>resources</code>下。</p>
<h2 id="82-https">8.2 HTTPS</h2>
<p>默认没有提供HTTPS，证书文件没有摆上去，走的是本地8080端口。</p>
<p>如果需要自定义HTTPS请修改前端部分的</p>
<ul>
<li><code>com.test.network.OKHTTP</code></li>
<li><code>resources/key/pem.pem</code></li>
</ul>
<p>同时后端需要修改Tomcat的<code>server.xml</code>。</p>
<p>有关OkHttp使用HTTPS的文章有不少，但是大部分都是仅仅写了前端如何配置HTTPS的，没有提到后端如何部署，可以参考笔者的<a href="https://blog.csdn.net/qq_27525611/article/details/105184098">这篇文章</a>，包含Tomcat的配置教程。</p>
<h2 id="83-配置文件加密">8.3 配置文件加密</h2>
<p>配置文件使用了jasypt-spring-boot开源组件进行加密，设置口令可以有三种方式设置：</p>
<ul>
<li>命令行参数</li>
<li>应用环境变量</li>
<li>系统环境变量</li>
</ul>
<p>目前最新的版本为3.0.3（2020.05.31更新3.0.3 ，笔者之前使用3.0.2的版本进行加密时本地测试没问题，但是部署到服务器上老是提示找不到口令，无奈只好使用旧一点的2.x版本，但是新版本出了后笔者尝试过部署到本地Tomcat没有问题但是没有部署到服务器上），建议使用最新版本进行部署：</p>
<figure data-type="image" tabindex="59"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlYTI0MGEwNGQ?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>毕竟前后跨度挺大的，虽然说这是小的bug修复，但是还是建议试试，估计不会有3.0.2的问题了。</p>
<p>另外对于含有中文的字段记得进行编码转换：</p>
<pre><code class="language-java">str = new String(str.getBytes(StandardCharsets.ISO_8859_1),StandardCharsets.UTF_8);)
</code></pre>
<p>另外笔者已写好了测试文件，直接首先替换掉配置文件原来的密文，填上明文重新加密：<br>
<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlYjJlZDcyZDY?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></p>
<p>注意如果没有在配置文件中设置<code>jasypt.encryptor.password</code>的话可以在运行配置中设置VM Options（建议不要把口令直接写在配置文件中，当然这个默认是使用PBE加密，非对称加密可以使用<code>jasypt.encryptor.private-key-string</code>或<code>jasypt.encryptor.private-key-location</code>）：</p>
<figure data-type="image" tabindex="60"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlYjQ3ZDYwYjI?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<h2 id="84-键盘事件">8.4 键盘事件</h2>
<p>添加键盘事件可以使用如下代码：</p>
<pre><code class="language-java">scene.getAccelerators().put(new KeyCodeCombination(KeyCode.ENTER), ()-&gt;{xxx});
//getAccelerators返回ObservableMap&lt;KeyCombination, Runnable&gt;
</code></pre>
<p>响应之前需要让parent获取焦点：</p>
<pre><code class="language-java">parent.requestFocus();
</code></pre>
<h2 id="85-数据库">8.5 数据库</h2>
<p>默认使用的数据库名为<code>app_test</code>，用户名<code>test_user</code>，密码<code>test_password</code>，<code>resources</code>下有一个<code>init.sql</code>，直接使用MySQL导入即可。</p>
<figure data-type="image" tabindex="61"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlYmU2NWFmNDI?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>
<h2 id="86-验证码">8.6 验证码</h2>
<p>默认没有自带验证码功能，由于涉及隐私问题故没有开放。</p>
<p>如果像笔者一样使用腾讯云的短信API，直接修改配置文件中的对应属性即可，建议加密。</p>
<p>如果使用其他API请自行对接，前端需要修改的部分包括：</p>
<ul>
<li><code>com.test.network.OKHTTP</code></li>
<li><code>com.test.network.request.SendSmsRequest</code></li>
<li><code>com.test.network.requestBuilder.SendSmsRequestBuilder</code></li>
<li><code>com.test.controller.start.RetrievePasswordController</code></li>
</ul>
<p>后端需要修改的部分：</p>
<ul>
<li><code>com.test.controller.SmsController</code></li>
</ul>
<p>需要的话可以参考笔者的腾讯云短信API使用或者自行搜索其他短信验证API。一些写在配置文件中的API需要的密钥等信息强烈</p>
<h1 id="9-源码">9 源码</h1>
<p>前后端完整代码以及打包程序：</p>
<ul>
<li><a href="https://github.com/2293736867/ASmallSalaryManagementSystem">Github</a></li>
<li><a href="https://gitee.com/u6b7b5fc3/ASmallSalaryManagementSystem">码云</a></li>
</ul>
<h1 id="10-项目不足之处">10 项目不足之处</h1>
<p>其实整个项目还有很多的不足之处，比如：</p>
<ul>
<li>前端的部分Scene切换有问题</li>
<li>可以使用Jackson代替Gson来换取更快的转换速度</li>
<li>没有缓存机制</li>
<li>前端日志不能发送到后端分析</li>
<li>可以使用二进制代替JSON实现更快的传输</li>
</ul>
<p>不过目前暂时不考虑更新，如果有读者有自己的想法可以按需修改，这里提一下修改的思路。</p>
<h1 id="11-参考">11 参考</h1>
<p>1、<a href="https://blog.csdn.net/yangguosb/article/details/80619481">CSDN-maven-shade-plugin介绍及使用</a></p>
<p>2、<a href="https://blog.csdn.net/qq_32736999/article/details/93395246">CSDN-Maven3种打包方式之一maven-assembly-plugin的使用</a></p>
<p>3、<a href="https://zhuanlan.zhihu.com/p/82540739">知乎-制作包含Java 11和JavaFX的JRE</a></p>
<p>4、<a href="https://blog.csdn.net/zzzgd_666/article/details/80756430">CSDN-使用exe4j将java文件打成exe文件运行详细教程</a></p>
<p>5、<a href="https://github.com/ulisesbocchio/jasypt-spring-boot/issues/218">Github-jasypt-spring-boot issue</a></p>
<p>6、<a href="https://www.w3cschool.cn/java/javafx-line.html">w3cschool-JavaFX</a></p>
<p>7、<a href="https://www.jianshu.com/p/045f95c008a0">简书-Linux Tomcat+Openssl单向/双向认证</a></p>
<p>如果觉得文章好看，欢迎点赞。</p>
<p>同时欢迎关注微信公众号：氷泠之路。</p>
<figure data-type="image" tabindex="62"><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAyMC82LzE1LzE3MmI2ZTNlYjcyMzM1NGI?x-oss-process=image/format,png" alt="在这里插入图片描述" loading="lazy"></figure>

                </div>
                <div class="clear"></div>
              </section>
            </article>
            <div class="clear"></div>

            <section class="related section">
              
              <article class="prev grid-50 tablet-grid-50 grid-parent">
                <div class="thumb cover lazy loaded" style="background-image: url('https://2293736867.github.io/post-images/can-ku-you-xi.jpg');"></div>
                 <a href="https://2293736867.github.io/post/can-ku-you-xi/" class="full-link"></a>
                 <div class="info">
                  <time datetime="2020-06-07">2020-06-07</time>
                  <h4 class="title white no-margin">残酷游戏</h4>
                </div>
                 <span class="epcl-button red">
                  <img src="https://2293736867.github.io/media/images/left-arrow.svg" width="15" alt="Left Arrow">
                </span>
                <div class="overlay"></div>
              </article>
              
              
              <article class="next grid-50 tablet-grid-50 grid-parent">
                <div class="thumb cover lazy loaded" style="background-image: url('https://2293736867.github.io/post-images/jfx11mavenidea-fa-bu-kua-ping-tai-ying-yong-de-wan-mei-jie-jue-fang-an.png');"></div>
                 <a href="https://2293736867.github.io/post/jfx11mavenidea-fa-bu-kua-ping-tai-ying-yong-de-wan-mei-jie-jue-fang-an/" class="full-link"></a>
                 <div class="info">
                  <time datetime="2020-06-03">2020-06-03</time>
                  <h4 class="title white no-margin">JFX11+Maven+IDEA 发布跨平台应用的完美解决方案</h4>
                </div>
                 <span class="epcl-button red">
                  <img src="https://2293736867.github.io/media/images/right-arrow.svg" width="15" alt="Left Arrow">
                </span>
                <div class="overlay"></div>
              </article>
              

                <div class="clear"></div>
            </section>

              <div class="clear"></div>
              
            
              <div id="comments" class="bg-white hosted ">
                
                
                  <!-- jsDelivr -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqusjs.css">
<script src="https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqus.js"></script>

<div id="disqus_thread"></div>
<div class="clear"></div>
<script>
var options = {
  shortname: '',
  apikey: 'x4w0ijIgKdycYEPacfY9sSDFNA7k57W2vEw65a3PRFFckEGUqw6zvedonEtd93DN',
}
if ('') {
  options.api = ''
}
var dsqjs = new DisqusJS(options)
</script>

                
              </div>
            

            </div>
          </div>
      </main>

          <footer id="footer" class="grid-container">
        <div class="widgets row gradient-effect">
            <div class="default-sidebar border-effect">
              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="tag_cloud-2" class="widget widget_epcl_posts_thumbs underline-effect">
                  <h4 class="widget-title title white bordered">最新文章</h4>
                  
                  
                  <article class="item post-0 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-304-qi/" class="thumb hover-effect">
                      <span class="fullimage cover" style="display:block;border-radius:50%;background-image: url('https://2293736867.github.io/post-images/mei-ri-fen-xiang-di-304-qi.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2021-04-14">2021-04-14</time>
                      <h4 class="title usmall">
                        <a href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-304-qi/">每日分享 第304期</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  <article class="item post-1 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://2293736867.github.io/post/guan-yu-vimneovimspacevim-de-yi-xie-si-kao/" class="thumb hover-effect">
                      <span class="fullimage cover" style="display:block;border-radius:50%;background-image: url('https://2293736867.github.io/post-images/guan-yu-vimneovimspacevim-de-yi-xie-si-kao.jpeg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2021-04-13">2021-04-13</time>
                      <h4 class="title usmall">
                        <a href="https://2293736867.github.io/post/guan-yu-vimneovimspacevim-de-yi-xie-si-kao/">关于Vim/Neovim/SpaceVim的一些思考</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  <article class="item post-2 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://2293736867.github.io/post/mei-ri-yi-ju-301-350-qi-he-ji/" class="thumb hover-effect">
                      <span class="fullimage cover" style="display:block;border-radius:50%;background-image: url('https://2293736867.github.io/post-images/mei-ri-yi-ju-301-350-qi-he-ji.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2021-04-13">2021-04-13</time>
                      <h4 class="title usmall">
                        <a href="https://2293736867.github.io/post/mei-ri-yi-ju-301-350-qi-he-ji/">每日一句 301-350期合集</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  <div class="clear"></div>
                </section>
              </div>

              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="tag_cloud-2" class="widget widget_tag_cloud underline-effect">
                  <h4 class="widget-title title white bordered">标签云</h4>
                  <div class="tagcloud">
                    
                      <a href="https://2293736867.github.io/tag/e5akU9EUb/" class="ctag ctag-0 ctag-e5akU9EUb" aria-label="">每日分享</a>
                    
                      <a href="https://2293736867.github.io/tag/VVnjOjF_K/" class="ctag ctag-1 ctag-VVnjOjF_K" aria-label="">Vim</a>
                    
                      <a href="https://2293736867.github.io/tag/-AktfIpz8/" class="ctag ctag-2 ctag--AktfIpz8" aria-label="">Java</a>
                    
                      <a href="https://2293736867.github.io/tag/wtA4qyubx/" class="ctag ctag-3 ctag-wtA4qyubx" aria-label="">Linux</a>
                    
                      <a href="https://2293736867.github.io/tag/P6coYUl8A/" class="ctag ctag-4 ctag-P6coYUl8A" aria-label="">软件测试</a>
                    
                      <a href="https://2293736867.github.io/tag/Zh36z1JpD/" class="ctag ctag-5 ctag-Zh36z1JpD" aria-label="">Switch</a>
                    
                      <a href="https://2293736867.github.io/tag/iwdKt-vEi/" class="ctag ctag-6 ctag-iwdKt-vEi" aria-label="">Windows</a>
                    
                      <a href="https://2293736867.github.io/tag/SqY3UeW8b/" class="ctag ctag-7 ctag-SqY3UeW8b" aria-label="">Github</a>
                    
                      <a href="https://2293736867.github.io/tag/QJqlomFg9/" class="ctag ctag-8 ctag-QJqlomFg9" aria-label="">Slf4j</a>
                    
                      <a href="https://2293736867.github.io/tag/kAbR5fhGrj/" class="ctag ctag-9 ctag-kAbR5fhGrj" aria-label="">Log</a>
                    
                      <a href="https://2293736867.github.io/tag/eB6hSy8EZ/" class="ctag ctag-10 ctag-eB6hSy8EZ" aria-label="">Kotlin</a>
                    
                      <a href="https://2293736867.github.io/tag/x6hezqu0h/" class="ctag ctag-11 ctag-x6hezqu0h" aria-label="">Github Pages</a>
                    
                      <a href="https://2293736867.github.io/tag/TSVR1gTbAW/" class="ctag ctag-12 ctag-TSVR1gTbAW" aria-label="">DisqusJS</a>
                    
                      <a href="https://2293736867.github.io/tag/KG_EpW3KL/" class="ctag ctag-13 ctag-KG_EpW3KL" aria-label="">Gridea</a>
                    
                      <a href="https://2293736867.github.io/tag/hmN5f1Dgf/" class="ctag ctag-14 ctag-hmN5f1Dgf" aria-label="">JVM</a>
                    
                      <a href="https://2293736867.github.io/tag/jEhLpTJ4y/" class="ctag ctag-15 ctag-jEhLpTJ4y" aria-label="">Kotlin DSL</a>
                    
                      <a href="https://2293736867.github.io/tag/jRXlnJ0Cl/" class="ctag ctag-16 ctag-jRXlnJ0Cl" aria-label="">Gradle</a>
                    
                      <a href="https://2293736867.github.io/tag/jLOEqgo2m/" class="ctag ctag-17 ctag-jLOEqgo2m" aria-label="">Spring Boot</a>
                    
                      <a href="https://2293736867.github.io/tag/j27TsowsQ/" class="ctag ctag-18 ctag-j27TsowsQ" aria-label="">SHA256</a>
                    
                      <a href="https://2293736867.github.io/tag/1bPjb7633/" class="ctag ctag-19 ctag-1bPjb7633" aria-label="">Redis</a>
                    
                      <a href="https://2293736867.github.io/tag/HhAuEu6wC/" class="ctag ctag-20 ctag-HhAuEu6wC" aria-label="">Demo</a>
                    
                      <a href="https://2293736867.github.io/tag/4z8YfVN_z/" class="ctag ctag-21 ctag-4z8YfVN_z" aria-label="">Docker</a>
                    
                      <a href="https://2293736867.github.io/tag/zMdXcdRde/" class="ctag ctag-22 ctag-zMdXcdRde" aria-label="">MySQL</a>
                    
                      <a href="https://2293736867.github.io/tag/qkGQwVHv8/" class="ctag ctag-23 ctag-qkGQwVHv8" aria-label="">IDEA</a>
                    
                      <a href="https://2293736867.github.io/tag/k_kTITP45/" class="ctag ctag-24 ctag-k_kTITP45" aria-label="">WebStorm</a>
                    
                      <a href="https://2293736867.github.io/tag/OykyL0ueI/" class="ctag ctag-25 ctag-OykyL0ueI" aria-label="">Vue3</a>
                    
                      <a href="https://2293736867.github.io/tag/lAlW3LzZy/" class="ctag ctag-26 ctag-lAlW3LzZy" aria-label="">Vite</a>
                    
                      <a href="https://2293736867.github.io/tag/U8vH4mq52/" class="ctag ctag-27 ctag-U8vH4mq52" aria-label="">Chrome</a>
                    
                      <a href="https://2293736867.github.io/tag/3qNOu3uvC/" class="ctag ctag-28 ctag-3qNOu3uvC" aria-label="">pyenv</a>
                    
                      <a href="https://2293736867.github.io/tag/28CF6BHsq/" class="ctag ctag-29 ctag-28CF6BHsq" aria-label="">Python</a>
                    
                      <a href="https://2293736867.github.io/tag/beuZIsL3V/" class="ctag ctag-30 ctag-beuZIsL3V" aria-label="">VirtualBox</a>
                    
                      <a href="https://2293736867.github.io/tag/LfPbGAMCs/" class="ctag ctag-31 ctag-LfPbGAMCs" aria-label="">Java Web</a>
                    
                      <a href="https://2293736867.github.io/tag/vBuId7yVdn/" class="ctag ctag-32 ctag-vBuId7yVdn" aria-label="">Android</a>
                    
                      <a href="https://2293736867.github.io/tag/HaIBKIG-Y/" class="ctag ctag-33 ctag-HaIBKIG-Y" aria-label="">Debian</a>
                    
                      <a href="https://2293736867.github.io/tag/fFCOUCKJji/" class="ctag ctag-34 ctag-fFCOUCKJji" aria-label="">MyCLI</a>
                    
                      <a href="https://2293736867.github.io/tag/ODfvYwg3O/" class="ctag ctag-35 ctag-ODfvYwg3O" aria-label="">地图</a>
                    
                      <a href="https://2293736867.github.io/tag/YdNb8nB1n/" class="ctag ctag-36 ctag-YdNb8nB1n" aria-label="">Element-Plus</a>
                    
                      <a href="https://2293736867.github.io/tag/87dRXt1l_8/" class="ctag ctag-37 ctag-87dRXt1l_8" aria-label="">Echarts</a>
                    
                      <a href="https://2293736867.github.io/tag/TFZz0NHYM/" class="ctag ctag-38 ctag-TFZz0NHYM" aria-label="">Token</a>
                    
                      <a href="https://2293736867.github.io/tag/v6JZElgCrM/" class="ctag ctag-39 ctag-v6JZElgCrM" aria-label="">ECC</a>
                    
                      <a href="https://2293736867.github.io/tag/sYkFqGm0dQ/" class="ctag ctag-40 ctag-sYkFqGm0dQ" aria-label="">ECDSA</a>
                    
                      <a href="https://2293736867.github.io/tag/8dOYqqfXPD/" class="ctag ctag-41 ctag-8dOYqqfXPD" aria-label="">Auth0</a>
                    
                      <a href="https://2293736867.github.io/tag/bK7AXA8PC/" class="ctag ctag-42 ctag-bK7AXA8PC" aria-label="">Vue.js</a>
                    
                      <a href="https://2293736867.github.io/tag/NxCZbHQqot/" class="ctag ctag-43 ctag-NxCZbHQqot" aria-label="">Node.js</a>
                    
                      <a href="https://2293736867.github.io/tag/Nr-J-3R61V/" class="ctag ctag-44 ctag-Nr-J-3R61V" aria-label="">SHA</a>
                    
                      <a href="https://2293736867.github.io/tag/7QobdEpAB/" class="ctag ctag-45 ctag-7QobdEpAB" aria-label="">Git</a>
                    
                      <a href="https://2293736867.github.io/tag/lE7-ZBoCn/" class="ctag ctag-46 ctag-lE7-ZBoCn" aria-label="">MongoDB</a>
                    
                      <a href="https://2293736867.github.io/tag/jM1IwIS2X/" class="ctag ctag-47 ctag-jM1IwIS2X" aria-label="">Spring</a>
                    
                      <a href="https://2293736867.github.io/tag/mIpAXBTpr/" class="ctag ctag-48 ctag-mIpAXBTpr" aria-label="">虚拟机</a>
                    
                      <a href="https://2293736867.github.io/tag/PPNnoV579/" class="ctag ctag-49 ctag-PPNnoV579" aria-label="">CUDA</a>
                    
                      <a href="https://2293736867.github.io/tag/eGsE7XySYo/" class="ctag ctag-50 ctag-eGsE7XySYo" aria-label="">PyTorch</a>
                    
                      <a href="https://2293736867.github.io/tag/RoCvXhPfH/" class="ctag ctag-51 ctag-RoCvXhPfH" aria-label="">NTFS</a>
                    
                      <a href="https://2293736867.github.io/tag/SjeU3w4_d/" class="ctag ctag-52 ctag-SjeU3w4_d" aria-label="">BootstrapVue</a>
                    
                      <a href="https://2293736867.github.io/tag/94FcDb__B/" class="ctag ctag-53 ctag-94FcDb__B" aria-label="">Vue</a>
                    
                      <a href="https://2293736867.github.io/tag/j4BuDeUjQ/" class="ctag ctag-54 ctag-j4BuDeUjQ" aria-label="">MyBaits</a>
                    
                      <a href="https://2293736867.github.io/tag/MD4_3l9-E/" class="ctag ctag-55 ctag-MD4_3l9-E" aria-label="">Manjaro</a>
                    
                      <a href="https://2293736867.github.io/tag/FaFerPQym/" class="ctag ctag-56 ctag-FaFerPQym" aria-label="">终端美化</a>
                    
                      <a href="https://2293736867.github.io/tag/vMaxTlWsr/" class="ctag ctag-57 ctag-vMaxTlWsr" aria-label="">Nvidia</a>
                    
                      <a href="https://2293736867.github.io/tag/4fbWA3FjM/" class="ctag ctag-58 ctag-4fbWA3FjM" aria-label="">Matlab</a>
                    
                      <a href="https://2293736867.github.io/tag/BC-AL9W6w/" class="ctag ctag-59 ctag-BC-AL9W6w" aria-label="">Oracle</a>
                    
                      <a href="https://2293736867.github.io/tag/U_PXoCTJu/" class="ctag ctag-60 ctag-U_PXoCTJu" aria-label="">JDBCTemplate</a>
                    
                      <a href="https://2293736867.github.io/tag/tpJlWuxg-t/" class="ctag ctag-61 ctag-tpJlWuxg-t" aria-label="">HTTPS</a>
                    
                      <a href="https://2293736867.github.io/tag/R1SdHxPlR/" class="ctag ctag-62 ctag-R1SdHxPlR" aria-label="">Maven</a>
                    
                      <a href="https://2293736867.github.io/tag/i2hWOKTzb/" class="ctag ctag-63 ctag-i2hWOKTzb" aria-label="">七夕快乐</a>
                    
                      <a href="https://2293736867.github.io/tag/lhG453lfc/" class="ctag ctag-64 ctag-lhG453lfc" aria-label="">JetBrains</a>
                    
                      <a href="https://2293736867.github.io/tag/6gn0AkH2Q/" class="ctag ctag-65 ctag-6gn0AkH2Q" aria-label="">Hadoop</a>
                    
                      <a href="https://2293736867.github.io/tag/iPJJVQ6jY/" class="ctag ctag-66 ctag-iPJJVQ6jY" aria-label="">CentOS</a>
                    
                      <a href="https://2293736867.github.io/tag/iihFN8FL0/" class="ctag ctag-67 ctag-iihFN8FL0" aria-label="">Jupyter</a>
                    
                      <a href="https://2293736867.github.io/tag/Q0QnSl8as/" class="ctag ctag-68 ctag-Q0QnSl8as" aria-label="">设计模式</a>
                    
                      <a href="https://2293736867.github.io/tag/YMPVdyUgq/" class="ctag ctag-69 ctag-YMPVdyUgq" aria-label="">Capslock+</a>
                    
                      <a href="https://2293736867.github.io/tag/wz4wl2haW/" class="ctag ctag-70 ctag-wz4wl2haW" aria-label="">激活</a>
                    
                      <a href="https://2293736867.github.io/tag/WbQ1chYU2I/" class="ctag ctag-71 ctag-WbQ1chYU2I" aria-label="">Hello World</a>
                    
                      <a href="https://2293736867.github.io/tag/Zp8szr4lB/" class="ctag ctag-72 ctag-Zp8szr4lB" aria-label="">Jar</a>
                    
                      <a href="https://2293736867.github.io/tag/yCD9r2xgw/" class="ctag ctag-73 ctag-yCD9r2xgw" aria-label="">HTTP Client</a>
                    
                      <a href="https://2293736867.github.io/tag/bF2mL6IvE/" class="ctag ctag-74 ctag-bF2mL6IvE" aria-label="">HTTP/2</a>
                    
                      <a href="https://2293736867.github.io/tag/orx4wZc0f/" class="ctag ctag-75 ctag-orx4wZc0f" aria-label="">Tomcat</a>
                    
                      <a href="https://2293736867.github.io/tag/AdS9f37e0/" class="ctag ctag-76 ctag-AdS9f37e0" aria-label="">注孤生</a>
                    
                      <a href="https://2293736867.github.io/tag/j0fdg3Cut/" class="ctag ctag-77 ctag-j0fdg3Cut" aria-label="">JFX</a>
                    
                      <a href="https://2293736867.github.io/tag/o5hKqf9Ap/" class="ctag ctag-78 ctag-o5hKqf9Ap" aria-label="">Music</a>
                    
                      <a href="https://2293736867.github.io/tag/bFNak4fnm/" class="ctag ctag-79 ctag-bFNak4fnm" aria-label="">OkHttp</a>
                    
                      <a href="https://2293736867.github.io/tag/LO227Db0V/" class="ctag ctag-80 ctag-LO227Db0V" aria-label="">Powerlevel10K</a>
                    
                      <a href="https://2293736867.github.io/tag/hsNVKS9Qq/" class="ctag ctag-81 ctag-hsNVKS9Qq" aria-label="">Compress</a>
                    
                      <a href="https://2293736867.github.io/tag/dvWKgSydX/" class="ctag ctag-82 ctag-dvWKgSydX" aria-label="">unzip</a>
                    
                      <a href="https://2293736867.github.io/tag/l6qOxzmkS/" class="ctag ctag-83 ctag-l6qOxzmkS" aria-label="">TP6</a>
                    
                      <a href="https://2293736867.github.io/tag/t_WSDKPh7/" class="ctag ctag-84 ctag-t_WSDKPh7" aria-label="">PHP</a>
                    
                      <a href="https://2293736867.github.io/tag/OBGyotm1E9/" class="ctag ctag-85 ctag-OBGyotm1E9" aria-label="">JRebel</a>
                    
                      <a href="https://2293736867.github.io/tag/aicrp5v2D/" class="ctag ctag-86 ctag-aicrp5v2D" aria-label="">个人博客</a>
                    
                      <a href="https://2293736867.github.io/tag/ECj8IAI_Y/" class="ctag ctag-87 ctag-ECj8IAI_Y" aria-label="">Zend Studio</a>
                    
                      <a href="https://2293736867.github.io/tag/-g6dgYxeO/" class="ctag ctag-88 ctag--g6dgYxeO" aria-label="">Apache</a>
                    
                      <a href="https://2293736867.github.io/tag/ErQ7EACbc/" class="ctag ctag-89 ctag-ErQ7EACbc" aria-label="">SSL</a>
                    
                      <a href="https://2293736867.github.io/tag/eT8Xr7OEa/" class="ctag ctag-90 ctag-eT8Xr7OEa" aria-label="">SCP</a>
                    
                      <a href="https://2293736867.github.io/tag/honQAnetP/" class="ctag ctag-91 ctag-honQAnetP" aria-label="">SSH</a>
                    
                      <a href="https://2293736867.github.io/tag/EpuvEnzD6/" class="ctag ctag-92 ctag-EpuvEnzD6" aria-label="">Nginx</a>
                    
                      <a href="https://2293736867.github.io/tag/qR5NhsqP6K/" class="ctag ctag-93 ctag-qR5NhsqP6K" aria-label="">acme.sh</a>
                    
                      <a href="https://2293736867.github.io/tag/wfF83Rkm0/" class="ctag ctag-94 ctag-wfF83Rkm0" aria-label="">jQuery</a>
                    
                      <a href="https://2293736867.github.io/tag/iNele6Dhd/" class="ctag ctag-95 ctag-iNele6Dhd" aria-label="">Android Studio</a>
                    
                      <a href="https://2293736867.github.io/tag/TwsilcwD0/" class="ctag ctag-96 ctag-TwsilcwD0" aria-label="">CMake</a>
                    
                      <a href="https://2293736867.github.io/tag/GGPqmyDEU/" class="ctag ctag-97 ctag-GGPqmyDEU" aria-label="">GCC</a>
                    
                      <a href="https://2293736867.github.io/tag/Cy8VujzGx/" class="ctag ctag-98 ctag-Cy8VujzGx" aria-label="">PyCharm</a>
                    
                      <a href="https://2293736867.github.io/tag/LwvWGj4Ip/" class="ctag ctag-99 ctag-LwvWGj4Ip" aria-label="">熵权可拓物元模型</a>
                    
                      <a href="https://2293736867.github.io/tag/DZ5E1trvJ/" class="ctag ctag-100 ctag-DZ5E1trvJ" aria-label="">AC</a>
                    
                      <a href="https://2293736867.github.io/tag/sHFJEY1cE/" class="ctag ctag-101 ctag-sHFJEY1cE" aria-label="">正则表达式</a>
                    
                      <a href="https://2293736867.github.io/tag/V7ARPGm-S/" class="ctag ctag-102 ctag-V7ARPGm-S" aria-label="">Grub</a>
                    
                      <a href="https://2293736867.github.io/tag/OQzDJDrvg/" class="ctag ctag-103 ctag-OQzDJDrvg" aria-label="">软件工程</a>
                    
                      <a href="https://2293736867.github.io/tag/AdtivoET7/" class="ctag ctag-104 ctag-AdtivoET7" aria-label="">Tools</a>
                    
                      <a href="https://2293736867.github.io/tag/XYwHTUWyVk/" class="ctag ctag-105 ctag-XYwHTUWyVk" aria-label="">Web</a>
                    
                      <a href="https://2293736867.github.io/tag/kQfuG5TKhu/" class="ctag ctag-106 ctag-kQfuG5TKhu" aria-label="">FTP</a>
                    
                      <a href="https://2293736867.github.io/tag/Vx2vpr_C7/" class="ctag ctag-107 ctag-Vx2vpr_C7" aria-label="">Gson</a>
                    
                      <a href="https://2293736867.github.io/tag/nGstKfTrf/" class="ctag ctag-108 ctag-nGstKfTrf" aria-label="">UDP</a>
                    
                      <a href="https://2293736867.github.io/tag/tWrsXRojT/" class="ctag ctag-109 ctag-tWrsXRojT" aria-label="">TCP</a>
                    
                      <a href="https://2293736867.github.io/tag/JoO79KeOi/" class="ctag ctag-110 ctag-JoO79KeOi" aria-label="">Swing</a>
                    
                      <a href="https://2293736867.github.io/tag/ghe87GgWJ5/" class="ctag ctag-111 ctag-ghe87GgWJ5" aria-label="">Spring Data JPA</a>
                    
                      <a href="https://2293736867.github.io/tag/TrLCkYWTX/" class="ctag ctag-112 ctag-TrLCkYWTX" aria-label="">JDBC</a>
                    
                      <a href="https://2293736867.github.io/tag/94BG00D7hD/" class="ctag ctag-113 ctag-94BG00D7hD" aria-label="">C3P0</a>
                    
                      <a href="https://2293736867.github.io/tag/iZ_eZyYBHd/" class="ctag ctag-114 ctag-iZ_eZyYBHd" aria-label="">DBCP</a>
                    
                      <a href="https://2293736867.github.io/tag/FbxLgkEJb/" class="ctag ctag-115 ctag-FbxLgkEJb" aria-label="">Qt</a>
                    
                      <a href="https://2293736867.github.io/tag/ZccDmc7QXC/" class="ctag ctag-116 ctag-ZccDmc7QXC" aria-label="">C++</a>
                    
                      <a href="https://2293736867.github.io/tag/6rtV8THYT/" class="ctag ctag-117 ctag-6rtV8THYT" aria-label="">Log4j2</a>
                    
                      <a href="https://2293736867.github.io/tag/8EbOHbvZf/" class="ctag ctag-118 ctag-8EbOHbvZf" aria-label="">about</a>
                    
                  </div>
                  <div class="clear"></div>
                </section>
              </div>

              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="epcl_about-2" class="widget widget_epcl_about underline-effect">
                  <h4 class="widget-title title white bordered">关于我</h4>
                  <div class="avatar">
                    <a href="" class="translate-effect thumb"><span class="fullimage cover" style="background-image: url(https://2293736867.github.io/images/avatar.png);"></span></a>
                  </div>
                  <div class="info">
                    <h4 class="title small author-name gradient-effect no-margin"><a href="">氷泠&#39;s blog</a></h4>
                    <p class="founder">我配不上你，
纵然很努力。</p>
                    <div class="social">
                      
                          
                            <a href="https://github.com/2293736867" class="translate-effect" target="_blank"><i class="fa fa-github"></i></a>
                        
                      
                        
                      
                        
                      
                        
                      
                        
                      
                    </div> 
                  </div>
                  <div class="clear"></div>
                  </section>
              </div>

            </div>
            <div class="clear"></div>
        </div>

        <div class="logo">
          <a href="https://2293736867.github.io"><img src="/media/images/custom-footerLogo.png" alt=""></a>
        </div>
        <p class="published border-effect">
          ©2019 共 564 篇文章
          <br/>
          Theme <a href="https://gridea.dev/" target="_blank">「breek」</a> Powered by <a href="https://gridea.dev/" target="_blank">「Gridea」</a>
        </p>
        
        <a href="javascript:void(0)" id="back-to-top" class="epcl-button dark" style="display:none">
          <i class="fa fa-arrow"></i>
        </a>
    </footer>
    
    <div class="clear"></div>

        
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"></script>
<script type="text/javascript" src="https://cdn.staticfile.org/valine/1.3.10/Valine.Pure.min.js"></script>
<script>
    new Valine({
        el: '#comments',
        appId: 'bB7Cg2lXd41aulCOwaP57TCl-gzGzoHsz' ,
        appKey: 'JbjT1r2X8OAL2m2kxGBCs6oD',
        pageSize: 30,
        placeholder: '既然来了，那就留个痕迹吧~',
        visitor: true // 阅读量统计
    })
</script>
    

      
    <script src="https://2293736867.github.io/media/js/functions-post.js"></script>

    </div>
    <!-- end: #wrapper -->
  </body>
</html>
