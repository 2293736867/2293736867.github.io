
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>Java简单的用户登录界面+MySQL | 氷泠&#39;s blog</title>
<meta name="description" content="我配不上你，
纵然很努力。">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://2293736867.github.io/favicon.ico?v=1615370942909">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://2293736867.github.io/styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://2293736867.github.io">
        <img class="avatar" src="https://2293736867.github.io/images/avatar.png?v=1615370942909" alt="" width="32px" height="32px">
      </a>
      <a href="https://2293736867.github.io">
        <h1 class="site-title">氷泠&#39;s blog</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="/archives" class="menu purple-link">
            归档
          </a>
        
      
        
          <a href="/post/about" class="menu purple-link">
            关于
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
            <div class="feature-container" style="background-image: url('https://2293736867.github.io/post-images/java-jian-dan-de-yong-hu-deng-lu-jie-mian-mysql.jpg')">
            </div>
          
          <h2 class="post-title">Java简单的用户登录界面+MySQL</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2020-06-03</span>
            
              <span>
                <i class="icon-pricetags-outline"></i>
                
                  <a href="https://2293736867.github.io/tag/-AktfIpz8/">
                    Java
                    
                      ，
                    
                  </a>
                
                  <a href="https://2293736867.github.io/tag/zMdXcdRde/">
                    MySQL
                    
                  </a>
                
              </span>
            
          </div>
          <div class="post-content">
            <p><ul class="markdownIt-TOC">
<li><a href="#1%E6%A6%82%E8%BF%B0">1.概述</a></li>
<li><a href="#2ui">2.UI</a>
<ul>
<li><a href="#1%E4%B8%BB%E7%95%8C%E9%9D%A2">(1)主界面</a></li>
<li><a href="#2%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E7%95%8C%E9%9D%A2">(2)用户信息界面</a></li>
</ul>
</li>
<li><a href="#3%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C">3.数据库操作</a></li>
<li><a href="#4%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81">4.完整代码</a></li>
</ul>
</p>
<h1 id="1概述">1.概述</h1>
<p>一个简单的swing登录界面,使用了简单的JDBC.<br>
如图:<br>
<img src="https://img-blog.csdnimg.cn/20191210013512615.png" alt="在这里插入图片描述" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/20191210013543435.png" alt="在这里插入图片描述" loading="lazy"></p>
<h1 id="2ui">2.UI</h1>
<h2 id="1主界面">(1)主界面</h2>
<p>主界面使用了3<em>1网格布局+三个JPanel,中间的JPanel使用了2</em>2网格布局:</p>
<pre><code class="language-java">import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.GridLayout;
import java.util.Enumeration;
import java.awt.Container;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.plaf.FontUIResource;

public class UserManagement
{
    private JFrame mainFrame = new JFrame(&quot;登录&quot;);
    private Container container = mainFrame.getContentPane();
    private JLabel titleLabel = new JLabel(&quot;登录/注册&quot;, JLabel.CENTER);

    private JPanel inputField = new JPanel();
    private JLabel usernameLabel = new JLabel(&quot;用户名:&quot;, JLabel.CENTER);
    private JTextField username = new JTextField();
    private JLabel passwordLabel = new JLabel(&quot;密码:&quot;, JLabel.CENTER);
    private JPasswordField password = new JPasswordField();

    private JPanel buttonField = new JPanel();
    private JButton save = new JButton(&quot;登录/注册&quot;);
    private JButton cancel = new JButton(&quot;取消&quot;);

    public UserManagement()
    {
        init();
        setFont(new Font(&quot;微软雅黑&quot;,Font.PLAIN,14));
        addEvent();
    }

    private void init()
    {
        container.setLayout(new GridLayout(3, 1, 0, 10));
        container.add(titleLabel);

        inputField.setLayout(new GridLayout(2, 2, 5, 5));
        inputField.add(usernameLabel);
        inputField.add(username);
        inputField.add(passwordLabel);
        inputField.add(password);
        container.add(inputField);

        buttonField.setLayout(new FlowLayout(FlowLayout.CENTER,20,0));
        buttonField.add(save);
        buttonField.add(cancel);
        container.add(buttonField);

        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainFrame.setSize(300, 200);
        mainFrame.setLocationRelativeTo(null);
        mainFrame.setVisible(true);
    }

    private void setFont(Font font)
    {
        FontUIResource fontRes = new FontUIResource(font);
        for(Enumeration&lt;Object&gt; keys = UIManager.getDefaults().keys();keys.hasMoreElements();)
        {
            Object key = keys.nextElement();
            Object value = UIManager.get(key);
            if(value instanceof FontUIResource)
                UIManager.put(key, fontRes);
        }
    }

    private void addEvent()
    {
        save.addActionListener(
            e-&gt;
            {
                User user = new User();
                user.setName(username.getText());
                user.setPassword(new String(password.getPassword()));
                if(DBUtils.exists(user))
                    new UserInformation(DBUtils.getByName(user.getName()));
                else
                    JOptionPane.showConfirmDialog(null,
                    &quot;添加&quot;+(DBUtils.add(user) ? &quot;成功&quot; : &quot;失败&quot;), &quot;&quot;,JOptionPane.CLOSED_OPTION);
            }
        );

        cancel.addActionListener(
            e-&gt;
            {
                mainFrame.dispose();
            }
        );
    }

    public static void main(String[] args)
    {
        new UserManagement();
    }
}
</code></pre>
<p>重点说一下几行代码:</p>
<pre><code class="language-java">mainFrame.setLocationRelativeTo(null);
</code></pre>
<p>使整个JFrame处于屏幕水平居中与垂直居中位置.</p>
<pre><code class="language-java">private void setFont(Font font)
{
    FontUIResource fontRes = new FontUIResource(font);
    for(Enumeration&lt;Object&gt; keys = UIManager.getDefaults().keys();keys.hasMoreElements();)
    {
        Object key = keys.nextElement();
        Object value = UIManager.get(key);
        if(value instanceof FontUIResource)
            UIManager.put(key, fontRes);
    }
}
</code></pre>
<p>设置所有组件的字体.</p>
<pre><code class="language-java">cancel.addActionListener(
  e-&gt;
    {
        mainFrame.dispose();
    }
);
</code></pre>
<p>按钮添加关闭窗口事件.</p>
<pre><code class="language-java">JOptionPane.showConfirmDialog(null,&quot;添加&quot;+(DBUtils.add(user) ? &quot;成功&quot; : &quot;失败&quot;), &quot;&quot;,JOptionPane.CLOSED_OPTION);
</code></pre>
<p>提示信息框.</p>
<h2 id="2用户信息界面">(2)用户信息界面</h2>
<p>用户信息界面采用了3<em>1网格,同样3个JPanel,中间的JPanel布局为3</em>2网格.</p>
<pre><code class="language-java">import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.GridLayout;
import java.util.Enumeration;
import java.awt.Container;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.plaf.FontUIResource;

public class UserInformation
{
    private JFrame mainFrame = new JFrame(&quot;用户信息&quot;);
    private Container container = mainFrame.getContentPane();
    private JLabel titleLabel = new JLabel(&quot;用户信息&quot;, JLabel.CENTER);

    private JPanel inputField = new JPanel();
    private JLabel idLabel = new JLabel(&quot;Id&quot;,JLabel.CENTER);
    private JTextField id = new JTextField();
    private JLabel usernameLabel = new JLabel(&quot;Username&quot;, JLabel.CENTER);
    private JTextField username = new JTextField();
    private JLabel passwordLabel = new JLabel(&quot;Password&quot;, JLabel.CENTER);
    private JPasswordField password = new JPasswordField();

    private JPanel buttonField = new JPanel();
    private JButton update = new JButton(&quot;更新&quot;);
    private User user;

    public UserInformation(User user)
    {
        if(user == null)
            mainFrame.dispose();
        this.user = user;
        init();
        setFont(new Font(&quot;微软雅黑&quot;, Font.PLAIN, 14));
        addEvent();
    }

    private void init()
    {
        container.setLayout(new GridLayout(3,1,0,10));
        container.add(titleLabel);

        inputField.setLayout(new GridLayout(3,2,0,3));
        inputField.add(idLabel);
        inputField.add(id);
        id.setText(user.getId());
        id.setEditable(false);
        inputField.add(usernameLabel);
        username.setText(user.getName());
        inputField.add(username);
        inputField.add(passwordLabel);
        password.setText(user.getPassword());
        inputField.add(password);
        container.add(inputField);

        buttonField.setLayout(new FlowLayout());
        buttonField.add(update);
        container.add(buttonField);

        mainFrame.setVisible(true);
        mainFrame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        mainFrame.setLocationRelativeTo(null);
        mainFrame.setSize(300,250);
    }

    private void setFont(Font font)
    {
        FontUIResource fontRes = new FontUIResource(font);
        for (Enumeration&lt;Object&gt; keys = UIManager.getDefaults().keys(); keys.hasMoreElements();)
        {
            Object key = keys.nextElement();
            Object value = UIManager.get(key);
            if (value instanceof FontUIResource)
                UIManager.put(key, fontRes);
        }
    }

    private void addEvent()
    {
        update.addActionListener(
            e-&gt;
            {
                user.setName(username.getText());
                user.setPassword(new String(password.getPassword()));
                JOptionPane.showConfirmDialog(null, &quot;更新&quot;+(DBUtils.modify(user) ? &quot;成功&quot; : &quot;失败&quot;),&quot;确认&quot;,JOptionPane.CLOSED_OPTION);
            }
        );
    }
}
</code></pre>
<p>这个JFrame不能设置EXIT_ON_CLOSE.因为这不是&quot;主窗体&quot;,不然的话点击关闭主窗体也没了.</p>
<pre><code class="language-java">mainFrame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
</code></pre>
<h1 id="3数据库操作">3.数据库操作</h1>
<pre><code class="language-java">import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.UUID;

public class DBUtils
{
    private final static String driver = &quot;com.mysql.cj.jdbc.Driver&quot;;
    private final static String username = &quot;aa&quot;;
    private final static String password = &quot;123456&quot;;
    private final static String url = &quot;jdbc:mysql://127.0.0.1/user_test&quot;;
    private final static String insert = &quot;insert into user(id,username,password) values(?,?,?)&quot;;
    private final static String update = &quot;update user set username = ?,password = ? where id = ?&quot;;
    private final static String delete = &quot;delete from user where id = ?&quot;;
    private final static String select = &quot;select * from user where username = ?&quot;;

    private static Connection connection;

    static
    {
        try
        {
            Class.forName(driver);
            connection = DriverManager.getConnection(url,username,password);
        }
        catch(Exception e)
        {
            e.printStackTrace();
            connection = null;
        }
    }

    public static boolean exists(User user)
    {
        try
        {
            PreparedStatement exist = connection.prepareStatement(select);
            exist.setString(1,user.getName());
            ResultSet existResult = exist.executeQuery();
            return existResult.next();
        }
        catch (SQLException e)
        {
            e.printStackTrace();
            return false;
        }
    }

    public static boolean add(User user)
    {
        try
        {
            PreparedStatement add = connection.prepareStatement(insert);
            user.setId(UUID.randomUUID().toString().substring(0, 8));
            add.setString(1, user.getId());
            add.setString(2, user.getName());
            add.setString(3, user.getPassword());
            return add.executeUpdate() == 1;
        }
        catch (SQLException e)
        {
            e.printStackTrace();
            return false;
        }
    }

    public static boolean modify(User user)
    {
        try
        {
            PreparedStatement modify = connection.prepareStatement(update);
            System.out.println(user.getName());
            modify.setString(1, user.getName());
            modify.setString(2, user.getPassword());
            modify.setString(3, user.getId());
            return modify.executeUpdate() == 1;
        }
        catch (SQLException e)
        {
            e.printStackTrace();
            return false;
        }
    }

    public static boolean delete(User user)
    {
        if(exists(user))
        {
            try
            {
                PreparedStatement del = connection.prepareStatement(delete);
                del.setString(1, user.getId());
                return del.executeUpdate() == 1;
            }
            catch (SQLException e)
            {
                e.printStackTrace();
            }
        }
        return false;
    }

    public static User getByName(String name)
    {
        try
        {
            PreparedStatement exist = connection.prepareStatement(select);
            exist.setString(1, name);
            ResultSet existResult = exist.executeQuery();
            if(existResult.next())
            {
                User user = new User();
                user.setId(existResult.getString(&quot;id&quot;));
                user.setName(existResult.getString(&quot;username&quot;));
                user.setPassword(existResult.getString(&quot;password&quot;));
                return user;
            }
            return null;
        }
        catch (SQLException e)
        {
            e.printStackTrace();
            return null;
        }
    }
}
</code></pre>
<p>注册驱动后,增删查改,就是注意一下mysql版本与驱动名对应.</p>
<h1 id="4完整代码">4.完整代码</h1>
<p><a href="https://github.com/2293736867/UserManagement">github</a></p>
<p><a href="https://gitee.com/imykr/UserManagement">码云</a></p>

          </div>
        </div>

        
          <div class="next-post">
            <a class="purple-link" href="https://2293736867.github.io/post/gsonso-easy/">
              <h3 class="post-title">
                下一篇：Gson?So easy.
              </h3>
            </a>
          </div>
          
      </div>

      
        
          <div id="gitalk-container"></div>
        

        
      

      <div class="site-footer">
  <div class="slogan">我配不上你，
纵然很努力。</div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://2293736867.github.io/atom.xml" target="_blank">RSS</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>



  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '477bf133e6f4f92e3d3d',
        clientSecret: 'c917fc4292d22d69e98b9521ac1e6fca627fe54c',
        repo: '2293736867.github.io',
        owner: '2293736867',
        admin: ['2293736867'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
