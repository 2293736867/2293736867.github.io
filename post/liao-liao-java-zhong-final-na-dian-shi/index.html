
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>聊聊Java中final那点事 | 氷泠&#39;s blog</title>
<meta name="description" content="我配不上你，
纵然很努力。">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://2293736867.github.io/favicon.ico?v=1615371949211">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://2293736867.github.io/styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://2293736867.github.io">
        <img class="avatar" src="https://2293736867.github.io/images/avatar.png?v=1615371949211" alt="" width="32px" height="32px">
      </a>
      <a href="https://2293736867.github.io">
        <h1 class="site-title">氷泠&#39;s blog</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="/archives" class="menu purple-link">
            归档
          </a>
        
      
        
          <a href="/post/about" class="menu purple-link">
            关于
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
            <div class="feature-container" style="background-image: url('https://2293736867.github.io/post-images/liao-liao-java-zhong-final-na-dian-shi.png')">
            </div>
          
          <h2 class="post-title">聊聊Java中final那点事</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2020-06-03</span>
            
              <span>
                <i class="icon-pricetags-outline"></i>
                
                  <a href="https://2293736867.github.io/tag/-AktfIpz8/">
                    Java
                    
                  </a>
                
              </span>
            
          </div>
          <div class="post-content">
            <p><ul class="markdownIt-TOC">
<li><a href="#1final%E6%98%AF%E4%BB%80%E4%B9%88">1.final是什么</a></li>
<li><a href="#2final%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8">2.final有什么用</a></li>
<li><a href="#3final%E4%BF%AE%E9%A5%B0%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F">3.final修饰成员变量</a>
<ul>
<li><a href="#1%E4%BF%AE%E9%A5%B0%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F">(1)修饰静态变量</a></li>
<li><a href="#2%E4%BF%AE%E9%A5%B0%E6%99%AE%E9%80%9A%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F">(2)修饰普通成员变量</a></li>
</ul>
</li>
<li><a href="#4final%E4%BF%AE%E9%A5%B0%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F">4.final修饰局部变量</a>
<ul>
<li><a href="#1%E4%BF%AE%E9%A5%B0%E5%BD%A2%E5%8F%82">(1)修饰形参</a></li>
<li><a href="#2%E4%BF%AE%E9%A5%B0%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F">(2)修饰局部变量</a></li>
<li><a href="#3final%E4%BF%AE%E9%A5%B0%E5%BC%95%E7%94%A8%E5%8F%98%E9%87%8F">(3)final修饰引用变量</a></li>
</ul>
</li>
<li><a href="#5final%E4%BF%AE%E9%A5%B0%E6%96%B9%E6%B3%95">5.final修饰方法</a></li>
<li><a href="#6final%E4%BF%AE%E9%A5%B0%E7%B1%BB">6.final修饰类</a></li>
</ul>
</p>
<h1 id="1final是什么">1.final是什么</h1>
<p>final是一个java关键字,一个修饰符,可用于修饰变量,方法,修饰类.</p>
<h1 id="2final有什么用">2.final有什么用</h1>
<ul>
<li>final可以修饰变量时,可以使其值不能改变</li>
<li>final修饰方法时使其不能被重写</li>
<li>final修饰类时,使其不能被继承.</li>
</ul>
<h1 id="3final修饰成员变量">3.final修饰成员变量</h1>
<p>fianl最常见的用法时用来修饰成员变量,成员变量分为静态变量与普通变量.<br>
对于final修饰的变量,不是不能被赋值,是其值不能被改变,可以理解成只能赋一次值.可以在定义时赋值,也可以在定义后在另外赋值,但无论何种方式只能被赋值一次.</p>
<h2 id="1修饰静态变量">(1)修饰静态变量</h2>
<p>修饰静态变量时,可以选择以下两种方式赋值:</p>
<ul>
<li>在定义时赋值</li>
<li>静态初始化块内赋值</li>
</ul>
<pre><code class="language-java">final static int a = 6;
final static int b;
static 
{
	b = 6;
}
</code></pre>
<h2 id="2修饰普通成员变量">(2)修饰普通成员变量</h2>
<p>修饰普通成员变量时,可以选择以下三种方式赋值:</p>
<ul>
<li>定义时赋值</li>
<li>初始化块内赋值</li>
<li>构造方法赋值</li>
</ul>
<pre><code class="language-java">public class test
{
	int c = 1;
	int d;
	int e;
	{
		d = 2;
	}
	public test()
	{
		e = 3;
	}
}
</code></pre>
<p>根据&quot;静态&quot;不能访问&quot;非静态&quot;规则,就是说静态的方法不能访问非静态成员,static初始化块不能初始化非静态成员,普通初始化块也不能初始化静态变量.<br>
但是,有一个&quot;bug&quot;就是java允许通过方法访问final成员,因此...有趣的事情发生了.</p>
<pre><code class="language-java">public class test
{
    final int a;
    {
        System.out.println(a);//这里会报错
        printA();
        a = 3;
        printA();
    }
    void printA()
    {
        System.out.println(a);
    }
    public static void main(String[] args) {
        new test();
    }
}
</code></pre>
<p>以上这段代码会报错,因为java不允许final成员未初始化前访问.</p>
<p><img src="https://img-blog.csdnimg.cn/20191025210132589.jpg" alt="在这里插入图片描述" loading="lazy"><br>
把上面那一行出错的代码注释后...居然通过了编译?!</p>
<pre><code class="language-java">public class test
{
    final int a;
    {
        //System.out.println(a);//这里会报错
        printA();
        a = 3;
        printA();
    }
    void printA()
    {
        System.out.println(a);
    }
    public static void main(String[] args) {
        new test();
    }
}
</code></pre>
<p>printA()中只是用方法包装了一下输出函数,居然就通过了编译...有没有兴趣看一下结果?</p>
<p><img src="https://img-blog.csdnimg.cn/20191025210403178.jpg" alt="在这里插入图片描述" loading="lazy"><br>
emmmmmm....final&quot;默认值&quot;为0.....总之<s>就不要想这些歪门邪道去在final初始化之前访问final变量了</s> ,在使用final变量前初始化,初始化,初始化,重要的事情说三遍.</p>
<h1 id="4final修饰局部变量">4.final修饰局部变量</h1>
<p>final修饰局部变量其实也分两种,一种是修饰形参,一种是修饰方法内部的局部变量</p>
<h2 id="1修饰形参">(1)修饰形参</h2>
<p>没什么好说的...就是形参的值不能改变.</p>
<pre><code class="language-java">public void f(final int a)
{
	a = 3;//报错.
}
</code></pre>
<h2 id="2修饰局部变量">(2)修饰局部变量</h2>
<p>修饰局部变量时可以定义时赋值,也可以在定义后在赋值(仅一次).</p>
<pre><code class="language-java">public void f()
{
	final int  a = 3;
	final int b;
	b = 2;
}
</code></pre>
<h2 id="3final修饰引用变量">(3)final修饰引用变量</h2>
<p>嗯.....这个是一个特别一点的例子,Talk is cheap.上代码.</p>
<pre><code class="language-java">import java.util.Arrays;

public class test
{
    public static void main(String[] args) {
        final int[] arr = {1,2,3};
        arr[1] = 5;
        Arrays.stream(arr).forEach(System.out::print);
        System.out.println();
        final A a = new A();
        a.setA(9);
        System.out.println(a.getA());
    }
}

class A
{
    private int a = 3;
    public void setA(int a)
    {
        this.a = a;
    }
    public int getA()
    {
        return a;
    }
}
</code></pre>
<p>为什么final数组可以赋值???fianl对象的值被改变了???看看结果:<br>
<img src="https://img-blog.csdnimg.cn/20191025213120723.jpg" alt="在这里插入图片描述" loading="lazy"><br>
final数组居然被改变了??final对象的值也被改变了??<br>
其实呢,因为数组是引用类型,final修饰引用类型时,只能保证这个变量永远&quot;指向&quot;那一段内存空间,保存的仅仅是一个引用,但是那段内存空间的值是可以改变的.修饰对象时也是一样的道理.</p>
<h1 id="5final修饰方法">5.final修饰方法</h1>
<p>final修饰的方法不能被重写,当然,不能&quot;配合&quot;private&quot;使用&quot;,因为private把方法变成了私有,相当于对子类不可见,子类都不知道父类&quot;还有这玩意&quot;,就可以进行所谓的&quot;重写&quot;了.</p>
<pre><code class="language-java">class A
{
	private final void f(){}
}
class B extends A
{
	public final void f(){}//没毛病
}
</code></pre>
<p>因为B类的f()是属于B类的,不是从A类继承过来的.</p>
<h1 id="6final修饰类">6.final修饰类</h1>
<p>final修饰类时表示该类不能被继承.</p>
<pre><code class="language-java">final class A{}
class B extends A{}//出错
</code></pre>

          </div>
        </div>

        
          <div class="next-post">
            <a class="purple-link" href="https://2293736867.github.io/post/java-zi-ding-yi-de-getinstancefan-hui-fan-xing/">
              <h3 class="post-title">
                下一篇：Java自定义的getInstance()返回泛型
              </h3>
            </a>
          </div>
          
      </div>

      

      <div class="site-footer">
  <div class="slogan">我配不上你，
纵然很努力。</div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://2293736867.github.io/atom.xml" target="_blank">RSS</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
