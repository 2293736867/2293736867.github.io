
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>Vue3.0中引入地图（谷歌+高德+腾讯+百度） | 氷泠&#39;s blog</title>
<meta name="description" content="我配不上你，
纵然很努力。">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://2293736867.github.io/favicon.ico?v=1615370942909">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://2293736867.github.io/styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://2293736867.github.io">
        <img class="avatar" src="https://2293736867.github.io/images/avatar.png?v=1615370942909" alt="" width="32px" height="32px">
      </a>
      <a href="https://2293736867.github.io">
        <h1 class="site-title">氷泠&#39;s blog</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="/archives" class="menu purple-link">
            归档
          </a>
        
      
        
          <a href="/post/about" class="menu purple-link">
            关于
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
            <div class="feature-container" style="background-image: url('https://2293736867.github.io/post-images/vue30-zhong-yin-ru-di-tu-gu-ge-gao-de-teng-xun-bai-du.jpeg')">
            </div>
          
          <h2 class="post-title">Vue3.0中引入地图（谷歌+高德+腾讯+百度）</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2021-01-07</span>
            
              <span>
                <i class="icon-pricetags-outline"></i>
                
                  <a href="https://2293736867.github.io/tag/ODfvYwg3O/">
                    地图
                    
                      ，
                    
                  </a>
                
                  <a href="https://2293736867.github.io/tag/OykyL0ueI/">
                    Vue3
                    
                  </a>
                
              </span>
            
          </div>
          <div class="post-content">
            <h1 id="1-概述">1 概述</h1>
<p>项目需求需要引入地图，对于目前最新的<code>Vue3.0</code>，无论是百度/高德/腾讯地图目前还没有适配，只有<code>Vue 2.x</code>版本的：</p>
<figure data-type="image" tabindex="1"><img src="https://img-blog.csdnimg.cn/20210106203551768.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>目前只有谷歌地图的<code>Vue3.0</code>适配：</p>
<figure data-type="image" tabindex="2"><img src="https://img-blog.csdnimg.cn/20210106203719928.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>但是没有适配并不代表不能使用，本文的重点就是如何使用这四种地图，不废话了进入正题。</p>
<h1 id="2-谷歌地图">2 谷歌地图</h1>
<p>步骤：</p>
<ul>
<li>获取<code>API Key</code></li>
<li>安装</li>
<li>使用</li>
</ul>
<h2 id="21-获取api-key">2.1 获取<code>API Key</code></h2>
<p><a href="https://developers.google.com/maps/documentation/javascript/get-api-key">戳这里</a>按提示进行：</p>
<figure data-type="image" tabindex="3"><img src="https://img-blog.csdnimg.cn/20210106203921508.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>首先点击第一个<a href="https://console.cloud.google.com/projectselector2/home/dashboard">链接</a>创建项目：</p>
<figure data-type="image" tabindex="4"><img src="https://img-blog.csdnimg.cn/2021010620401072.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>输入项目名字：</p>
<figure data-type="image" tabindex="5"><img src="https://img-blog.csdnimg.cn/20210106204119530.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p><a href="https://console.cloud.google.com/project/_/apiui/credential">戳这里</a>查看自己的凭据：</p>
<figure data-type="image" tabindex="6"><img src="https://img-blog.csdnimg.cn/20210106204459499.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>选择创建凭据里面的API密钥：</p>
<figure data-type="image" tabindex="7"><img src="https://img-blog.csdnimg.cn/202101062045396.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>将已创建后的密钥复制即可。</p>
<figure data-type="image" tabindex="8"><img src="https://img-blog.csdnimg.cn/20210106204556316.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h2 id="22-安装">2.2 安装</h2>
<pre><code class="language-bash">npm install --save vue3-google-map
# 或
cnpm install --save vue3-google-map
# 或
yarn add vue3-google-map
</code></pre>
<h2 id="23-使用">2.3 使用</h2>
<p>在需要引入的组件中添加如下示例代码：</p>
<pre><code class="language-html">&lt;template&gt;
	&lt;GoogleMap
	api-key=&quot;YOUR_GOOGLE_MAPS_API_KEY&quot;
	style=&quot;width: 100%; height: 500px&quot;
	:center=&quot;center&quot;
	:zoom=&quot;15&quot;
	&gt;
		&lt;Marker :options=&quot;{ position: center }&quot; /&gt;
	&lt;/GoogleMap&gt;
&lt;/template&gt;

&lt;script&gt;
import { GoogleMap, Marker } from 'vue3-google-map'

export default {
	components: { GoogleMap, Marker },
	setup() {
		const center = { lat: 40.689247, lng: -74.044502 }
		return { center }
	},
})
&lt;/script&gt;
</code></pre>
<p>并将<code>KEY</code>修改为自己的<code>KEY</code>。</p>
<p>若<code>KEY</code>没问题的话，运行后即可看到地图，笔者这里遇到了一下错误：</p>
<figure data-type="image" tabindex="9"><img src="https://img-blog.csdnimg.cn/20210106205510783.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>提示说是地图<code>API</code>还没有激活，点击提示中的<a href="https://console.cloud.google.com/apis/library?filter=category:maps">链接</a>进行激活：</p>
<figure data-type="image" tabindex="10"><img src="https://img-blog.csdnimg.cn/20210106210806159.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>启用：</p>
<figure data-type="image" tabindex="11"><img src="https://img-blog.csdnimg.cn/20210106210901303.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>但是这里又报了一个错误：</p>
<figure data-type="image" tabindex="12"><img src="https://img-blog.csdnimg.cn/20210106212327452.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>按照控制台提示的链接激活：</p>
<figure data-type="image" tabindex="13"><img src="https://img-blog.csdnimg.cn/20210106211334871.png" alt="在这里插入图片描述" loading="lazy"></figure>
<figure data-type="image" tabindex="14"><img src="https://img-blog.csdnimg.cn/20210106212256456.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>激活后即可看到地图。</p>
<h1 id="3-百度地图">3 百度地图</h1>
<p>步骤：</p>
<ul>
<li>获取<code>ak</code></li>
<li>安装</li>
<li>使用</li>
</ul>
<h2 id="31-获取ak">3.1 获取<code>ak</code></h2>
<p><code>ak</code>类似谷歌地图中的<code>API KEY</code>，<a href="http://lbsyun.baidu.com/index.php?title=%E9%A6%96%E9%A1%B5">戳这里</a>注册百度地图开发者账号，然后创建一个应用：</p>
<figure data-type="image" tabindex="15"><img src="https://img-blog.csdnimg.cn/20210107153441512.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>注意应用类型需要选择<code>浏览器端</code>，并且需要配置域名限制，若无限制域名需要输入<code>*</code>。</p>
<p>创建后即可看到<code>ak</code>：</p>
<figure data-type="image" tabindex="16"><img src="https://img-blog.csdnimg.cn/20210107152130340.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h2 id="32-安装">3.2 安装</h2>
<p>使用<code>Vue2.x</code>的可以从<code>npm</code>/<code>cnpm</code>安装：</p>
<ul>
<li><code>vue-baidu-map-v3</code></li>
<li><code>vue-baidu-map</code></li>
<li><code>coalbr-vue-baidu-map</code></li>
</ul>
<p>具体查看文档即可。</p>
<p>百度地图目前有4套<code>JS API</code>：</p>
<ul>
<li><code>JavaScript API GL</code></li>
<li><code>JavaScript API v2.0</code></li>
<li><code>JavaScript API v3.0</code></li>
<li><code>JavaScript API Lite</code></li>
</ul>
<p>这里以<code>v3.0</code>的<code>API</code>进行操作，对于这套<code>API</code>，官方文档只提供了<code>&lt;script&gt;</code>引入的方式，因此在<code>Vue3.0</code>中需要手动引入<code>JS</code>：</p>
<pre><code class="language-js">&lt;script type=&quot;text/javascript&quot; src=&quot;http://api.map.baidu.com/api?v=3.0&amp;ak=您的密钥&quot;&gt;&lt;/script&gt;
</code></pre>
<p>具体流程为，在<code>Vue</code>应用下的<code>index.html</code>直接引入该<code>JS</code>：</p>
<figure data-type="image" tabindex="17"><img src="https://img-blog.csdnimg.cn/20210107152630555.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h2 id="33-使用">3.3 使用</h2>
<p>在需要的组件中创建一个固定宽高的容器：</p>
<pre><code class="language-html">&lt;div id=&quot;container&quot; style=&quot;width: 800px;height: 800px&quot;&gt;&lt;/div&gt;
</code></pre>
<p>在<code>mounted()</code>中创建地图：</p>
<pre><code class="language-js">mounted(){
	var map = new BMap.Map('container')
    var point = new BMap.Point(116.404, 39.915)
    map.centerAndZoom(point, 15)
    map.enableScrollWheelZoom(true)
}
</code></pre>
<p>运行效果：</p>
<figure data-type="image" tabindex="18"><img src="https://img-blog.csdnimg.cn/20210107153001613.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>更详细的使用请看<a href="http://lbsyun.baidu.com/index.php?title=jspopular3.0/guide/helloworld">官方文档</a>。</p>
<h1 id="4-高德地图">4 高德地图</h1>
<p>流程：</p>
<ul>
<li>注册账号获取<code>KEY</code></li>
<li>安装</li>
<li>使用</li>
</ul>
<h2 id="41-key">4.1 <code>KEY</code></h2>
<p><a href="https://lbs.amap.com/">戳这里</a>注册高德开放平台账号：</p>
<figure data-type="image" tabindex="19"><img src="https://img-blog.csdnimg.cn/20210107153216498.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>创建：</p>
<figure data-type="image" tabindex="20"><img src="https://img-blog.csdnimg.cn/20210107153318515.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>选择添加：</p>
<figure data-type="image" tabindex="21"><img src="https://img-blog.csdnimg.cn/20210107153526478.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>选择<code>Web端(JS API)</code>，同时需要域名限制请按提示进行输入：</p>
<figure data-type="image" tabindex="22"><img src="https://img-blog.csdnimg.cn/20210107153623173.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>创建完成后即可看到<code>KEY</code>。</p>
<h2 id="42-安装">4.2 安装</h2>
<p>高德地图<code>JS API</code>目前有两个版本：<code>v1.4</code>/<code>v2.0</code>，<code>v1.4</code>的地图只能通过<code>&lt;script&gt;</code>引入，而在<code>v2.0</code>中，高德官方额外提供了<code>JSAPI Loader</code>，可以通过该<code>JSAPI Loader</code>去加载地图，这里以<code>v2.0</code>版本进行操作。</p>
<p><code>JSAPI Loader</code>使用<code>npm</code>/<code>cnpm</code>安装：</p>
<pre><code class="language-bash">npm i @amap/amap-jsapi-loader --save
# 或
cnpm i @amap/amap-jsapi-loader --save
</code></pre>
<p>另一种方式是传统的<code>&lt;script&gt;</code>，但不建议，需要的可以看<a href="https://lbs.amap.com/api/jsapi-v2/guide/abc/load">官方文档</a>。</p>
<h2 id="43-使用">4.3 使用</h2>
<p>在需要的组件中定义一个容器，确定高宽：</p>
<pre><code class="language-html">&lt;div id=&quot;container&quot; style=&quot;height: 800px;width: 800px;&quot;&gt;&lt;/div&gt;
</code></pre>
<p>下一步就是<code>import</code>：</p>
<pre><code class="language-js">import AMapLoader from '@amap/amap-jsapi-loader';
</code></pre>
<p>并在<code>setup()/mounted()</code>中加载：</p>
<pre><code class="language-js">setup(){
    AMapLoader.load({
        &quot;key&quot;: &quot;&quot;,                                          // 申请好的Web端开发者Key，首次调用 load 时必填
        &quot;version&quot;: &quot;1.4.15&quot;,                                // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15
        &quot;plugins&quot;: [],                                      // 需要使用的的插件列表，如比例尺'AMap.Scale'等
        &quot;AMapUI&quot;: {                                         // 是否加载 AMapUI，缺省不加载
            &quot;version&quot;: '1.1',                               // AMapUI 缺省 1.1
            &quot;plugins&quot;:[],                                   // 需要加载的 AMapUI ui插件
        },
        &quot;Loca&quot;:{                                            // 是否加载 Loca， 缺省不加载
            &quot;version&quot;: '1.3.2'                              // Loca 版本，缺省 1.3.2
        },
    }).then((AMap)=&gt;{
        var map = new AMap.Map('container', {
            zoom:11,                                        //级别
            center: [116.397428, 39.90923],                 //中心点坐标
            viewMode:'3D'                                   //使用3D视图
        });
    }).catch(e =&gt; {
        console.log(e);
    })
},
</code></pre>
<p>修改为自己的<code>KEY</code>，示例效果：</p>
<figure data-type="image" tabindex="23"><img src="https://img-blog.csdnimg.cn/20210107154137737.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>更详细使用请查看<a href="https://lbs.amap.com/api/jsapi-v2/guide/abc/quickstart">官方文档</a>。</p>
<h1 id="5-腾讯地图">5 腾讯地图</h1>
<p>步骤类似：</p>
<ul>
<li>注册账号</li>
<li>安装</li>
<li>使用</li>
</ul>
<h2 id="51-注册账号">5.1 注册账号</h2>
<p><a href="https://lbs.qq.com/">戳这里</a>注册账号：</p>
<figure data-type="image" tabindex="24"><img src="https://img-blog.csdnimg.cn/20210107161144299.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>创建<code>KEY</code>：</p>
<figure data-type="image" tabindex="25"><img src="https://img-blog.csdnimg.cn/20210107161233795.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h2 id="52-安装">5.2 安装</h2>
<p>腾讯地图目前同样有两个版本：<code>v1</code>/<code>v2</code>，这里以<code>v2</code>示例。</p>
<p>腾讯地图与百度地图类似，只提供了<code>&lt;script&gt;</code>去引入地图，因此操作方式与百度地图类似，在<code>index.html</code>中引入：</p>
<pre><code class="language-html">&lt;script charset=&quot;utf-8&quot; src=&quot;https://map.qq.com/api/js?v=2.exp&amp;key=KEY&quot;&gt;&lt;/script&gt;
</code></pre>
<p>修改为自己的<code>KEY</code>。</p>
<h2 id="53-使用">5.3 使用</h2>
<p>对应组件创建容器：</p>
<pre><code class="language-html">&lt;div id=&quot;container&quot; style=&quot;width: 800px;height: 800px&quot;&gt;&lt;/div&gt;
</code></pre>
<p><code>mounted()</code>中引入：</p>
<pre><code class="language-js">mounted(){
	var myLatlng = new qq.maps.LatLng(39.90923,116.397428)
    var myOptions = {
        zoom: 8,
        center: myLatlng,
        mapTypeId: qq.maps.MapTypeId.ROADMAP
    }
    var map = new qq.maps.Map(document.getElementById(&quot;container&quot;), myOptions);
}
</code></pre>
<p>示例效果：</p>
<figure data-type="image" tabindex="26"><img src="https://img-blog.csdnimg.cn/20210107162854979.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h1 id="6-附录坐标系转换">6 附录：坐标系转换</h1>
<p>国内主要有以下三种坐标系：</p>
<ul>
<li><code>WGS84</code>：一种大地坐标系，目前广泛使用的<code>GPS</code>系统使用的坐标系</li>
<li><code>GCJ02</code>：又叫火星坐标系/国测局坐标系，中国国家测绘局制订的地理信息系统坐标系统，是<code>WGS84</code>坐标加密后的坐标系</li>
<li><code>BD09</code>：百度坐标系，在<code>GCJ02</code>基础上再次进行加密</li>
</ul>
<p>而各种地图使用的坐标系如下：</p>
<ul>
<li>谷歌国内地图、高德地图、腾讯地图：<code>GCJ02</code></li>
<li>百度地图：<code>BD09</code></li>
<li>谷歌国外地图、<code>osm</code>地图等：<code>WGS84</code></li>
</ul>
<p>当坐标系不一致时，需要进行转换，这里推荐两个坐标系转换开源库（<code>3.1k</code>/<code>1.8k</code> <code>star</code>）：</p>
<figure data-type="image" tabindex="27"><img src="https://img-blog.csdnimg.cn/20210107164203456.png" alt="在这里插入图片描述" loading="lazy"></figure>
<figure data-type="image" tabindex="28"><img src="https://img-blog.csdnimg.cn/20210107164225264.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p><a href="https://github.com/wandergis/coordtransform">戳这里</a>或<a href="https://github.com/hujiulong/gcoord">这里</a>使用。</p>

          </div>
        </div>

        
          <div class="next-post">
            <a class="purple-link" href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-206-qi/">
              <h3 class="post-title">
                下一篇：每日分享 第206期
              </h3>
            </a>
          </div>
          
      </div>

      
        
          <div id="gitalk-container"></div>
        

        
      

      <div class="site-footer">
  <div class="slogan">我配不上你，
纵然很努力。</div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://2293736867.github.io/atom.xml" target="_blank">RSS</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>



  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '477bf133e6f4f92e3d3d',
        clientSecret: 'c917fc4292d22d69e98b9521ac1e6fca627fe54c',
        repo: '2293736867.github.io',
        owner: '2293736867',
        admin: ['2293736867'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
