<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://2293736867.github.io</id>
    <title>氷泠&apos;s blog</title>
    <updated>2021-01-11T00:56:20.137Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://2293736867.github.io"/>
    <link rel="self" href="https://2293736867.github.io/atom.xml"/>
    <subtitle>我配不上你，
纵然很努力。</subtitle>
    <logo>https://2293736867.github.io/images/avatar.png</logo>
    <icon>https://2293736867.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, 氷泠&apos;s blog</rights>
    <entry>
        <title type="html"><![CDATA[每日分享 第212期]]></title>
        <id>https://2293736867.github.io/post/mei-ri-fen-xiang-di-212-qi/</id>
        <link href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-212-qi/">
        </link>
        <updated>2021-01-12T00:54:00.000Z</updated>
        <content type="html"><![CDATA[<h1 id="每日鸡汤">每日鸡汤</h1>
<blockquote>
<p>失败也是成功的一部分，在哪里跌倒，就在哪里讹人。</p>
</blockquote>
<h1 id="每日诗词">每日诗词</h1>
<blockquote>
<p>寂寞萎红低向雨，离披破艳散随风。<br>
——白居易《惜牡丹二首》</p>
</blockquote>
<h1 id="每日一句">每日一句</h1>
<blockquote>
<p>信言不美，美言不信。</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[每日分享 第211期]]></title>
        <id>https://2293736867.github.io/post/mei-ri-fen-xiang-di-211-qi/</id>
        <link href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-211-qi/">
        </link>
        <updated>2021-01-11T00:52:02.000Z</updated>
        <content type="html"><![CDATA[<h1 id="每日鸡汤">每日鸡汤</h1>
<blockquote>
<p>将薪比薪的想了想，算了，不想活了。</p>
</blockquote>
<h1 id="每日诗词">每日诗词</h1>
<blockquote>
<p>日高烟敛，更看今日晴未。<br>
——李清照《念奴桥·春情》</p>
</blockquote>
<h1 id="每日一句">每日一句</h1>
<blockquote>
<p>如果真的失败了，请总结自己“为什么会失败？”</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[每日分享 第210期]]></title>
        <id>https://2293736867.github.io/post/mei-ri-fen-xiang-di-210-qi/</id>
        <link href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-210-qi/">
        </link>
        <updated>2021-01-10T00:49:32.000Z</updated>
        <content type="html"><![CDATA[<h1 id="每日鸡汤">每日鸡汤</h1>
<blockquote>
<p>带翅膀的不一定是天使，有可能是雷震子。</p>
</blockquote>
<h1 id="每日诗词">每日诗词</h1>
<blockquote>
<p>这情怀，对东风，尽成消瘦。<br>
——王雱《倦寻芳慢·露晞向晚》</p>
</blockquote>
<h1 id="每日一句">每日一句</h1>
<blockquote>
<p>我觉得世界无聊，是因为我的世界本身已经足够有趣了。</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[每日分享 第209期]]></title>
        <id>https://2293736867.github.io/post/mei-ri-fen-xiang-di-209-qi/</id>
        <link href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-209-qi/">
        </link>
        <updated>2021-01-09T00:47:21.000Z</updated>
        <content type="html"><![CDATA[<h1 id="每日鸡汤">每日鸡汤</h1>
<blockquote>
<p>每天叫醒我的不是理想，是楼下广场舞的音乐。</p>
</blockquote>
<h1 id="每日诗词">每日诗词</h1>
<blockquote>
<p>x细雨孤鸿，孤山无限春寒。<br>
——吴文英《高阳台·落梅》</p>
</blockquote>
<h1 id="每日一句">每日一句</h1>
<blockquote>
<p>我们是独立的个体，却不是孤独的存在。</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[每日分享 第208期]]></title>
        <id>https://2293736867.github.io/post/mei-ri-fen-xiang-di-208-qi/</id>
        <link href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-208-qi/">
        </link>
        <updated>2021-01-08T10:58:06.000Z</updated>
        <content type="html"><![CDATA[<h1 id="每日鸡汤">每日鸡汤</h1>
<blockquote>
<p>单身没有关系，以后单身的日子，还长着呢。</p>
</blockquote>
<h1 id="每日诗词">每日诗词</h1>
<blockquote>
<p>草草杯盘聊话旧，同剪西窗寒烛。<br>
——蔡伸《念奴桥》</p>
</blockquote>
<h1 id="每日一句">每日一句</h1>
<blockquote>
<p>稳定不是一辈子拴在一个单位，而是有本事去任何单位。</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[每日分享 第207期]]></title>
        <id>https://2293736867.github.io/post/mei-ri-fen-xiang-di-207-qi/</id>
        <link href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-207-qi/">
        </link>
        <updated>2021-01-07T10:55:47.000Z</updated>
        <content type="html"><![CDATA[<h1 id="每日鸡汤">每日鸡汤</h1>
<blockquote>
<p>一个成年人是不会挑食的，他们会说，我对这个过敏。</p>
</blockquote>
<h1 id="每日诗词">每日诗词</h1>
<blockquote>
<p>造物无言却有情，每于寒尽觉春生。<br>
——张维屏《新雷》</p>
</blockquote>
<h1 id="每日一句">每日一句</h1>
<blockquote>
<p>春来暑往，秋去冬藏，又是很多年过去了。</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Vue3.0中引入地图（谷歌+高德+腾讯+百度）]]></title>
        <id>https://2293736867.github.io/post/vue30-zhong-yin-ru-di-tu-gu-ge-gao-de-teng-xun-bai-du/</id>
        <link href="https://2293736867.github.io/post/vue30-zhong-yin-ru-di-tu-gu-ge-gao-de-teng-xun-bai-du/">
        </link>
        <updated>2021-01-07T10:53:18.000Z</updated>
        <content type="html"><![CDATA[<h1 id="1-概述">1 概述</h1>
<p>项目需求需要引入地图，对于目前最新的<code>Vue3.0</code>，无论是百度/高德/腾讯地图目前还没有适配，只有<code>Vue 2.x</code>版本的：</p>
<figure data-type="image" tabindex="1"><img src="https://img-blog.csdnimg.cn/20210106203551768.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>目前只有谷歌地图的<code>Vue3.0</code>适配：</p>
<figure data-type="image" tabindex="2"><img src="https://img-blog.csdnimg.cn/20210106203719928.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>但是没有适配并不代表不能使用，本文的重点就是如何使用这四种地图，不废话了进入正题。</p>
<h1 id="2-谷歌地图">2 谷歌地图</h1>
<p>步骤：</p>
<ul>
<li>获取<code>API Key</code></li>
<li>安装</li>
<li>使用</li>
</ul>
<h2 id="21-获取api-key">2.1 获取<code>API Key</code></h2>
<p><a href="https://developers.google.com/maps/documentation/javascript/get-api-key">戳这里</a>按提示进行：</p>
<figure data-type="image" tabindex="3"><img src="https://img-blog.csdnimg.cn/20210106203921508.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>首先点击第一个<a href="https://console.cloud.google.com/projectselector2/home/dashboard">链接</a>创建项目：</p>
<figure data-type="image" tabindex="4"><img src="https://img-blog.csdnimg.cn/2021010620401072.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>输入项目名字：</p>
<figure data-type="image" tabindex="5"><img src="https://img-blog.csdnimg.cn/20210106204119530.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p><a href="https://console.cloud.google.com/project/_/apiui/credential">戳这里</a>查看自己的凭据：</p>
<figure data-type="image" tabindex="6"><img src="https://img-blog.csdnimg.cn/20210106204459499.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>选择创建凭据里面的API密钥：</p>
<figure data-type="image" tabindex="7"><img src="https://img-blog.csdnimg.cn/202101062045396.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>将已创建后的密钥复制即可。</p>
<figure data-type="image" tabindex="8"><img src="https://img-blog.csdnimg.cn/20210106204556316.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h2 id="22-安装">2.2 安装</h2>
<pre><code class="language-bash">npm install --save vue3-google-map
# 或
cnpm install --save vue3-google-map
# 或
yarn add vue3-google-map
</code></pre>
<h2 id="23-使用">2.3 使用</h2>
<p>在需要引入的组件中添加如下示例代码：</p>
<pre><code class="language-html">&lt;template&gt;
	&lt;GoogleMap
	api-key=&quot;YOUR_GOOGLE_MAPS_API_KEY&quot;
	style=&quot;width: 100%; height: 500px&quot;
	:center=&quot;center&quot;
	:zoom=&quot;15&quot;
	&gt;
		&lt;Marker :options=&quot;{ position: center }&quot; /&gt;
	&lt;/GoogleMap&gt;
&lt;/template&gt;

&lt;script&gt;
import { GoogleMap, Marker } from 'vue3-google-map'

export default {
	components: { GoogleMap, Marker },
	setup() {
		const center = { lat: 40.689247, lng: -74.044502 }
		return { center }
	},
})
&lt;/script&gt;
</code></pre>
<p>并将<code>KEY</code>修改为自己的<code>KEY</code>。</p>
<p>若<code>KEY</code>没问题的话，运行后即可看到地图，笔者这里遇到了一下错误：</p>
<figure data-type="image" tabindex="9"><img src="https://img-blog.csdnimg.cn/20210106205510783.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>提示说是地图<code>API</code>还没有激活，点击提示中的<a href="https://console.cloud.google.com/apis/library?filter=category:maps">链接</a>进行激活：</p>
<figure data-type="image" tabindex="10"><img src="https://img-blog.csdnimg.cn/20210106210806159.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>启用：</p>
<figure data-type="image" tabindex="11"><img src="https://img-blog.csdnimg.cn/20210106210901303.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>但是这里又报了一个错误：</p>
<figure data-type="image" tabindex="12"><img src="https://img-blog.csdnimg.cn/20210106212327452.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>按照控制台提示的链接激活：</p>
<figure data-type="image" tabindex="13"><img src="https://img-blog.csdnimg.cn/20210106211334871.png" alt="在这里插入图片描述" loading="lazy"></figure>
<figure data-type="image" tabindex="14"><img src="https://img-blog.csdnimg.cn/20210106212256456.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>激活后即可看到地图。</p>
<h1 id="3-百度地图">3 百度地图</h1>
<p>步骤：</p>
<ul>
<li>获取<code>ak</code></li>
<li>安装</li>
<li>使用</li>
</ul>
<h2 id="31-获取ak">3.1 获取<code>ak</code></h2>
<p><code>ak</code>类似谷歌地图中的<code>API KEY</code>，<a href="http://lbsyun.baidu.com/index.php?title=%E9%A6%96%E9%A1%B5">戳这里</a>注册百度地图开发者账号，然后创建一个应用：</p>
<figure data-type="image" tabindex="15"><img src="https://img-blog.csdnimg.cn/20210107153441512.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>注意应用类型需要选择<code>浏览器端</code>，并且需要配置域名限制，若无限制域名需要输入<code>*</code>。</p>
<p>创建后即可看到<code>ak</code>：</p>
<figure data-type="image" tabindex="16"><img src="https://img-blog.csdnimg.cn/20210107152130340.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h2 id="32-安装">3.2 安装</h2>
<p>使用<code>Vue2.x</code>的可以从<code>npm</code>/<code>cnpm</code>安装：</p>
<ul>
<li><code>vue-baidu-map-v3</code></li>
<li><code>vue-baidu-map</code></li>
<li><code>coalbr-vue-baidu-map</code></li>
</ul>
<p>具体查看文档即可。</p>
<p>百度地图目前有4套<code>JS API</code>：</p>
<ul>
<li><code>JavaScript API GL</code></li>
<li><code>JavaScript API v2.0</code></li>
<li><code>JavaScript API v3.0</code></li>
<li><code>JavaScript API Lite</code></li>
</ul>
<p>这里以<code>v3.0</code>的<code>API</code>进行操作，对于这套<code>API</code>，官方文档只提供了<code>&lt;script&gt;</code>引入的方式，因此在<code>Vue3.0</code>中需要手动引入<code>JS</code>：</p>
<pre><code class="language-js">&lt;script type=&quot;text/javascript&quot; src=&quot;http://api.map.baidu.com/api?v=3.0&amp;ak=您的密钥&quot;&gt;&lt;/script&gt;
</code></pre>
<p>具体流程为，在<code>Vue</code>应用下的<code>index.html</code>直接引入该<code>JS</code>：</p>
<figure data-type="image" tabindex="17"><img src="https://img-blog.csdnimg.cn/20210107152630555.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h2 id="33-使用">3.3 使用</h2>
<p>在需要的组件中创建一个固定宽高的容器：</p>
<pre><code class="language-html">&lt;div id=&quot;container&quot; style=&quot;width: 800px;height: 800px&quot;&gt;&lt;/div&gt;
</code></pre>
<p>在<code>mounted()</code>中创建地图：</p>
<pre><code class="language-js">mounted(){
	var map = new BMap.Map('container')
    var point = new BMap.Point(116.404, 39.915)
    map.centerAndZoom(point, 15)
    map.enableScrollWheelZoom(true)
}
</code></pre>
<p>运行效果：</p>
<figure data-type="image" tabindex="18"><img src="https://img-blog.csdnimg.cn/20210107153001613.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>更详细的使用请看<a href="http://lbsyun.baidu.com/index.php?title=jspopular3.0/guide/helloworld">官方文档</a>。</p>
<h1 id="4-高德地图">4 高德地图</h1>
<p>流程：</p>
<ul>
<li>注册账号获取<code>KEY</code></li>
<li>安装</li>
<li>使用</li>
</ul>
<h2 id="41-key">4.1 <code>KEY</code></h2>
<p><a href="https://lbs.amap.com/">戳这里</a>注册高德开放平台账号：</p>
<figure data-type="image" tabindex="19"><img src="https://img-blog.csdnimg.cn/20210107153216498.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>创建：</p>
<figure data-type="image" tabindex="20"><img src="https://img-blog.csdnimg.cn/20210107153318515.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>选择添加：</p>
<figure data-type="image" tabindex="21"><img src="https://img-blog.csdnimg.cn/20210107153526478.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>选择<code>Web端(JS API)</code>，同时需要域名限制请按提示进行输入：</p>
<figure data-type="image" tabindex="22"><img src="https://img-blog.csdnimg.cn/20210107153623173.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>创建完成后即可看到<code>KEY</code>。</p>
<h2 id="42-安装">4.2 安装</h2>
<p>高德地图<code>JS API</code>目前有两个版本：<code>v1.4</code>/<code>v2.0</code>，<code>v1.4</code>的地图只能通过<code>&lt;script&gt;</code>引入，而在<code>v2.0</code>中，高德官方额外提供了<code>JSAPI Loader</code>，可以通过该<code>JSAPI Loader</code>去加载地图，这里以<code>v2.0</code>版本进行操作。</p>
<p><code>JSAPI Loader</code>使用<code>npm</code>/<code>cnpm</code>安装：</p>
<pre><code class="language-bash">npm i @amap/amap-jsapi-loader --save
# 或
cnpm i @amap/amap-jsapi-loader --save
</code></pre>
<p>另一种方式是传统的<code>&lt;script&gt;</code>，但不建议，需要的可以看<a href="https://lbs.amap.com/api/jsapi-v2/guide/abc/load">官方文档</a>。</p>
<h2 id="43-使用">4.3 使用</h2>
<p>在需要的组件中定义一个容器，确定高宽：</p>
<pre><code class="language-html">&lt;div id=&quot;container&quot; style=&quot;height: 800px;width: 800px;&quot;&gt;&lt;/div&gt;
</code></pre>
<p>下一步就是<code>import</code>：</p>
<pre><code class="language-js">import AMapLoader from '@amap/amap-jsapi-loader';
</code></pre>
<p>并在<code>setup()/mounted()</code>中加载：</p>
<pre><code class="language-js">setup(){
    AMapLoader.load({
        &quot;key&quot;: &quot;&quot;,                                          // 申请好的Web端开发者Key，首次调用 load 时必填
        &quot;version&quot;: &quot;1.4.15&quot;,                                // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15
        &quot;plugins&quot;: [],                                      // 需要使用的的插件列表，如比例尺'AMap.Scale'等
        &quot;AMapUI&quot;: {                                         // 是否加载 AMapUI，缺省不加载
            &quot;version&quot;: '1.1',                               // AMapUI 缺省 1.1
            &quot;plugins&quot;:[],                                   // 需要加载的 AMapUI ui插件
        },
        &quot;Loca&quot;:{                                            // 是否加载 Loca， 缺省不加载
            &quot;version&quot;: '1.3.2'                              // Loca 版本，缺省 1.3.2
        },
    }).then((AMap)=&gt;{
        var map = new AMap.Map('container', {
            zoom:11,                                        //级别
            center: [116.397428, 39.90923],                 //中心点坐标
            viewMode:'3D'                                   //使用3D视图
        });
    }).catch(e =&gt; {
        console.log(e);
    })
},
</code></pre>
<p>修改为自己的<code>KEY</code>，示例效果：</p>
<figure data-type="image" tabindex="23"><img src="https://img-blog.csdnimg.cn/20210107154137737.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>更详细使用请查看<a href="https://lbs.amap.com/api/jsapi-v2/guide/abc/quickstart">官方文档</a>。</p>
<h1 id="5-腾讯地图">5 腾讯地图</h1>
<p>步骤类似：</p>
<ul>
<li>注册账号</li>
<li>安装</li>
<li>使用</li>
</ul>
<h2 id="51-注册账号">5.1 注册账号</h2>
<p><a href="https://lbs.qq.com/">戳这里</a>注册账号：</p>
<figure data-type="image" tabindex="24"><img src="https://img-blog.csdnimg.cn/20210107161144299.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>创建<code>KEY</code>：</p>
<figure data-type="image" tabindex="25"><img src="https://img-blog.csdnimg.cn/20210107161233795.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h2 id="52-安装">5.2 安装</h2>
<p>腾讯地图目前同样有两个版本：<code>v1</code>/<code>v2</code>，这里以<code>v2</code>示例。</p>
<p>腾讯地图与百度地图类似，只提供了<code>&lt;script&gt;</code>去引入地图，因此操作方式与百度地图类似，在<code>index.html</code>中引入：</p>
<pre><code class="language-html">&lt;script charset=&quot;utf-8&quot; src=&quot;https://map.qq.com/api/js?v=2.exp&amp;key=KEY&quot;&gt;&lt;/script&gt;
</code></pre>
<p>修改为自己的<code>KEY</code>。</p>
<h2 id="53-使用">5.3 使用</h2>
<p>对应组件创建容器：</p>
<pre><code class="language-html">&lt;div id=&quot;container&quot; style=&quot;width: 800px;height: 800px&quot;&gt;&lt;/div&gt;
</code></pre>
<p><code>mounted()</code>中引入：</p>
<pre><code class="language-js">mounted(){
	var myLatlng = new qq.maps.LatLng(39.90923,116.397428)
    var myOptions = {
        zoom: 8,
        center: myLatlng,
        mapTypeId: qq.maps.MapTypeId.ROADMAP
    }
    var map = new qq.maps.Map(document.getElementById(&quot;container&quot;), myOptions);
}
</code></pre>
<p>示例效果：</p>
<figure data-type="image" tabindex="26"><img src="https://img-blog.csdnimg.cn/20210107162854979.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h1 id="6-附录坐标系转换">6 附录：坐标系转换</h1>
<p>国内主要有以下三种坐标系：</p>
<ul>
<li><code>WGS84</code>：一种大地坐标系，目前广泛使用的<code>GPS</code>系统使用的坐标系</li>
<li><code>GCJ02</code>：又叫火星坐标系/国测局坐标系，中国国家测绘局制订的地理信息系统坐标系统，是<code>WGS84</code>坐标加密后的坐标系</li>
<li><code>BD09</code>：百度坐标系，在<code>GCJ02</code>基础上再次进行加密</li>
</ul>
<p>而各种地图使用的坐标系如下：</p>
<ul>
<li>谷歌国内地图、高德地图、腾讯地图：<code>GCJ02</code></li>
<li>百度地图：<code>BD09</code></li>
<li>谷歌国外地图、<code>osm</code>地图等：<code>WGS84</code></li>
</ul>
<p>当坐标系不一致时，需要进行转换，这里推荐两个坐标系转换开源库（<code>3.1k</code>/<code>1.8k</code> <code>star</code>）：</p>
<figure data-type="image" tabindex="27"><img src="https://img-blog.csdnimg.cn/20210107164203456.png" alt="在这里插入图片描述" loading="lazy"></figure>
<figure data-type="image" tabindex="28"><img src="https://img-blog.csdnimg.cn/20210107164225264.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p><a href="https://github.com/wandergis/coordtransform">戳这里</a>或<a href="https://github.com/hujiulong/gcoord">这里</a>使用。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[每日分享 第206期]]></title>
        <id>https://2293736867.github.io/post/mei-ri-fen-xiang-di-206-qi/</id>
        <link href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-206-qi/">
        </link>
        <updated>2021-01-06T00:46:41.000Z</updated>
        <content type="html"><![CDATA[<h1 id="每日鸡汤">每日鸡汤</h1>
<blockquote>
<p>只有努力过了才知道，智商上的差距，是不可逾越的。</p>
</blockquote>
<h1 id="每日诗词">每日诗词</h1>
<blockquote>
<p>白日登山望烽火，黄昏饮马傍交河。<br>
——李颀《古从军行》</p>
</blockquote>
<h1 id="每日一句">每日一句</h1>
<blockquote>
<p>在人间有谁活着不像是一场炼狱，我不哭我已经没有尊严能放弃。</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[解决Echarts+<el-tab-pane>的警告：Can't get DOM width or height]]></title>
        <id>https://2293736867.github.io/post/jie-jue-echartslessel-tab-panegreaterde-jing-gao-cant-get-dom-width-or-height/</id>
        <link href="https://2293736867.github.io/post/jie-jue-echartslessel-tab-panegreaterde-jing-gao-cant-get-dom-width-or-height/">
        </link>
        <updated>2021-01-05T02:34:32.000Z</updated>
        <content type="html"><![CDATA[<h1 id="1-问题描述">1 问题描述</h1>
<p>环境：</p>
<ul>
<li><code>Chrome 87</code></li>
<li><code>Element-Plus</code></li>
<li><code>Vue3.0.5</code></li>
<li><code>&lt;el-tab&gt;</code>+<code>&lt;el-tab-pane&gt;</code>中使用<code>Echarts</code></li>
</ul>
<p>警告如下：</p>
<figure data-type="image" tabindex="1"><img src="https://img-blog.csdnimg.cn/2021010510082882.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h1 id="2-代码">2 代码</h1>
<pre><code class="language-html">&lt;el-tabs type=&quot;border-card&quot;&gt;
    &lt;el-tab-pane label=&quot;xxx&quot;&gt;
        &lt;div id=&quot;main&quot; style=&quot;width: 500px;height: 500px;&quot;&gt;
        &lt;/div&gt;
    &lt;/el-tab-pane&gt;
&lt;/el-tabs&gt;
</code></pre>
<pre><code class="language-js">export default {
    mounted() {
        var category = echarts.init(document.getElementById('main'))
        //...
    }
}
</code></pre>
<h1 id="3-原因分析">3 原因分析</h1>
<p>原因是<code>&lt;el-tab-pane&gt;</code>，具体可以查看<a href="https://github.com/apache/incubator-echarts/issues/6528">这里</a>的<code>issue</code>：</p>
<figure data-type="image" tabindex="2"><img src="https://img-blog.csdnimg.cn/20210105101341938.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p><code>Echarts</code>警告的关键是<code>clientWidth</code>和<code>clienHeight</code>，直接在代码中固定高宽时：</p>
<pre><code class="language-html">&lt;div id=&quot;main&quot; style=&quot;width: 500px;height: 500px;&quot;&gt;&lt;/div&gt;
</code></pre>
<p>控制台打印为<code>clientHeight</code>/<code>clientWidth</code>：</p>
<pre><code class="language-js">console.log(document.getElementById('main').clientWidth)
console.log(document.getElementById('main').clientHeight)
</code></pre>
<p>两者均为<code>0</code>，原因在于<code>&lt;el-tab-pane&gt;</code>，将图表放到外面时并没有警告：</p>
<pre><code class="language-html">&lt;el-tabs type=&quot;border-card&quot;&gt;
    &lt;div id=&quot;main&quot; style=&quot;width: 500px;height: 500px;&quot;&gt;
    &lt;/div&gt;
    &lt;el-tab-pane label=&quot;xxx&quot;&gt;
    &lt;/el-tab-pane&gt;
&lt;/el-tabs&gt;
</code></pre>
<p>初始化<code>Echarts</code>时，<code>&lt;el-tab-pane&gt;</code>并没有让<code>Echarts</code>获取正确的<code>clientHeight</code>以及<code>clientWidth</code>，尝试过的解决方法是监听<code>tab-click</code>：</p>
<pre><code class="language-html">&lt;el-tabs type=&quot;border-card&quot; @tab-click=&quot;xxx&quot;&gt;
    &lt;el-tab-pane label=&quot;xxx&quot;&gt;
        &lt;div id=&quot;main&quot; style=&quot;width: 500px;height: 500px;&quot;&gt;
        &lt;/div&gt;
    &lt;/el-tab-pane&gt;
&lt;/el-tabs&gt;
</code></pre>
<p>但是这需要手动点击<code>tab</code>才能监听到，也就是如果设置了默认<code>tab</code>这是无法监听到的。</p>
<p>另一个尝试过的方案是手动设置<code>width</code>/<code>height</code>：</p>
<pre><code class="language-html">&lt;el-tabs type=&quot;border-card&quot;&gt;
    &lt;el-tab-pane label=&quot;xxx&quot;&gt;
        &lt;div id=&quot;main&quot; ref=&quot;main&quot; style=&quot;width: 500px;height: 500px;&quot;&gt;
        &lt;/div&gt;
    &lt;/el-tab-pane&gt;
&lt;/el-tabs&gt;
</code></pre>
<pre><code class="language-js">mounted(){
    this.$refs.main.style.width=500
    this.$refs.main.style.height=500
    var chart = echarts.init(document.getElementById('main'))
}
</code></pre>
<p>也是不行。</p>
<h1 id="4-解决方案">4 解决方案</h1>
<p>使用<code>Object.defineProperty</code>设置<code>clientWidth</code>/<code>clientHeight</code>：</p>
<pre><code class="language-js">mounted(){
    Object.defineProperty(document.getElementById('main'),'clientWidth',{get:function(){return 500;}})
    Object.defineProperty(document.getElementById('main'),'clientHeight',{get:function(){return 500;}})
    var chart = echarts.init(document.getElementById('main'))
}
</code></pre>
<p>同时也可以把<code>div</code>上的<code>style</code>去掉：</p>
<pre><code class="language-html">&lt;div id=&quot;main&quot;&gt;&lt;/div&gt;
</code></pre>
<p>这样就不会出现警告了。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[每日分享 第205期]]></title>
        <id>https://2293736867.github.io/post/mei-ri-fen-xiang-di-205-qi/</id>
        <link href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-205-qi/">
        </link>
        <updated>2021-01-05T00:43:53.000Z</updated>
        <content type="html"><![CDATA[<h1 id="每日鸡汤">每日鸡汤</h1>
<blockquote>
<p>我是一条酸菜鱼，又酸又菜，还多余。</p>
</blockquote>
<h1 id="每日诗词">每日诗词</h1>
<blockquote>
<p>黄师塔前江水东，春光懒困倚微风。<br>
——杜甫《江畔独步寻花·其五》</p>
</blockquote>
<h1 id="每日一句">每日一句</h1>
<blockquote>
<p>打雷时你想到的是要下雨还是她害怕。</p>
</blockquote>
]]></content>
    </entry>
</feed>