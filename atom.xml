<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://2293736867.github.io</id>
    <title>氷泠&apos;s blog</title>
    <updated>2021-03-16T18:44:09.488Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://2293736867.github.io"/>
    <link rel="self" href="https://2293736867.github.io/atom.xml"/>
    <subtitle>我配不上你，
纵然很努力。</subtitle>
    <logo>https://2293736867.github.io/images/avatar.png</logo>
    <icon>https://2293736867.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, 氷泠&apos;s blog</rights>
    <entry>
        <title type="html"><![CDATA[关于Kotlin中日志的使用方法]]></title>
        <id>https://2293736867.github.io/post/guan-yu-kotlin-zhong-ri-zhi-de-shi-yong-fang-fa/</id>
        <link href="https://2293736867.github.io/post/guan-yu-kotlin-zhong-ri-zhi-de-shi-yong-fang-fa/">
        </link>
        <updated>2021-03-16T18:36:07.000Z</updated>
        <content type="html"><![CDATA[<h1 id="1-引言">1 引言</h1>
<p>想必学过<code>Java</code>的人都知道一个<code>@Slf4j</code>使用得多么的舒服：</p>
<pre><code class="language-java">@Slf4j
public class TestController{
	@GetMapping(&quot;/test&quot;)
	public String test(){
		log.debug(&quot;debug&quot;);		
		return &quot;test&quot;;
	}
}
</code></pre>
<p>但是很不幸在<code>Kotlin</code>中并没有这种注解，因此，本文给出了一种类似<code>@Slf4j</code>注解在<code>Kotlin</code>中的使用方法，以及介绍一个100%使用<code>Kotlin</code>编写的日志库。</p>
<h1 id="2-动手写slf4j">2 动手写<code>@Slf4j</code></h1>
<p>很简单，先上代码：</p>
<pre><code class="language-kotlin">import org.slf4j.Logger
import org.slf4j.LoggerFactory

@Target(AnnotationTarget.CLASS)
@Retention(AnnotationRetention.RUNTIME)
annotation class Slf4j{
    companion object{
        val &lt;reified T&gt; T.log: Logger
        inline get() = LoggerFactory.getLogger(T::class.java)
    }
}
</code></pre>
<p>逐行解释如下：</p>
<ul>
<li><code>@Target</code>：与<code>Java</code>中的<code>@Target</code>类似，注解的目标，这里是类</li>
<li><code>@Retention</code>：与<code>Java</code>中的<code>@Retention</code>类似，运行时保留</li>
<li><code>annotation class</code>：声明一个注解</li>
<li><code>companion object</code>：伴生对象</li>
<li><code>val &lt;reified T&gt; T.log:Logger</code>：声明一个<code>Logger</code>类型的泛型对象</li>
<li><code>inline get() = LoggerFactory.getLogger(T::class.java)</code>：声明<code>getter</code>为内联，声明为内联才能使用<code>T</code>，这样才能传递给后面的<code>getLogger</code>，<code>T::class.java</code>相当于<code>Java</code>中的<code>T.class</code>，也就是<code>getLogger(T::class.java)</code>相当于<code>getLogger(SomeClass.class)</code></li>
</ul>
<p>使用很简单：</p>
<pre><code class="language-kotlin">@RestController
@Slf4j
class TestController {
    @GetMapping(&quot;/test&quot;)
    fun test():String{
        log.warn(&quot;cc&quot;)
        return &quot;test&quot;
    }
}
</code></pre>
<p>直接类上加一个注解，就可以使用<code>log.info</code>/<code>log.warn</code>之类的方法了。</p>
<h1 id="3-kotlin-logging">3 <code>kotlin-logging</code></h1>
<p>上面介绍了注解的使用方法，如果不想使用注解的话，可以使用别人的库，比如<code>kotlin-logging</code>。</p>
<p><code>kotlin-logging</code>是一个100%使用<code>Kotlin</code>编写的轻度封装了<code>slf4j</code>的开源日志库，已经收获<code>1.4k</code>的<code>star</code>：</p>
<figure data-type="image" tabindex="1"><img src="https://img-blog.csdnimg.cn/20210317014610620.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>依赖如下：</p>
<pre><code class="language-xml">&lt;dependency&gt;
	&lt;groupId&gt;io.github.microutils&lt;/groupId&gt;
	&lt;artifactId&gt;kotlin-logging-jvm&lt;/artifactId&gt;
	&lt;version&gt;2.0.6&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p><code>Gradle</code>：</p>
<pre><code class="language-bash">implementation 'io.github.microutils:kotlin-logging-jvm:2.0.6'
</code></pre>
<p>引入时，只需要在对应的类中创建一个属性即可：</p>
<pre><code class="language-kotlin">private val logger = KotlinLogging.logger {}
</code></pre>
<p>使用时，直接调用其中的<code>info</code>/<code>debug</code>/<code>error</code>等即可：</p>
<pre><code class="language-kotlin">import mu.KotlinLogging
private val logger = KotlinLogging.logger {} 
class FooWithLogging {
    val message = &quot;world&quot;
    fun bar() {
        logger.debug { &quot;hello $message&quot; }
    }
}
</code></pre>
<h1 id="4-两者结合使用">4 两者结合使用</h1>
<p>当然，也可以将注解与<code>kotlin-logging</code>结合一下使用，首先，笔者简单地看了一下<code>KotlinLogging</code>的接口：</p>
<figure data-type="image" tabindex="2"><img src="https://img-blog.csdnimg.cn/20210317020838976.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>提供了三个对外的<code>logger</code>方法，参数分别是：</p>
<ul>
<li>函数</li>
<li>字符串</li>
<li><code>org.slf4j.Logger</code></li>
</ul>
<p>对外没有提供类似<code>getLogger(Class&lt;?&gt; clazz)</code>这样的用类作为参数的方法，因此，需要通过泛型获取到具体类的名字并使用第二种方法构造<code>mu.KLogger</code>：</p>
<pre><code class="language-kotlin">import mu.KotlinLogging
import org.slf4j.Logger

@Target(AnnotationTarget.CLASS)
@Retention(AnnotationRetention.RUNTIME)
annotation class Slf4j{
    companion object{
        val &lt;reified T&gt; T.log: Logger
        inline get() = KotlinLogging.logger{T::class.java.name}
    }
}
</code></pre>
<p>使用方法同上，直接加一个<code>@Slf4j</code>即可使用。</p>
<h1 id="5-完整demo参考">5 完整<code>Demo</code>参考</h1>
<ul>
<li><a href="https://github.com/2293736867/KotlinLogWithAnnotationDemo">Github</a></li>
<li><a href="https://gitee.com/u6b7b5fc3/KotlinLogWithAnnotationDemo">码云</a></li>
<li><a href="https://codechina.csdn.net/qq_27525611/KotlinLogWithAnnotationDemo">CODE.CHINA</a></li>
</ul>
<h1 id="6-参考">6 参考</h1>
<p>1、<a href="https://github.com/MicroUtils/kotlin-logging">kotlin-logging</a></p>
<p>2、<a href="https://www.kotlincn.net/docs/reference/inline-functions.html">Kotlin官网-内联函数</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Github Pages+Gridea设置DisqusJS评论]]></title>
        <id>https://2293736867.github.io/post/github-pagesgridea-she-zhi-disqusjs-ping-lun/</id>
        <link href="https://2293736867.github.io/post/github-pagesgridea-she-zhi-disqusjs-ping-lun/">
        </link>
        <updated>2021-03-16T06:08:29.000Z</updated>
        <content type="html"><![CDATA[<h1 id="1-前言">1 前言</h1>
<p>相信很多人都对<code>Github Pages</code>不默认，笔者之前写过了一篇文章，使用<code>Github Pages</code>去搭建博客的，链接可以<a href="https://blog.csdn.net/qq_27525611/article/details/104885163">戳这里</a>。</p>
<p>但是唯一的不足是没有提到评论，因为当时笔者测试了一下，评论设置不成功，而这个问题，在今天终于解决了。</p>
<h1 id="2-gitalkdisqus">2 <code>Gitalk</code>/<code>Disqus</code></h1>
<p><code>Gridea</code>支持两种评论的<code>API</code>：</p>
<ul>
<li><code>Gitalk</code></li>
<li><code>Disqus</code></li>
</ul>
<p>因为网上大部分的教程都是<code>Gitalk</code>的，所以这里写一篇<code>Disqus</code>的。</p>
<h1 id="3-具体流程">3 具体流程</h1>
<p>首先去<a href="https://disqus.com/api/applications/">官网</a>注册获取<code>key</code>：</p>
<figure data-type="image" tabindex="1"><img src="https://img-blog.csdnimg.cn/20210316140207918.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>填上标签，以及自己的<code>Github Pages</code>网站，描述以及组织可以不同填：</p>
<figure data-type="image" tabindex="2"><img src="https://img-blog.csdnimg.cn/20210316140225442.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>注册之后就可以看到自己的<code>key</code>：</p>
<figure data-type="image" tabindex="3"><img src="https://img-blog.csdnimg.cn/20210316140452887.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>先复制这个<code>key</code>，然后在<code>settings</code>中设置自己的仓库名（<code>https://username.github.io</code>）：</p>
<figure data-type="image" tabindex="4"><img src="https://img-blog.csdnimg.cn/20210316140555739.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>完成之后打开<code>Gridea</code>，复制刚才的<code>key</code>到<code>Comment Setting</code>中<code>apikey</code>即可，其他可以留空：</p>
<figure data-type="image" tabindex="5"><img src="https://img-blog.csdnimg.cn/20210316140422245.png" alt="在这里插入图片描述" loading="lazy"></figure>
<p>同步完成后就可以测试了。</p>
<figure data-type="image" tabindex="6"><img src="https://img-blog.csdnimg.cn/20210316140815271.png" alt="在这里插入图片描述" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[每日分享 第275期]]></title>
        <id>https://2293736867.github.io/post/mei-ri-fen-xiang-di-275-qi/</id>
        <link href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-275-qi/">
        </link>
        <updated>2021-03-16T04:22:00.000Z</updated>
        <content type="html"><![CDATA[<h1 id="每日鸡汤">每日鸡汤</h1>
<blockquote>
<p>活了这么多年，我一直搞不明白一件事，拉钩为什么要上吊？</p>
</blockquote>
<h1 id="每日诗词">每日诗词</h1>
<blockquote>
<p>风透春衫，雨透春衫。<br>
——佚名《一剪梅·漠漠春阴酒半酣》</p>
</blockquote>
<h1 id="每日一句">每日一句</h1>
<blockquote>
<p>失去人性，失去很多，失去兽性，失去一切。</p>
</blockquote>
<h1 id="关于前几期的延更">关于前几期的延更</h1>
<p>因为更换域名了，不知道是<code>Gridea</code>的问题还是<code>Github Pages</code>的问题，总是<code>sync</code>失败，也有可能是<code>DNS</code>的原因。</p>
<p>现在浏览器的缓存已经更新可以正常访问新域名<code>bingling.fun</code>了。</p>
<h1 id="音乐推荐">音乐推荐</h1>
<blockquote>
<p><a href="https://music.163.com/#/song?id=1811408619">关机又关机——YangYang</a></p>
</blockquote>
<blockquote>
<p>你一直在我身边 哪怕我一无所有<br>
你说只要我爱你 你就别无所求<br>
看着你的照片 我的悲伤<br>
以为学会伪装 就不会受伤<br>
还是会想你 特别是晚上<br>
拨不通电话 我跟谁讲</p>
</blockquote>
<blockquote>
<p>你一直在我身边 哪怕我一无所有<br>
你说只要我爱你 你就别无所求<br>
看着你的照片 我的悲伤<br>
还是会想你 特别是晚上<br>
拨不通电话 我跟谁讲</p>
</blockquote>
<blockquote>
<p>为什么<br>
关机又关机<br>
对不起请关机<br>
我漫无目的<br>
我总是力不从心<br>
这次又关机又关机<br>
我焦急想过也放弃<br>
18818<br>
电话还要不要打</p>
</blockquote>
<blockquote>
<p>so 你不在<br>
我走开<br>
哎咦耶咦耶<br>
怎么人心让你受委屈<br>
烦恼不断哎咦耶咦耶<br>
不相信<br>
这是命<br>
哎咦耶咦耶<br>
还没给你发完的短信<br>
被我藏在手机哎咦耶</p>
</blockquote>
<blockquote>
<p>你知道我的脾气嘛<br>
吵架我从不回头<br>
I got 大男子主义<br>
谢谢你给予我的包容<br>
我爱你这句话我说了三万七千多遍<br>
我的爱我的爱我的爱我的爱就像真金不怕火炼<br>
如果非要做个比喻<br>
离开我我会死去<br>
才不管三七21 nobody can fun with me<br>
我讨厌你的前任<br>
因为他根本不配<br>
对不对<br>
只有我才懂得你的珍贵</p>
</blockquote>
<blockquote>
<p>你一直在我身边<br>
哪怕我一无所有<br>
你说只要我爱你<br>
你就别无所求<br>
看着你的照片<br>
我的悲伤<br>
以为学会伪装<br>
就不会受伤<br>
还是会想你<br>
特别是晚上<br>
拨不通电话<br>
我跟谁讲</p>
</blockquote>
<blockquote>
<p>为什么<br>
关机又关机<br>
对不起<br>
请关机<br>
我漫无目的<br>
我总是力不从心<br>
这次又关机又关机<br>
我焦急过想过也放弃<br>
18818<br>
电话还要不要打</p>
</blockquote>
<blockquote>
<p>打你 电话 没说够<br>
我们 的心 被伤透<br>
其实不想让你走<br>
I can't never let you go<br>
go go go<br>
相信你也肯定懂<br>
如果你是真的懂</p>
</blockquote>
<blockquote>
<p>I feel so sad</p>
</blockquote>
<blockquote>
<p>I feel so sad</p>
</blockquote>
<blockquote>
<p>你不在</p>
</blockquote>
<blockquote>
<p>还是会想你<br>
特别是晚上<br>
拨不通电话<br>
我跟谁讲</p>
</blockquote>
<blockquote>
<p>为什么<br>
关机又关机<br>
对不起<br>
请关机<br>
我漫无目的<br>
我总是力不从心<br>
我焦急想过也放弃<br>
18818<br>
电话还要不要打</p>
</blockquote>
<blockquote>
<p>你一直在我身边<br>
哪怕我一无所有<br>
你说只要我爱你<br>
那就别无所求<br>
看着你的照片<br>
我的悲伤<br>
以为学会伪装<br>
就不会受伤<br>
还是会想你<br>
特别是晚上<br>
拨不通电话<br>
我跟谁讲</p>
</blockquote>
<h1 id="关于博客标签云的颜色">关于博客标签云的颜色</h1>
<p>一开始是这样的：</p>
<figure data-type="image" tabindex="1"><img src="https://2293736867.github.io/post-images/1615872139143.png" alt="" loading="lazy"></figure>
<p>查了一下代码，在<code>assets/styles/main.less</code>下配置的颜色：</p>
<figure data-type="image" tabindex="2"><img src="https://2293736867.github.io/post-images/1615872189593.png" alt="" loading="lazy"></figure>
<p>本来以为是自动随机生成的颜色，没想到是作者固定了颜色，而且只固定28个，也就是<code>a.ctag-0</code>-<code>a.ctag-27</code>，而<code>HTML</code>的代码如下：</p>
<figure data-type="image" tabindex="3"><img src="https://2293736867.github.io/post-images/1615872300144.png" alt="" loading="lazy"></figure>
<p>用的是<code>ejs</code>，笔者不会<code>ejs</code>，本来想给剩下的标签加上随机颜色，但是尝试了一下把其中的<code>ctag-&lt;%= tagIndex %&gt;</code>删除，最后的<code>H5</code>还是带有<code>ctag-xx</code>，尝试了一下强制加<code>style=&quot;background&quot;</code>也没有效果。</p>
<p>没办法了手动操作一波样式：</p>
<figure data-type="image" tabindex="4"><img src="https://2293736867.github.io/post-images/1615872441886.png" alt="" loading="lazy"></figure>
<p>手动加了几个之后，发现手动太麻烦了，而且笔者记得<code>vim</code>是有让数字增大的快捷键的，就是<code>ctrl+x</code>，于是使用<code>q</code>做了一下按键的记录，啪的一声很快一百多个标签全部完成了：</p>
<figure data-type="image" tabindex="5"><img src="https://2293736867.github.io/post-images/1615872542019.png" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[每日分享 第274期]]></title>
        <id>https://2293736867.github.io/post/mei-ri-fen-xiang-di-274-qi/</id>
        <link href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-274-qi/">
        </link>
        <updated>2021-03-15T04:20:07.000Z</updated>
        <content type="html"><![CDATA[<h1 id="每日鸡汤">每日鸡汤</h1>
<blockquote>
<p>为什么总是天妒英才呢？因为没人管笨蛋活多久。</p>
</blockquote>
<h1 id="每日诗词">每日诗词</h1>
<blockquote>
<p>春风倚棹阖闾城，水国春寒阴复晴。<br>
——刘长卿《别严士元》</p>
</blockquote>
<h1 id="每日一句">每日一句</h1>
<blockquote>
<p>我和你，可以做朋友吗？</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[每日分享 第273期]]></title>
        <id>https://2293736867.github.io/post/mei-ri-fen-xiang-di-273-qi/</id>
        <link href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-273-qi/">
        </link>
        <updated>2021-03-14T04:17:32.000Z</updated>
        <content type="html"><![CDATA[<h1 id="每日鸡汤">每日鸡汤</h1>
<blockquote>
<p>吃完苦中苦，我终于成为了人下人。</p>
</blockquote>
<h1 id="每日诗词">每日诗词</h1>
<blockquote>
<p>试衫著暖气，开镜觅春晖。<br>
——张若虚《代答闺梦还》</p>
</blockquote>
<h1 id="每日一句">每日一句</h1>
<blockquote>
<p>我没有任何理由为了那些人让自己的人生付之一炬！</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[每日分享 第272期]]></title>
        <id>https://2293736867.github.io/post/mei-ri-fen-xiang-di-272-qi/</id>
        <link href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-272-qi/">
        </link>
        <updated>2021-03-13T04:15:05.000Z</updated>
        <content type="html"><![CDATA[<h1 id="每日鸡汤">每日鸡汤</h1>
<blockquote>
<p>不要以为世界抛弃了你，世界根本没空搭理你。</p>
</blockquote>
<h1 id="每日诗词">每日诗词</h1>
<blockquote>
<p>淡荡春光寒食天，玉炉沉水袅残烟。<br>
——李清照《浣溪沙·淡荡春光寒食天》</p>
</blockquote>
<h1 id="每日一句">每日一句</h1>
<blockquote>
<p>你们认为没有路，是因为没有学会不择手段。</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[每日分享 第271期]]></title>
        <id>https://2293736867.github.io/post/mei-ri-fen-xiang-di-271-qi/</id>
        <link href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-271-qi/">
        </link>
        <updated>2021-03-12T04:10:41.000Z</updated>
        <content type="html"><![CDATA[<h1 id="每日鸡汤">每日鸡汤</h1>
<blockquote>
<p>只要选对了人生的方向，很容易就成功了，让我们恭喜只要和很容易。</p>
</blockquote>
<h1 id="每日诗词">每日诗词</h1>
<blockquote>
<p>桃花尽日随流水，洞在清溪何处边。<br>
——张旭《桃花溪》</p>
</blockquote>
<h1 id="每日一句">每日一句</h1>
<blockquote>
<p>就算没有意义，偶尔也会有好事发生。</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[每日分享 第270期]]></title>
        <id>https://2293736867.github.io/post/mei-ri-fen-xiang-di-270-qi/</id>
        <link href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-270-qi/">
        </link>
        <updated>2021-03-11T04:08:52.000Z</updated>
        <content type="html"><![CDATA[<h1 id="每日鸡汤">每日鸡汤</h1>
<blockquote>
<p>做好人没希望，做坏人不擅长。</p>
</blockquote>
<h1 id="每日诗词">每日诗词</h1>
<blockquote>
<p>人间四月芳菲尽，山寺桃花始盛开。<br>
——白居易《大林寺桃花》</p>
</blockquote>
<h1 id="每日一句">每日一句</h1>
<blockquote>
<p>越是锐利的小刀切完东西后就越容易变钝。</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[每日分享 第269期]]></title>
        <id>https://2293736867.github.io/post/mei-ri-fen-xiang-di-269-qi/</id>
        <link href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-269-qi/">
        </link>
        <updated>2021-03-10T04:05:18.000Z</updated>
        <content type="html"><![CDATA[<h1 id="每日鸡汤">每日鸡汤</h1>
<blockquote>
<p>绝望不在某时某刻，而在此时此刻。</p>
</blockquote>
<h1 id="每日诗词">每日诗词</h1>
<blockquote>
<p>几日不来春便老，开尽桃花。<br>
——吴琚《浪淘沙·岸柳可藏鸦》</p>
</blockquote>
<h1 id="每日一句">每日一句</h1>
<blockquote>
<p>这个世界啊，很美丽的，很广大的，很辽阔的！</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[每日分享 第268期]]></title>
        <id>https://2293736867.github.io/post/mei-ri-fen-xiang-di-268-qi/</id>
        <link href="https://2293736867.github.io/post/mei-ri-fen-xiang-di-268-qi/">
        </link>
        <updated>2021-03-09T04:02:54.000Z</updated>
        <content type="html"><![CDATA[<h1 id="每日鸡汤">每日鸡汤</h1>
<blockquote>
<p>不要埋怨现在的经历惨淡，跟未来比，还差的远呢。</p>
</blockquote>
<h1 id="每日诗词">每日诗词</h1>
<blockquote>
<p>城中桃李愁风雨，春在溪头荠菜花。<br>
——辛弃疾《鹧鸪天·陌上柔桑破嫩芽》</p>
</blockquote>
<h1 id="每日一句">每日一句</h1>
<blockquote>
<p>目的虽有，却无路可循；我们称之为路的，无非是踌躇。</p>
</blockquote>
]]></content>
    </entry>
</feed>